import{_ as n,C as e,c as d,o as l,a4 as i,G as a}from"./chunks/framework.CCndWvNN.js";const y=JSON.parse('{"title":"DetailPage 页面详情组件","description":"","frontmatter":{},"headers":[],"relativePath":"components/DetailPage.md","filePath":"components/DetailPage.md"}'),h={name:"components/DetailPage.md"};function k(p,s,r,E,o,g){const t=e("demo");return l(),d("div",null,[s[0]||(s[0]=i('<h1 id="detailpage-页面详情组件" tabindex="-1">DetailPage 页面详情组件 <a class="header-anchor" href="#detailpage-页面详情组件" aria-label="Permalink to &quot;DetailPage 页面详情组件&quot;">​</a></h1><p>DetailPage 是一个用于展示和编辑详情页面的通用组件。它提供了标准的页面布局，包括页头、内容区域和页脚操作栏。</p><ul><li>自动切换编辑、创建、详情状态，自动提交到对应的创建/更新接口。</li><li>基于 <code>ProFormFields</code> 构建表单或分组表单</li><li>页头、页脚操作按钮、每个分组可自定义操作按钮组</li><li>可以任意扩展与自定义，可搭配自定义各类组件使用，或完全不使用内部表单生成</li></ul><h2 id="基础用法" tabindex="-1">基础用法 <a class="header-anchor" href="#基础用法" aria-label="Permalink to &quot;基础用法&quot;">​</a></h2>',4)),a(t,{src:"@/components/DetailPage/demos/demo1.vue",class:"bg-gray-100 p-0!"}),a(t,{src:"@/components/DetailPage/demos/demo2.vue",class:"bg-gray-100 p-0!"}),s[1]||(s[1]=i(`<p>默认根据以下规则判断当前页面状态</p><ul><li>详情页：viewMode为true</li><li>新建页：viewMode为false 且 data[idKey] 为空</li><li>编辑页：viewMode为false 且 data[idKey] 不为空</li></ul><h4 id="扩展表单" tabindex="-1">扩展表单 <a class="header-anchor" href="#扩展表单" aria-label="Permalink to &quot;扩展表单&quot;">​</a></h4><ol><li>通过 <code>extraFields</code> 配置表单字段组，可用于分组显示在基础表单字段下方。也可以不配置 fields 字段，直接使用 extraFields 配置表单字段组。</li><li>通过 <code>contentExtra</code> 或 <code>pageExtra</code> 插槽，可用于显示在主区域内部表单字段下方或主区域下方。</li></ol><h4 id="自定义footeractions" tabindex="-1">自定义footerActions <a class="header-anchor" href="#自定义footeractions" aria-label="Permalink to &quot;自定义footerActions&quot;">​</a></h4><p>默认显示取消、提交两个按钮，可以通过footerActions进行自定义。</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> footerActions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cancel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">submit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">submitLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;取消&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      onClick: cancel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;保存&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      onClick: handleSave,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;提交&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      onClick: submit,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      loading: submitLoading,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;primary&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">page-detail</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">form-data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;资源库管理&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loading</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">view-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">props.viewMode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">detailFields</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extra-fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">extraFields</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update-service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">handleEditSubmit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create-service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">handleEditSubmit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">footer-actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">footerActions</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">onOk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h2><h3 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-label="Permalink to &quot;Props&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数名</th><th>说明</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>title</td><td>页面标题</td><td>string</td><td>-</td></tr><tr><td>defaultValue</td><td>表单默认值，用于非受控模式初始化</td><td>object</td><td>{}</td></tr><tr><td>formData</td><td>表单数据（支持 v-model）</td><td>object</td><td>-</td></tr><tr><td>viewMode</td><td>是否为查看模式</td><td>boolean</td><td>false</td></tr><tr><td>fields</td><td>表单字段配置</td><td>ProFormFieldsField[]</td><td>-</td></tr><tr><td>extraFields</td><td>额外的表单字段组</td><td><code>{ title?: string, fields: ProFormFieldsField[] }[]</code></td><td>-</td></tr><tr><td>column</td><td>每行显示的字段数量</td><td>number</td><td>2</td></tr><tr><td>formItemProps</td><td>表单项配置, 参见 Element Plus FormItem 配置</td><td>object</td><td>-</td></tr><tr><td>idKey</td><td>主键字段名</td><td>string</td><td>&#39;id&#39;</td></tr><tr><td>loading</td><td>加载状态, 不指定时根据service 请求状态自动控制</td><td>boolean</td><td>false</td></tr><tr><td>headerActions</td><td>页头操作按钮</td><td>any[]</td><td>-</td></tr><tr><td>footerActions</td><td>页脚操作按钮</td><td>any[] | Function</td><td>-</td></tr><tr><td>footerClass</td><td>页脚自定义类名</td><td>string</td><td>-</td></tr><tr><td>showFooter</td><td>是否显示页脚</td><td>boolean</td><td>true</td></tr><tr><td>contentClass</td><td>内容区域自定义类名</td><td>string</td><td>-</td></tr><tr><td>updateService</td><td>更新数据的请求函数</td><td><code>(formValues: Record&lt;string, any&gt;) =&gt; void</code></td><td>-</td></tr><tr><td>createService</td><td>创建数据的请求函数</td><td><code>(formValues: Record&lt;string, any&gt;) =&gt; void</code></td><td>-</td></tr></tbody></table><h3 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h3><table tabindex="0"><thead><tr><th>事件名</th><th>说明</th><th>回调参数</th></tr></thead><tbody><tr><td>update:formData</td><td>表单数据更新时触发</td><td>(formData: object)</td></tr><tr><td>submit</td><td>表单提交时触发</td><td>(values: object)</td></tr><tr><td>ok</td><td>表单提交成功时触发</td><td>(values: object)</td></tr><tr><td>back</td><td>返回/取消按钮点击时触发</td><td>-</td></tr></tbody></table><h3 id="slots" tabindex="-1">Slots <a class="header-anchor" href="#slots" aria-label="Permalink to &quot;Slots&quot;">​</a></h3><table tabindex="0"><thead><tr><th>插槽名</th><th>说明</th><th>参数</th></tr></thead><tbody><tr><td>headerActions</td><td>自定义页头操作区域</td><td>-</td></tr><tr><td>contentHeader</td><td>内容区域顶部</td><td>-</td></tr><tr><td>contentExtra</td><td>表单字段下方、卡片内部的额外内容</td><td>-</td></tr><tr><td>pageExtra</td><td>页面底部额外内容</td><td>-</td></tr><tr><td>footer</td><td>自定义页脚内容</td><td>-</td></tr><tr><td>default</td><td>自定义整个表单内容</td><td><code>{ data, onChange, formRef }</code></td></tr></tbody></table><h3 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-label="Permalink to &quot;Methods&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法名</th><th>说明</th><th>参数</th></tr></thead><tbody><tr><td>validField</td><td>验证指定字段</td><td><code>(fields?: string[]) =&gt; Promise&lt;void&gt;</code></td></tr></tbody></table><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ol><li>当同时设置 <code>defaultValue</code> 和 <code>formData</code> 时，<code>formData</code> 的优先级更高</li><li><code>footerActions</code> 可以是数组或函数，函数时会传入 <code>submit</code>、<code>cancel</code> 和 <code>submitLoading</code> 参数</li><li>组件内部集成了 <code>ProFormFields</code> 用于构建表单，可通过 <code>fields</code> 和 <code>extraFields</code> 配置表单字段</li></ol>`,18))])}const F=n(h,[["render",k]]);export{y as __pageData,F as default};
