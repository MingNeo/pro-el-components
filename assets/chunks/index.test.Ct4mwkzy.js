import{m as r}from"./vue-test-utils.esm-bundler.BNPP31t0.js";import{useEmitAsProps as s}from"./index.DW2C-GCp.js";import{d as u,i,g as e,v}from"./vi.JYQecGiw.CsLlcVZs.js";import{d as a}from"./framework.igcgEEdr.js";import"./commonjsHelpers.BosuxZz1.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";u("useEmitAsProps",()=>{i("应该将 emit 转换为 props 格式",()=>{const o=a({name:"TestComponent",emits:["change","update:modelValue"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);e(t.vm.propsFromEmit).toBeDefined(),e(typeof t.vm.propsFromEmit.onChange).toBe("function"),e(typeof t.vm.propsFromEmit["onUpdate:modelValue"]).toBe("function")}),i("应该正确调用 emit 函数",()=>{const o=a({name:"TestComponent",emits:["change"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);t.vm.propsFromEmit.onChange("test-value"),e(t.emitted("change")).toBeTruthy(),e(t.emitted("change")[0]).toEqual(["test-value"])}),i("应该支持多个参数",()=>{const o=a({name:"TestComponent",emits:["change"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);t.vm.propsFromEmit.onChange("value1","value2","value3"),e(t.emitted("change")).toBeTruthy(),e(t.emitted("change")[0]).toEqual(["value1","value2","value3"])}),i("应该正确处理 kebab-case 事件名",()=>{const o=a({name:"TestComponent",emits:["update:model-value"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);e(typeof t.vm.propsFromEmit["onUpdate:modelValue"]).toBe("function")}),i("应该处理多个事件",()=>{const o=a({name:"TestComponent",emits:["change","update","submit","cancel"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);e(typeof t.vm.propsFromEmit.onChange).toBe("function"),e(typeof t.vm.propsFromEmit.onUpdate).toBe("function"),e(typeof t.vm.propsFromEmit.onSubmit).toBe("function"),e(typeof t.vm.propsFromEmit.onCancel).toBe("function")}),i("应该正确触发所有转换的事件",()=>{const o=a({name:"TestComponent",emits:["change","submit"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);t.vm.propsFromEmit.onChange("change-value"),t.vm.propsFromEmit.onSubmit("submit-value"),e(t.emitted("change")).toBeTruthy(),e(t.emitted("change")[0]).toEqual(["change-value"]),e(t.emitted("submit")).toBeTruthy(),e(t.emitted("submit")[0]).toEqual(["submit-value"])}),i("没有 emits 时应该返回空对象",()=>{const o=a({name:"TestComponent",setup(m,{emit:p}){return{propsFromEmit:s(p)}},template:"<div></div>"}),t=v.spyOn(console,"warn").mockImplementation(()=>{}),n=r(o);e(n.vm.propsFromEmit).toEqual({}),e(t).toHaveBeenCalled(),t.mockRestore()}),i("应该支持不同的命名风格",()=>{const o=a({name:"TestComponent",emits:["onFocus","on-blur","update:value"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);e(t.vm.propsFromEmit).toBeDefined()}),i("应该支持没有参数的事件",()=>{const o=a({name:"TestComponent",emits:["click"],setup(n,{emit:m}){return{propsFromEmit:s(m)}},template:"<div></div>"}),t=r(o);t.vm.propsFromEmit.onClick(),e(t.emitted("click")).toBeTruthy(),e(t.emitted("click")[0]).toEqual([])}),i("应该支持对象作为参数",()=>{const o=a({name:"TestComponent",emits:["change"],setup(m,{emit:p}){return{propsFromEmit:s(p)}},template:"<div></div>"}),t=r(o),n={key:"value",count:10};t.vm.propsFromEmit.onChange(n),e(t.emitted("change")).toBeTruthy(),e(t.emitted("change")[0]).toEqual([n])}),i("应该支持数组作为参数",()=>{const o=a({name:"TestComponent",emits:["change"],setup(m,{emit:p}){return{propsFromEmit:s(p)}},template:"<div></div>"}),t=r(o),n=[1,2,3];t.vm.propsFromEmit.onChange(n),e(t.emitted("change")).toBeTruthy(),e(t.emitted("change")[0]).toEqual([n])})});
