import{a as N,b as R}from"./index.BQOwn3WU.js";import"./base.Dwgz6jSd.js";import{E as z}from"./el-button.k3Ms4Xdh.js";/* empty css                     */import{_ as q}from"./buttons.vue_vue_type_script_setup_true_lang.BvWP4u-7.js";/* empty css              */import{_ as A}from"./index.vue_vue_type_script_setup_true_lang.Cm45yPGm.js";import{E as D}from"./icon.C3T6eoYR.js";import{E as $}from"./index.DbWT0aQr.js";import{d as I,ad as L,p as f,q as g,h as B,c as T,o as u,n as y,G as v,w as p,k as n,K as C,j,r as x,b as h,e as P,a1 as G,ab as H,a as K,t as M,H as U}from"./framework.igcgEEdr.js";const ae=I({name:"ProSearchForm",inheritAttrs:!1,__name:"index",props:{defaultValue:{default:()=>({})},showActions:{type:Boolean,default:!0},form:{},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!0},collapseRows:{default:1},collapsedFields:{},formProps:{default:()=>({})},fields:{},class:{},showLabel:{type:Boolean,default:!0},formBuilderProps:{default:()=>({})},modelValue:{},column:{default:3},viewMode:{type:Boolean},propPrefix:{},formItemProps:{},row:{},inline:{type:Boolean}},emits:["submit","reset","change"],setup(V,{expose:k,emit:S}){const l=V,c=S,{form:_}=l,i=L(_)?_:f(),a=f({...l.defaultValue});g(()=>l.defaultValue,e=>{const{pageNo:o,pageSize:t,...s}=e||{};a.value=s},{deep:!0});const r=f(l.defaultCollapsed),m=B(()=>{var e,o;return(o=(e=l.fields)==null?void 0:e.filter(Boolean))==null?void 0:o.map(({rules:t,required:s,...E})=>E)}),b=B(()=>{var o;if(!l.collapsible||!r.value)return m.value;if((o=l.collapsedFields)!=null&&o.length)return m.value.filter(t=>l.collapsedFields.includes(t.prop));const e=l.collapseRows*l.column;return m.value.slice(0,e)});g(a,e=>{c("change",e)},{deep:!0});function F(){c("submit",{...a.value})}function d(){var e;(e=i==null?void 0:i.value)==null||e.resetFields(),a.value={},c("reset",{})}function w(){r.value=!r.value}return k({searchFormData:a,onSearchReset:d}),(e,o)=>(u(),T("div",{class:y(["pro-search-form",l.class])},[v(n($),C({ref_key:"formRef",ref:i,model:a.value,"label-width":"auto","label-position":"right",name:"advanced_search",class:"pro-search-form__el-form"},e.formProps),{default:p(()=>{var t;return[v(n(A),C({modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=s=>a.value=s),"show-label":l.showLabel,column:l.column,fields:b.value,inline:(t=e.formProps)==null?void 0:t.inline},e.formBuilderProps),{default:p(()=>{var s;return[j("div",{class:y(["action-container",{"action-container--full":b.value.length%l.column===0}])},[x(e.$slots,"actions",G(H({onSearchReset:d})),()=>[l.showActions?(u(),h(q,{key:0,collapsible:l.collapsible,"is-collapsed":r.value,onSubmit:F,onReset:d,onToggleCollapse:w},null,8,["collapsible","is-collapsed"])):P("",!0)]),e.collapsible&&!((s=e.formProps)!=null&&s.inline)?(u(),h(n(z),{key:0,class:"pro-search-form__collapse-btn",link:"",type:"primary",onClick:w},{default:p(()=>[K(M(r.value?"展开":"收起")+" ",1),v(n(D),{class:"collapse-icon"},{default:p(()=>[(u(),h(U(r.value?n(N):n(R))))]),_:1})]),_:1})):P("",!0)],2)]}),_:3},16,["modelValue","show-label","column","fields","inline"])]}),_:3},16,["model"])],2))}});export{ae as _};
