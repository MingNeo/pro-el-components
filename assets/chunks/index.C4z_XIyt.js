import{p as w,h as R}from"./framework.C7SOrqHQ.js";const s={ARRAY:"__arr",NUMBER:"__num"};function y(f={}){const{defaults:u={}}=f;function c(e){if(!e)return{};const t=new URLSearchParams(e),r={};return t.forEach((n,l)=>{const{parsedKey:o,parsedValue:m}=d(l,n);r[o]=m}),r}function d(e,t){let r=e,n=t;return e.endsWith(s.ARRAY)?(r=e.slice(0,-s.ARRAY.length),n=t.split(",")):e.endsWith(s.NUMBER)&&(r=e.slice(0,-s.NUMBER.length),n=Number(t)),{parsedKey:r,parsedValue:n}}function p(e,t){let r=e,n=t;return Array.isArray(t)?(r=`${e}${s.ARRAY}`,n=t.join(",")):typeof t=="number"&&(r=`${e}${s.NUMBER}`,n=String(t)),{key:r,value:String(n)}}function h(e){const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{if(n!=null){const{key:l,value:o}=p(r,n);t.set(l,o)}}),t.toString()}const i=w(c(window.location.search.slice(1)));typeof window<"u"&&window.addEventListener("popstate",()=>{i.value=c(window.location.search.slice(1))});const a=R({get(){return{...u,...i.value}},set(e){const t=h(e),r=`${window.location.pathname}${t?`?${t}`:""}`;window.history.pushState({},"",r),i.value=e}});return{urlData:a,setUrlParam(e,t){a.value={...a.value,[e]:t}},resetUrlData(){a.value={...u}},removeUrlParam(e){const t={...a.value};delete t[e],a.value=t},updateParams(e){a.value={...a.value,...e}}}}export{y as useUrlData};
