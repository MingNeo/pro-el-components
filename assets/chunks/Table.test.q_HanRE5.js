import{m as r}from"./vue-test-utils.esm-bundler.CoRJjSZk.js";import"./base.BdmgHdsK.js";import{g as d}from"./pro-el-components.es.BbdLL6xm.js";import"./el-tag.bXv_BIuD.js";import"./el-select.DH2XqGfa.js";import"./el-scrollbar.DH4X1zpC.js";import"./el-popper.BuQPBkTD.js";import"./el-input.CeBPwPDU.js";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang.DP4JudLu.js";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang.BmRtKC6i.js";import{_ as w}from"./ColumnSetting.vue_vue_type_style_index_0_lang.JbeCHGXW.js";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang.COV-pwh5.js";import{d as C,v as m,i as s,g as t}from"./vi.JYQecGiw.DzZoJzDr.js";import{P as a}from"./framework.C7SOrqHQ.js";import"./index.CacP4YLb.js";import"./el-popover.DB_45-Em.js";import"./el-button.DE4WLPFu.js";import"./index.RKxNzSBd.js";import"./types.CHlFyNtD.js";import"./index.126dwtby.js";import"./isSymbol.C7jn4vLP.js";import"./isObject.C3e4t58V.js";import"./index.CR5w6Vik.js";import"./use-global-config.DIWKgMVJ.js";import"./index.hhTD2MZf.js";import"./index.CQ2QlRVi.js";import"./use-form-item.D8KyPK5_.js";import"./index.Dmme7433.js";import"./use-form-common-props.DDNg6-8l.js";import"./icon.D1paMUUC.js";import"./index.r5W6hzzQ.js";import"./el-dropdown.DSgujdVA.js";import"./index.BxHDt7Km.js";import"./aria.9SHySdGF.js";import"./castArray.ul4E8C5D.js";import"./refs.DxbQ4g28.js";import"./index.BTF4YfDF.js";import"./el-dropdown-item.l0sNRNKZ.js";import"./el-radio.DRdcRBUq.js";import"./el-checkbox.BNYvkwwK.js";import"./index.Bq2Ms4g2.js";import"./arrayPush.CXZMwWBu.js";import"./event.BB_Ol6Sd.js";import"./error.Cq9Fpw4b.js";import"./isEqual.BOWLGTx_.js";import"./scroll.DMEu3ij1.js";import"./cloneDeep.D8Rcep2n.js";import"./index.guaSBbRJ.js";import"./index.DaRhCE74.js";import"./debounce.BwFge-ki.js";/* empty css                          *//* empty css                   */import"./el-overlay.BqfQhs6e.js";import"./vnode.7Q1GY8fL.js";import"./el-progress.vJBajUUT.js";import"./typescript.Bp3YSIOJ.js";import"./el-image-viewer.ROfZEiPQ.js";import"./el-col.ztFTNE-e.js";import"./constants.0YSy3Igo.js";import"./el-row.CpA-NpC_.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-menu-item.4i4sU5qB.js";import"./dayjs.min.Ba62AOpW.js";import"./commonjsHelpers.BosuxZz1.js";import"./index.BEkWwAfS.js";import"./index.Cm6lYq2D.js";import"./index.gDhSDFSO.js";import"./Action.vue_vue_type_script_setup_true_lang.B3dA-KDh.js";import"./helper.AYP33an4.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";C("table 组件",()=>{const c=[{prop:"name",label:"姓名"},{prop:"age",label:"年龄"},{prop:"actions",label:"操作",columnType:"actions",actions:[{text:"编辑",onClick:m.fn()}]}],l=[{name:"张三",age:18},{name:"李四",age:20}];s("应该正确渲染基础表格",async()=>{const o=r(n,{props:{columns:c,data:l}});await a(),await a();const p=o.findAll("thead th");t(p).toHaveLength(3),t(p[0].text()).toBe("姓名"),t(p[1].text()).toBe("年龄");const e=o.findAll("tbody tr");t(e).toHaveLength(2),t(e[0].findAll("td")[0].text()).toBe("张三"),t(e[0].findAll("td")[1].text()).toBe("18")}),s("应该正确处理列设置功能",async()=>{const o=r(n,{props:{columns:c,data:l,columnSetting:!0,tableId:"test-table"}});await a(),await a(),t(o.findComponent(w).exists()).toBe(!0),t(o.findAll("thead th")).toHaveLength(3),await o.vm.handleSaveColumnKeys([{prop:"name",visible:!0},{prop:"age",visible:!1}]),await a(),t(o.findAll("thead th")).toHaveLength(2)}),s("应该正确渲染日期格式",async()=>{const e=r(n,{props:{columns:[{prop:"date",label:"日期",renderAs:"date"}],data:[{date:"2024-03-15"}],format:"YYYY-MM-DD"}});await a(),await a(),t(e.find("td").text()).toBe("2024-03-15")}),s("应该正确渲染文件链接",async()=>{const e=r(n,{props:{columns:[{prop:"file",label:"文件",renderAs:"file"}],data:[{file:[{url:"http://example.com/file.pdf",name:"测试文件"},{url:"http://example.com/file2.pdf",name:"测试文件2"}]}]}});await a(),await a();const i=e.findAll(".el-table__cell a");t(i).toHaveLength(2),t(i[0].attributes("href")).toBe("http://example.com/file.pdf"),t(i[0].text()).toBe("测试文件")}),s("应该正确渲染状态文本",async()=>{const e=r(n,{props:{columns:[{prop:"status",label:"状态",mapping:[{value:1,label:"正常",status:"success"},{value:0,label:"禁用",status:"error"}]}],data:[{status:1},{status:0}]}});await a(),await a();const i=e.findAllComponents(g);t(i).toHaveLength(2),t(i[0].props("status")).toBe("success"),t(i[1].props("status")).toBe("error")}),s("应该正确处理自定义渲染函数",async()=>{const e=r(n,{props:{columns:[{prop:"custom",label:"自定义",customRender:i=>`自定义${i.value}`}],data:[{value:"test"}]}});await a(),await a(),t(e.find("td").text()).toBe("自定义test")}),s("应该正确渲染操作列并处理点击事件",async()=>{var u;const o=m.fn(),e=r(n,{props:{columns:[{prop:"actions",label:"操作",columnType:"actions",actions:[{text:"编辑",onClick:o}]}],data:[{id:1}]}});await a(),await a();const i=(u=e.findComponent(f))==null?void 0:u.find("button");t(i.exists()).toBe(!0),await i.trigger("click"),t(o).toHaveBeenCalled()}),s("应该正确处理分页",async()=>{const o=m.fn(),p=m.fn(),e=r(n,{props:{columns:c,data:l,pagination:{total:100,currentPage:1,pageSize:10,"onUpdate:currentPage":o,"onUpdate:pageSize":p}}});await a(),await a();const i=e.findComponent(d);t(i.exists()).toBe(!0),await i.vm.$emit("update:currentPage",2),t(o).toHaveBeenCalledWith(2),await i.vm.$emit("update:pageSize",20),t(p).toHaveBeenCalledWith(20)}),s("应该正确处理排序",async()=>{const o=m.fn(),e=r(n,{props:{columns:[{prop:"age",label:"年龄",sortable:!0}],data:l,onSortChange:o}});await a(),await a(),await e.findComponent({name:"ElTable"}).vm.$emit("sort-change",{prop:"age",order:"ascending"}),t(o).toHaveBeenCalledWith({prop:"age",order:"ascending"})})});
