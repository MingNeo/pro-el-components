import{i as V}from"./index.l2C8AFQu.js";import"./base.D1hT_OMg.js";import"./el-tooltip.l0sNRNKZ.js";import{E as w}from"./el-popper.DVtARkBh.js";import{E as C}from"./index.dVC2hAAQ.js";import{d as E,p as j,h as B,c as r,o as n,j as t,F as c,t as d,B as y,e as F,G as m,k as u,w as f,n as I,C as S}from"./framework.CCndWvNN.js";const N={class:"rating-matrix w-full p-4 border border-solid border-gray-200 rounded"},O={class:"rating-summary mt-5 pt-4 border-solid border-0 border-t border-gray-200"},M={class:"total-score text-base font-medium text-right text-gray-800"},R={class:"rating-list flex flex-col gap-5"},U={class:"dimension-info flex justify-between mb-1"},z={class:"dimension-name font-medium text-gray-800"},A={class:"dimension-score text-primary font-medium"},D={key:0,class:"dimension-comment text-gray-500 text-sm mt-1"},G={class:"rating-list flex flex-col gap-5"},L={class:"dimension-header flex items-center gap-2 mb-2"},T={class:"dimension-name font-medium text-gray-800"},$={class:"rating-controls flex flex-col gap-3"},q={class:"score-selector flex gap-2"},H=["onClick"],J={class:"rating-summary mt-5 pt-4 border-solid border-0 border-t border-gray-200"},K={class:"total-score text-base font-medium text-right text-gray-800"},te=E({__name:"RatingsField",props:{modelValue:{},viewMode:{type:Boolean},dimensions:{default:()=>[]},maxScore:{}},emits:["update:modelValue","change"],setup(g,{emit:x}){const p=g,_=x,h=p.maxScore||5,o=j(p.modelValue||Object.fromEntries(p.dimensions.map(s=>[s.key,{score:0,comment:""}]))),v=B(()=>{const s=Object.values(o.value).map(i=>i.score);return s.reduce((i,e)=>i+e,0)/s.length});function b(s,l,i){o.value[s]={...o.value[s],[l]:i},_("update:modelValue",o.value),_("change",o.value)}const k=Array.from({length:h+1},(s,l)=>l);return(s,l)=>{const i=S("ElInput");return n(),r(c,null,[l[0]||(l[0]=t("p",null,"自定义组件",-1)),t("div",N,[s.viewMode?(n(),r(c,{key:0},[t("div",O,[t("div",M," 总评分: "+d(v.value.toFixed(1)),1)]),t("div",R,[(n(!0),r(c,null,y(s.dimensions,e=>(n(),r("div",{key:e.key,class:"rating-item border-solid border-0 border-b border-b-gray-100 pb-4"},[t("div",U,[t("div",z,d(e.name),1),t("div",A,d(o.value[e.key].score)+"分 ",1)]),o.value[e.key].comment?(n(),r("div",D,d(o.value[e.key].comment),1)):F("",!0)]))),128))])],64)):(n(),r(c,{key:1},[t("div",G,[(n(!0),r(c,null,y(s.dimensions,e=>(n(),r("div",{key:e.key,class:"rating-item border-solid border-0 border-b border-gray-100 pb-4"},[t("div",L,[t("span",T,d(e.name),1),m(u(w),{content:e.description,placement:"top"},{default:f(()=>[m(u(C),null,{default:f(()=>[m(u(V))]),_:1})]),_:2},1032,["content"])]),t("div",$,[t("div",q,[(n(!0),r(c,null,y(u(k),a=>(n(),r("div",{key:a,class:I(["score-option w-8 h-8 flex items-center justify-center border border-solid border-gray-300 rounded cursor-pointer transition-all",{"bg-primary border-primary text-white":o.value[e.key].score===a,"hover:border-primary hover:text-primary":o.value[e.key].score!==a}]),onClick:P=>b(e.key,"score",a)},d(a),11,H))),128))]),m(i,{modelValue:o.value[e.key].comment,"onUpdate:modelValue":a=>o.value[e.key].comment=a,type:"textarea",rows:2,placeholder:"添加评语（可选）",onInput:a=>b(e.key,"comment",a)},null,8,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),t("div",J,[t("div",K," 总评分: "+d(v.value.toFixed(1)),1)])],64))])],64)}}});export{te as _};
