import{m as r}from"./vue-test-utils.esm-bundler.BNPP31t0.js";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang.BT-Ywz00.js";import{d as s,i as o,g as e,v as n}from"./vi.JYQecGiw.CsLlcVZs.js";import"./framework.igcgEEdr.js";import"./index.BQOwn3WU.js";import"./base.Dwgz6jSd.js";import"./el-button.k3Ms4Xdh.js";import"./icon.C3T6eoYR.js";import"./types.DNi1ojkw.js";import"./index.mDR6Kexr.js";import"./isSymbol.C7jn4vLP.js";import"./isObject.C3e4t58V.js";import"./index.DBJOzW_o.js";import"./use-global-config.CrFx92Tt.js";import"./index.CRCbWsfX.js";import"./index.BjB1lFfg.js";import"./use-form-item.Daeosa58.js";import"./use-form-common-props.BIymRJo1.js";/* empty css                   *//* empty css                    *//* empty css              */import"./index.SQqbOIf2.js";import"./error.Cq9Fpw4b.js";import"./typescript.Bp3YSIOJ.js";import"./cloneDeep.DdLfN6Fq.js";import"./baseClone.p2iRr-IY.js";import"./isEqual.DkZuJHVE.js";import"./arrayPush.CXZMwWBu.js";import"./initCloneObject.BLfUkf_9.js";import"./index.D353ODTN.js";import"./index.BsakEZKL.js";import"./index.Brw29sq5.js";import"./aria.9SHySdGF.js";import"./refs.n9wIXTtR.js";import"./event.BB_Ol6Sd.js";import"./scroll.DxJqq-ED.js";import"./commonjsHelpers.BosuxZz1.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";s("Upload 组件",()=>{o("应该正确渲染",()=>{const t=r(p);e(t.find(".pro-upload").exists()).toBe(!0)}),o("应该显示默认按钮文本",()=>{const t=r(p,{props:{listType:"picture"}});e(t.text()).toContain("上传")}),o("应该支持自定义按钮文本",()=>{const t=r(p,{props:{buttonText:"选择文件"}});e(t.text()).toContain("选择文件")}),o("listType 为 text 时应该显示图标",()=>{const t=r(p,{props:{listType:"text"}});e(t.find(".el-icon").exists()).toBe(!0)}),o("listType 不为 text 时应该显示按钮",()=>{const t=r(p,{props:{listType:"picture"}});e(t.find(".pro-upload_button").exists()).toBe(!0)}),o("应该正确处理预览",async()=>{const t=r(p),i={url:"https://example.com/image.jpg",name:"image.jpg"};await t.vm.handlePictureCardPreview(i),e(t.vm.previewUrl).toBe("https://example.com/image.jpg"),e(t.vm.previewShow).toBe(!0)}),o("应该显示预览对话框",async()=>{const t=r(p);t.vm.previewUrl="https://example.com/image.jpg",t.vm.previewShow=!0,await t.vm.$nextTick(),e(t.find(".pro-upload_preview-dialog").exists()).toBe(!0)}),o("应该在预览对话框中显示图片",async()=>{const t=r(p),i="https://example.com/image.jpg";t.vm.previewUrl=i,t.vm.previewShow=!0,await t.vm.$nextTick(),await new Promise(a=>setTimeout(a,200));const m=t.find(".pro-upload_preview-image");m.exists()&&e(m.attributes("src")).toBe(i)}),o("应该支持自定义 onPreview",()=>{const t=n.fn(),i=r(p,{props:{onPreview:t}});e(i.vm.$attrs.onPreview).toBe(t)}),o("没有自定义 onPreview 时应该使用默认预览方法",()=>{const t=r(p);e(t.vm.$attrs.onPreview).toBeUndefined()}),o("应该正确透传其他属性",()=>{const t=r(p,{props:{accept:"image/*",multiple:!0,limit:5}});e(t.vm.$attrs.accept).toBe("image/*"),e(t.vm.$attrs.multiple).toBe(!0),e(t.vm.$attrs.limit).toBe(5)}),o("预览对话框应该响应 v-model",async()=>{const t=r(p);t.vm.previewShow=!0,await t.vm.$nextTick(),e(t.vm.previewShow).toBe(!0),t.vm.previewShow=!1,await t.vm.$nextTick(),e(t.vm.previewShow).toBe(!1)}),o("应该支持不同的 listType",()=>{["text","picture","picture-card"].forEach(i=>{const m=r(p,{props:{listType:i}});e(m.vm.$attrs.listType).toBe(i)})})});
