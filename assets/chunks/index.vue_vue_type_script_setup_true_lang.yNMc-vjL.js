import{x as k,t as B}from"./pro-el-components.es.BbdLL6xm.js";import{d as K,p as h,h as R,q as _,c as A,o as i,b as f,e as F,a2 as I,k as t,ao as $,ai as D,B as E,w as L,r as j,a1 as q,aj as z,K as T,C as G}from"./framework.C7SOrqHQ.js";const N=K({name:"ProTableSelector",inheritAttrs:!1,__name:"index",props:{showSearchActions:{type:Boolean,default:!0},searchFields:{},searchColumn:{},service:{},data:{},columns:{},idKey:{default:"id"},labelKey:{},modelValue:{},formItemProps:{}},emits:["update:modelValue","change"],setup(p,{emit:v}){const a=p,m=v,g=a.service||(async({pageNo:e,pageSize:s})=>{var o,l;return{total:(o=a.data)==null?void 0:o.length,data:(l=a.data)==null?void 0:l.slice((e-1)*s,e*s)}}),{data:n,search:S,loading:w,pagination:C}=k(g,{defaultPageSize:10}),r=h([]);function b(e){r.value=e,m("update:modelValue",r.value),m("change",r.value)}const c=h(null),y=R(()=>n.value.map(e=>e[a.idKey]));function P(e,s){e?e.forEach(o=>{y.value.includes(o[a.idKey])&&c.value.toggleRowSelection(o,void 0,s)}):c.value.clearSelection()}return _([n,a.modelValue],()=>{P(a.modelValue)}),(e,s)=>{var d;const o=G("search-form"),l=$("loading");return i(),A("div",null,[e.service&&((d=e.searchFields)!=null&&d.length)?(i(),f(o,{key:0,class:"table-selector-search-form",column:e.searchColumn||2,fields:e.searchFields,search:t(S),"show-actions":e.showSearchActions,"form-item-props":e.formItemProps},null,8,["column","fields","search","show-actions","form-item-props"])):F("",!0),I((i(),f(t(B),T({ref_key:"tableRef",ref:c,columns:e.columns,data:t(n),pagination:t(C)},e.$attrs,{onSelectionChange:b}),D({_:2},[E(e.$slots,(H,u)=>({name:u,fn:L(V=>[j(e.$slots,u,q(z(V||{})))])}))]),1040,["columns","data","pagination"])),[[l,t(w)]])])}}});export{N as _};
