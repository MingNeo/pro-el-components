import{Y as V,T as y}from"./pro-el-components.es.D2RWaTV6.js";import{d as D,h as r,q as P,b as C,o as S,ai as k,B as M,w as B,r as x,a1 as A,aj as F,K,k as s}from"./framework.CCndWvNN.js";const _=D({name:"ProModalDetail",__name:"index",props:{title:{},width:{},modelValue:{type:Boolean},defaultValue:{},formData:{},viewMode:{type:Boolean},idKey:{},fields:{},column:{},mode:{},updateService:{type:Function},createService:{type:Function},propPrefix:{},formItemProps:{},footerActions:{}},emits:["update:modelValue","ok","update:formData","formChange","open"],setup(m,{emit:f}){const e=m,a=f,n=r(()=>{var o;return e.mode??(e.viewMode?"detail":((o=e.formData||e.defaultValue)==null?void 0:o[e.idKey||"id"])!==void 0?"edit":"create")}),p=r(()=>typeof e.title=="object"?e.title[n.value]:e.title),u=r(()=>e.viewMode?[]:e.footerActions);P(()=>e.modelValue,o=>o&&a("open"),{deep:!0});const{execute:t,isLoading:c}=V(async(o,d)=>{var i;return await((i=d?e.updateService:e.createService)==null?void 0:i(o))},{immediate:!1});function v(o){a("update:formData",o),a("formChange",o)}async function w(o){e.viewMode||await(t==null?void 0:t(o,n.value==="edit")),a("update:modelValue",!1),a("ok",o)}function h(){a("update:modelValue",!1)}return(o,d)=>(S(),C(s(y),K({"model-value":o.modelValue,"form-data":e.formData,"default-value":e.defaultValue,width:o.width,title:p.value,fields:e.fields,"view-mode":o.viewMode,column:e.column,"prop-prefix":e.propPrefix,"form-item-props":e.formItemProps,"confirm-loading":s(c)},o.$attrs,{"footer-actions":u.value,"onUpdate:formData":v,onOk:w,onCancel:h}),k({_:2},[M(o.$slots,(i,l)=>({name:l,fn:B(g=>[x(o.$slots,l,A(F(g)))])}))]),1040,["model-value","form-data","default-value","width","title","fields","view-mode","column","prop-prefix","form-item-props","confirm-loading","footer-actions"]))}});export{_};
