import"./base.Dwgz6jSd.js";import{E as v}from"./el-button.k3Ms4Xdh.js";import{E as h}from"./el-checkbox.B0vmRW9S.js";/* empty css                     */import{E as C}from"./el-input.DQ30HcuH.js";/* empty css                   *//* empty css              */import{useSecondsCountdown as F}from"./index.B5Qmna9d.js";import{a as d,E as S}from"./index.DbWT0aQr.js";import{E}from"./index.BD-RLF64.js";import{d as B,a7 as N,p as D,c as p,o as f,r as t,G as l,j as a,a as u,w as i,k as s,t as I,n as M}from"./framework.igcgEEdr.js";const G={class:"quick-login__title"},T={key:0},U={class:"quick-login__agreement"},W=B({name:"ProQuickLogin",__name:"index",props:{getCaptcha:{},login:{},countdownDuration:{default:60},errorMessages:{default:()=>({captchaFailed:"获取验证码失败！",loginFailed:"登录失败！"})},className:{default:""}},emits:["success","captchaSent"],setup(V,{emit:w}){const n=V,g=w,r=N({username:"",code:"",remember:!1}),y=D({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),{start:q,formattedTime:c,isCounting:k}=F(n.countdownDuration);async function b(){q();try{await n.getCaptcha(),g("captchaSent")}catch(o){return E.error(`${n.errorMessages.captchaFailed}${o.message}`)}}async function $(){try{await n.login(r),g("success")}catch(o){return E.error(`${n.errorMessages.loginFailed}${o.message}`)}}return(o,e)=>(f(),p("div",{class:M(["pro-quick-login",[n.className]])},[t(o.$slots,"header",{},()=>[a("div",G,[t(o.$slots,"title",{},()=>[e[3]||(e[3]=u(" 登录 "))])])]),l(s(S),{model:r,class:"quick-login__form",rules:y.value,onFinish:$},{default:i(()=>[t(o.$slots,"formHeader"),l(s(d),{prop:"username"},{default:i(()=>[t(o.$slots,"usernameInput",{},()=>[l(s(C),{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=m=>r.username=m),placeholder:"请输入账号"},null,8,["modelValue"])])]),_:3}),l(s(d),{prop:"code"},{default:i(()=>[t(o.$slots,"codeInput",{},()=>[l(s(C),{modelValue:r.code,"onUpdate:modelValue":e[1]||(e[1]=m=>r.code=m),"show-password":"",placeholder:"验证码"},{append:i(()=>[t(o.$slots,"captcha-button",{isCounting:s(k),time:s(c),onGetCaptcha:b},()=>[s(k)?(f(),p("div",T,[a("span",null,I(s(c))+"秒后重发",1)])):(f(),p("div",{key:1,class:"captcha-button",onClick:b},e[4]||(e[4]=[a("span",null,"获取验证码",-1)])))])]),_:3},8,["modelValue"])])]),_:3}),l(s(d),null,{default:i(()=>[t(o.$slots,"submitButton",{},()=>[l(s(v),{disabled:!r.remember,class:"quick-login__submit",type:"primary",onClick:$},{default:i(()=>e[5]||(e[5]=[u(" 登录 ")])),_:1},8,["disabled"])])]),_:3}),t(o.$slots,"agreement",{},()=>[a("div",U,[l(s(h),{modelValue:r.remember,"onUpdate:modelValue":e[2]||(e[2]=m=>r.remember=m)},null,8,["modelValue"]),t(o.$slots,"agreementText",{},()=>[e[6]||(e[6]=u(" 我已阅读并同意 ")),e[7]||(e[7]=a("a",{href:""},"《用户协议》",-1)),e[8]||(e[8]=u(" 和 ")),e[9]||(e[9]=a("a",{href:""},"《隐私政策》",-1))])])]),t(o.$slots,"footer",{},()=>[e[10]||(e[10]=a("div",{class:"quick-login__footer"},[a("a",{href:""},"注册"),a("a",{href:""},"忘记密码")],-1))])]),_:3},8,["model","rules"])],2))}});export{W as _};
