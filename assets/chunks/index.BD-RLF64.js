import{d as $,h as m,c as _,o as g,r as I,G as x,w as E,a2 as q,j as L,N as G,k as t,n as y,a as de,t as Y,a3 as J,T as K,aM as ce,p as N,v as pe,q as fe,b,e as B,H as me,F as ge,Z as ye,P as ve,an as P,aY as Q,ac as O,aZ as R}from"./framework.igcgEEdr.js";import{u as Ce,a as he}from"./index.D353ODTN.js";import{b as W,d as M,_ as X,u as be,w as Te,g as we}from"./base.Dwgz6jSd.js";import{i as T,a as V,d as Se}from"./types.DNi1ojkw.js";import{b as Z,i as Ne,T as U,E as j,c as Be}from"./icon.C3T6eoYR.js";import{m as Ee}from"./typescript.Bp3YSIOJ.js";import{a as ee,q as Me}from"./index.mDR6Kexr.js";import{u as $e}from"./use-global-config.CrFx92Tt.js";import{E as ke}from"./aria.9SHySdGF.js";const ze=W({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:M([String,Object,Array])},offset:{type:M(Array),default:[0,0]},badgeClass:{type:String}}),_e=$({name:"ElBadge"}),Ie=$({..._e,props:ze,setup(n,{expose:a}){const e=n,s=be("badge"),l=m(()=>e.isDot?"":T(e.value)&&T(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`),c=m(()=>{var o,u,v,h,f;return[{backgroundColor:e.color,marginRight:Z(-((u=(o=e.offset)==null?void 0:o[0])!=null?u:0)),marginTop:Z((h=(v=e.offset)==null?void 0:v[1])!=null?h:0)},(f=e.badgeStyle)!=null?f:{}]});return a({content:l}),(o,u)=>(g(),_("div",{class:y(t(s).b())},[I(o.$slots,"default"),x(K,{name:`${t(s).namespace.value}-zoom-in-center`,persisted:""},{default:E(()=>[q(L("sup",{class:y([t(s).e("content"),t(s).em("content",o.type),t(s).is("fixed",!!o.$slots.default),t(s).is("dot",o.isDot),t(s).is("hide-zero",!o.showZero&&e.value===0),o.badgeClass]),style:G(t(c))},[I(o.$slots,"content",{value:t(l)},()=>[de(Y(t(l)),1)])],6),[[J,!o.hidden&&(t(l)||o.isDot||o.$slots.content)]])]),_:3},8,["name"])],2))}});var Le=X(Ie,[["__file","badge.vue"]]);const Oe=Te(Le),p={},se=["success","info","warning","error"],i=Ee({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:ee?document.body:void 0}),xe=W({customClass:{type:String,default:i.customClass},dangerouslyUseHTMLString:{type:Boolean,default:i.dangerouslyUseHTMLString},duration:{type:Number,default:i.duration},icon:{type:Ne,default:i.icon},id:{type:String,default:i.id},message:{type:M([String,Object,Function]),default:i.message},onClose:{type:M(Function),default:i.onClose},showClose:{type:Boolean,default:i.showClose},type:{type:String,values:se,default:i.type},plain:{type:Boolean,default:i.plain},offset:{type:Number,default:i.offset},zIndex:{type:Number,default:i.zIndex},grouping:{type:Boolean,default:i.grouping},repeatNum:{type:Number,default:i.repeatNum}}),De={destroy:()=>!0},d=ce([]),Fe=n=>{const a=d.findIndex(l=>l.id===n),e=d[a];let s;return a>0&&(s=d[a-1]),{current:e,prev:s}},He=n=>{const{prev:a}=Fe(n);return a?a.vm.exposed.bottom.value:0},Ae=(n,a)=>d.findIndex(s=>s.id===n)>0?16:a,Pe=$({name:"ElMessage"}),Re=$({...Pe,props:xe,emits:De,setup(n,{expose:a,emit:e}){const s=n,{Close:l}=Be,c=N(!1),{ns:o,zIndex:u}=$e("message"),{currentZIndex:v,nextZIndex:h}=u,f=N(),w=N(!1),D=N(0);let k;const te=m(()=>s.type?s.type==="error"?"danger":s.type:"info"),ne=m(()=>{const r=s.type;return{[o.bm("icon",r)]:r&&U[r]}}),F=m(()=>s.icon||U[s.type]||""),ae=m(()=>He(s.id)),H=m(()=>Ae(s.id,s.offset)+ae.value),re=m(()=>D.value+H.value),le=m(()=>({top:`${H.value}px`,zIndex:v.value}));function z(){s.duration!==0&&({stop:k}=Me(()=>{S()},s.duration))}function A(){k==null||k()}function S(){w.value=!1,ve(()=>{var r;c.value||((r=s.onClose)==null||r.call(s),e("destroy"))})}function ie({code:r}){r===ke.esc&&S()}return pe(()=>{z(),h(),w.value=!0}),fe(()=>s.repeatNum,()=>{A(),z()}),Ce(document,"keydown",ie),he(f,()=>{D.value=f.value.getBoundingClientRect().height}),a({visible:w,bottom:re,close:S}),(r,Ge)=>(g(),b(K,{name:t(o).b("fade"),onBeforeEnter:ue=>c.value=!0,onBeforeLeave:r.onClose,onAfterLeave:ue=>r.$emit("destroy"),persisted:""},{default:E(()=>[q(L("div",{id:r.id,ref_key:"messageRef",ref:f,class:y([t(o).b(),{[t(o).m(r.type)]:r.type},t(o).is("closable",r.showClose),t(o).is("plain",r.plain),r.customClass]),style:G(t(le)),role:"alert",onMouseenter:A,onMouseleave:z},[r.repeatNum>1?(g(),b(t(Oe),{key:0,value:r.repeatNum,type:t(te),class:y(t(o).e("badge"))},null,8,["value","type","class"])):B("v-if",!0),t(F)?(g(),b(t(j),{key:1,class:y([t(o).e("icon"),t(ne)])},{default:E(()=>[(g(),b(me(t(F))))]),_:1},8,["class"])):B("v-if",!0),I(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(g(),_(ge,{key:1},[B(" Caution here, message could've been compromised, never use user's input as message "),L("p",{class:y(t(o).e("content")),innerHTML:r.message},null,10,["innerHTML"])],2112)):(g(),_("p",{key:0,class:y(t(o).e("content"))},Y(r.message),3))]),r.showClose?(g(),b(t(j),{key:2,class:y(t(o).e("closeBtn")),onClick:ye(S,["stop"])},{default:E(()=>[x(t(l))]),_:1},8,["class","onClick"])):B("v-if",!0)],46,["id"]),[[J,w.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var Ve=X(Re,[["__file","message.vue"]]);let Ze=1;const oe=n=>{const a=!n||P(n)||Q(n)||O(n)?{message:n}:n,e={...i,...a};if(!e.appendTo)e.appendTo=document.body;else if(P(e.appendTo)){let s=document.querySelector(e.appendTo);Se(s)||(s=document.body),e.appendTo=s}return V(p.grouping)&&!e.grouping&&(e.grouping=p.grouping),T(p.duration)&&e.duration===3e3&&(e.duration=p.duration),T(p.offset)&&e.offset===16&&(e.offset=p.offset),V(p.showClose)&&!e.showClose&&(e.showClose=p.showClose),e},Ue=n=>{const a=d.indexOf(n);if(a===-1)return;d.splice(a,1);const{handler:e}=n;e.close()},je=({appendTo:n,...a},e)=>{const s=`message_${Ze++}`,l=a.onClose,c=document.createElement("div"),o={...a,id:s,onClose:()=>{l==null||l(),Ue(f)},onDestroy:()=>{R(null,c)}},u=x(Ve,o,O(o.message)||Q(o.message)?{default:O(o.message)?o.message:()=>o.message}:null);u.appContext=e||C._context,R(u,c),n.appendChild(c.firstElementChild);const v=u.component,f={id:s,vnode:u,vm:v,handler:{close:()=>{v.exposed.close()}},props:u.component.props};return f},C=(n={},a)=>{if(!ee)return{close:()=>{}};const e=oe(n);if(e.grouping&&d.length){const l=d.find(({vnode:c})=>{var o;return((o=c.props)==null?void 0:o.message)===e.message});if(l)return l.props.repeatNum+=1,l.props.type=e.type,l.handler}if(T(p.max)&&d.length>=p.max)return{close:()=>{}};const s=je(e,a);return d.push(s),s.handler};se.forEach(n=>{C[n]=(a={},e)=>{const s=oe(a);return C({...s,type:n},e)}});function qe(n){const a=[...d];for(const e of a)(!n||n===e.props.type)&&e.handler.close()}C.closeAll=qe;C._context=null;const ts=we(C,"$message");export{ts as E};
