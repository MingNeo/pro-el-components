import{q as G}from"./index.l2C8AFQu.js";import{d as V}from"./dayjs.min.Ba62AOpW.js";import"./base.D1hT_OMg.js";import{a as H,E as W}from"./el-checkbox.vp91cqq1.js";/* empty css                          */import{i as K,j as O,c as C,k as z,P as A,l as J,E as Q,m as X,d as Z,n as x,o as ee,b as oe}from"./pro-el-components.es.D2RWaTV6.js";import{E as R}from"./el-input.BSgJ4dcH.js";import"./el-button.Ks_KV28J.js";import"./el-scrollbar.D7CKjqK8.js";import{E as le}from"./el-popper.DVtARkBh.js";import{b as ae,c as re}from"./el-radio.DwTHR0gg.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-tag.eG6nSIS7.js";import"./el-select.DD745kxU.js";import{_ as de}from"./FieldWrapper.vue_vue_type_script_setup_true_lang.BAXXbrC5.js";import{getFormItemCol as I,getRulesForColumn as S,getformItemProps as pe,getFormFieldProps as se,getPlaceholder as ue,renderView as b,getItemName as ne,formatRangeData as fe}from"./helper.tTdJ1HKL.js";import{useFieldWatch as ve}from"./useFieldWatch.CLmNBKe8.js";import{_ as te}from"./Wrapper.vue_vue_type_script_setup_true_lang.C-qljgpV.js";import{d as ce,p as ye,h as m,q as ke,b as s,e as E,o as a,w as i,c as p,r as T,B as g,K as u,G as B,ai as ie,a as U,t as f,k as d,j as we,H as be,W as v,F as y}from"./framework.CCndWvNN.js";const Me={key:0,class:"pro-form-item__label-extra"},Pe={class:"break-all"},_e={key:1,class:"break-all"},Ve={key:3,class:"break-all"},he={key:0,class:"break-all"},Ue={key:0,class:"break-all"},me={key:0,class:"break-all"},Ee={key:0,class:"break-all"},ge={key:0,class:"break-all"},Ye={key:0,class:"break-all"},Fe={key:0,class:"break-all"},De={key:0,class:"break-all"},Ce={key:0,class:"break-all"},Xe=ce({name:"ProFormFields",__name:"index",props:{fields:{default:()=>[]},modelValue:{default:()=>({})},column:{default:3},viewMode:{type:Boolean},propPrefix:{},formItemProps:{},row:{},inline:{type:Boolean},showLabel:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(L,{emit:N}){const c=L,Y=N,l=ye(c.modelValue),$=m(()=>c.fields.filter(r=>typeof(r==null?void 0:r.show)=="function"?r.show(l.value):(r==null?void 0:r.show)??!0));ke(()=>c.modelValue,r=>l.value=r||{},{deep:!0});const{fieldUpdates:q}=ve(c.fields,l),j=m(()=>I(c.column));function n({prop:r,formatChangedValue:M,onChange:e},w,...P){const k=M?M(w,l.value):w;l.value[r]=k;try{e==null||e(k,l,w,...P)}catch(_){console.log("form field onChange error",_)}Y("update:modelValue",fe(l.value,c.fields)),Y("change",l.value)}const F=m(()=>$.value.map(r=>{const{prop:M,label:e,type:w="",required:P,col:k={}}=r;k.span=k.span||I(r.column||c.column,k.span);const _=S(r),o=l.value[M],t=pe(r.formItemProps,c.formItemProps),h=ue(w,e),D=q.value[M]||{};return{...r,...D,required:P,rules:_,fieldProps:{placeholder:h,...se(r,o,l.value),...D.fieldProps},col:k,itemValue:o,itemProps:t}}));return(r,M)=>F.value.length?(a(),s(te,u({key:0,inline:c.inline,gutter:24},c.row,{class:["pro-form-items-builder",{"view-mode":r.viewMode}]}),{default:i(()=>[(a(!0),p(y,null,g(F.value,e=>(a(),s(de,u({key:e.prop,inline:c.inline,ref_for:!0},e.col),{default:i(()=>[B(d(oe),u({class:`pro-form-item ${r.viewMode?"view-mode":""}`,prop:d(ne)(e.prop,c.propPrefix),label:r.showLabel&&!e.labelExtra&&!e.labelTip?e.label:void 0,rules:d(S)(e),ref_for:!0},e.itemProps),ie({default:i(()=>{var w,P,k,_;return[(r.viewMode||e.viewMode)&&e.type==="component"&&e.customRender?T(r.$slots,"fieldView",{key:0,field:e,record:l.value,text:l.value[e.prop]},()=>[we("div",Pe,f(e.customRender(l.value[e.prop],e,l.value)),1)]):(r.viewMode||e.viewMode)&&e.customRender?(a(),p("div",_e,f(e.customRender(l.value[e.prop],e,l.value)),1)):e.type==="component"?(a(),s(be(e.component),u({key:2,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"view-mode":r.viewMode||e.viewMode,"onUpdate:modelValue":o=>n(e,o),onChange:(o,...t)=>n(e,o,...t)},v(e.on||{})),null,16,["model-value","view-mode","onUpdate:modelValue","onChange"])):e.type==="text"?(a(),p("div",Ve,f(e.customRender?e.customRender(l.value[e.prop],e,l.value):l.value[e.prop]),1)):e.type==="select"?(a(),s(d(K),u({key:4,"model-value":l.value[e.prop],"view-mode":r.viewMode||e.viewMode,options:e.options,ref_for:!0},e.fieldProps,{onChange:(o,...t)=>n(e,o,...t)},v(e.on||{})),null,16,["model-value","view-mode","options","onChange"])):e.type==="rate"?(a(),s(d(O),u({key:5,"model-value":l.value[e.prop],disabled:r.viewMode||e.viewMode,ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","disabled","onUpdate:modelValue"])):e.type==="radio"?(a(),p(y,{key:6},[r.viewMode||e.viewMode?(a(),p("div",he,f(d(b)(l.value[e.prop],e)),1)):(a(),s(d(ae),u({key:1,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),{default:i(()=>[(a(!0),p(y,null,g(e.options||[],o=>(a(),s(d(re),u({key:o.value,ref_for:!0},o),{default:i(()=>[U(f(o.label),1)]),_:2},1040))),128))]),_:2},1040,["model-value","onUpdate:modelValue"]))],64)):e.type==="checkbox"?(a(),p(y,{key:7},[r.viewMode||e.viewMode?(a(),p("div",Ue,f(d(b)(l.value[e.prop],e)),1)):(a(),s(d(H),u({key:1,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),{default:i(()=>[(a(!0),p(y,null,g(e.options||[],o=>(a(),s(d(W),u({key:o.value,ref_for:!0},o),{default:i(()=>[U(f(o.label),1)]),_:2},1040))),128))]),_:2},1040,["model-value","onUpdate:modelValue"]))],64)):e.type==="datePicker"?(a(),p(y,{key:8},[r.viewMode||e.viewMode?(a(),p("div",me,f(d(b)(l.value[e.prop],e)),1)):(a(),s(d(C),u({key:1,"model-value":l.value[e.prop]?d(V)(l.value[e.prop]).format(((w=e.fieldProps)==null?void 0:w.valueFormat)||"YYYY-MM-DD"):"",format:((P=e.fieldProps)==null?void 0:P.format)||"YYYY-MM-DD",ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>{var t,h;return n(e,o?(t=e.fieldProps)!=null&&t.valueFormat?d(V)(o).format((h=e.fieldProps)==null?void 0:h.valueFormat):d(V)(o).valueOf():"")}}),null,16,["model-value","format","onUpdate:modelValue"]))],64)):e.type==="rangePicker"?(a(),p(y,{key:9},[r.viewMode||e.viewMode?(a(),p("div",Ee,f(d(b)(l.value[e.prop],e)),1)):(a(),s(d(C),u({key:1,type:"daterange","model-value":l.value[e.prop]?l.value[e.prop].map(o=>{var t;return d(V)(o).format(((t=e.fieldProps)==null?void 0:t.valueFormat)||"YYYY-MM-DD")}):[],format:((k=e.fieldProps)==null?void 0:k.format)||"YYYY-MM-DD","default-time":((_=e.fieldProps)==null?void 0:_.defaultTime)||[d(V)("2000-01-01 00:00:00").toDate(),d(V)("2000-01-01 23:59:59").toDate()],ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)}),null,16,["model-value","format","default-time","onUpdate:modelValue"]))],64)):e.type==="timePicker"?(a(),p(y,{key:10},[r.viewMode||e.viewMode?(a(),p("div",ge,f(d(b)(l.value[e.prop],e)),1)):(a(),s(d(z),u({key:1,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","onUpdate:modelValue"]))],64)):e.type==="cascader"?(a(),s(d(A),u({key:11,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"view-mode":r.viewMode||e.viewMode,"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","view-mode","onUpdate:modelValue"])):e.type==="slider"?(a(),s(d(J),u({key:12,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{disabled:r.viewMode||e.viewMode,"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","disabled","onUpdate:modelValue"])):e.type==="switch"?(a(),s(d(Q),u({key:13,modelValue:l.value[e.prop],"onUpdate:modelValue":o=>l.value[e.prop]=o,disabled:r.viewMode||e.viewMode,ref_for:!0},e.fieldProps,v(e.on||{})),null,16,["modelValue","onUpdate:modelValue","disabled"])):e.type==="treeSelect"?(a(),p(y,{key:14},[r.viewMode||e.viewMode?(a(),p("div",Ye,f(d(b)(l.value[e.prop],e)),1)):(a(),s(d(X),u({key:1,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{onChange:(o,...t)=>n(e,o,...t)},v(e.on||{})),null,16,["model-value","onChange"]))],64)):e.type==="number"?(a(),p(y,{key:15},[r.viewMode||e.viewMode?(a(),p("div",Fe,f(d(b)(l.value[e.prop],e)),1)):(a(),s(d(Z),u({key:1,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","onUpdate:modelValue"]))],64)):e.type==="textarea"?(a(),p(y,{key:16},[r.viewMode||e.viewMode?(a(),p("div",De,f(l.value[e.prop]),1)):(a(),s(d(R),u({key:1,type:"textarea","model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","onUpdate:modelValue"]))],64)):e.type==="colorPicker"?(a(),s(d(x),u({key:17,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{disabled:r.viewMode||e.viewMode,"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","disabled","onUpdate:modelValue"])):e.type==="upload"?(a(),s(d(ee),u({key:18,"file-list":l.value[e.prop],ref_for:!0},e.fieldProps,{disabled:!!(r.viewMode||e.viewMode),"onUpdate:fileList":o=>n(e,o)},v(e.on||{})),null,16,["file-list","disabled","onUpdate:fileList"])):(a(),p(y,{key:19},[r.viewMode||e.viewMode?(a(),p("div",Ce,f(l.value[e.prop]),1)):(a(),s(d(R),u({key:1,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"onUpdate:modelValue":o=>n(e,o)},v(e.on||{})),null,16,["model-value","onUpdate:modelValue"]))],64))]}),_:2},[r.showLabel&&(e.labelExtra||e.labelTip)?{name:"label",fn:i(()=>[U(f(e.label)+" ",1),e.labelExtra?(a(),p("span",Me,f(e.labelExtra),1)):E("",!0),e.labelTip?(a(),s(d(le),{key:1,placement:"top"},{title:i(()=>[U(f(e.labelTip),1)]),default:i(()=>[B(d(G),{class:"label-tip-icon"})]),_:2},1024)):E("",!0)]),key:"0"}:void 0]),1040,["class","prop","label","rules"])]),_:2},1040,["inline"]))),128)),T(r.$slots,"default",{colSpan:j.value})]),_:3},16,["inline","class"])):E("",!0)}});export{Xe as _};
