import{m as r}from"./vue-test-utils.esm-bundler.BNPP31t0.js";import"./base.Dwgz6jSd.js";/* empty css                     */import{_ as n}from"./index.vue_vue_type_script_setup_true_lang.Cm45yPGm.js";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang.B7tWRN4N.js";import{d as u,i,g as o,v as c}from"./vi.JYQecGiw.CsLlcVZs.js";import{E as f}from"./index.DbWT0aQr.js";import{P as s,p as w}from"./framework.igcgEEdr.js";import"./index.BQOwn3WU.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-popper.CZJRST1P.js";import"./index.mDR6Kexr.js";import"./isSymbol.C7jn4vLP.js";import"./isObject.C3e4t58V.js";import"./types.DNi1ojkw.js";import"./index.BI4o4ewH.js";import"./arrayPush.CXZMwWBu.js";import"./index.Brw29sq5.js";import"./aria.9SHySdGF.js";import"./index.D353ODTN.js";import"./use-form-common-props.BIymRJo1.js";import"./index.CRCbWsfX.js";import"./FieldWrapper.vue_vue_type_script_setup_true_lang.BQIeAx6E.js";/* empty css               */import"./typescript.Bp3YSIOJ.js";import"./constants.0YSy3Igo.js";import"./helper.DcuHLwUz.js";import"./dayjs.min.Ba62AOpW.js";import"./commonjsHelpers.BosuxZz1.js";import"./useFieldWatch.CAezyHFE.js";import"./Wrapper.vue_vue_type_script_setup_true_lang.CPkOFA02.js";/* empty css               *//* empty css              *//* empty css              */import"./index.vue_vue_type_script_setup_true_lang.CgsMylzL.js";import"./el-input.DQ30HcuH.js";import"./icon.C3T6eoYR.js";import"./event.BB_Ol6Sd.js";import"./index.8K3Om35h.js";import"./use-form-item.Daeosa58.js";import"./index.BndPLsPe.js";import"./error.Cq9Fpw4b.js";import"./el-button.k3Ms4Xdh.js";import"./index.DBJOzW_o.js";import"./use-global-config.CrFx92Tt.js";import"./index.BjB1lFfg.js";import"./el-scrollbar.HZhNcw01.js";/* empty css                        *//* empty css                  */import"./el-tag.BDcJ6G_i.js";import"./el-select.D9tonctu.js";import"./castArray.nshRf-Q-.js";import"./isEqual.DkZuJHVE.js";import"./scroll.DxJqq-ED.js";import"./debounce.BwFge-ki.js";import"./el-checkbox.B0vmRW9S.js";/* empty css                    */import"./index.vue_vue_type_script_setup_true_lang.BT-Ywz00.js";/* empty css                   *//* empty css              */import"./index.SQqbOIf2.js";import"./cloneDeep.DdLfN6Fq.js";import"./baseClone.p2iRr-IY.js";import"./initCloneObject.BLfUkf_9.js";import"./index.BsakEZKL.js";import"./refs.n9wIXTtR.js";/* empty css                    *//* empty css                   */import"./index.vue_vue_type_script_setup_true_lang.32sqq2C1.js";/* empty css                          *//* empty css                 */import"./index.RVi9Xofb.js";import"./index.vue_vue_type_script_setup_true_lang.BVOXUtzn.js";/* empty css                          *//* empty css                   *//* empty css              *//* empty css                *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css                       *//* empty css              *//* empty css              */import"./index.vue_vue_type_script_setup_true_lang.D98OUrhU.js";import"./index.vue_vue_type_script_setup_true_lang.CdsKtYT4.js";/* empty css              *//* empty css              *//* empty css              */import"./el-table-column.BBssXNKa.js";/* empty css                                                      *//* empty css              */import"./index.CemNZkGQ.js";import"./index.CaFP4xeD.js";import"./baseUniq.CpJglj-j.js";import"./buttons.vue_vue_type_script_setup_true_lang.BvWP4u-7.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";u("proSearchForm 组件",()=>{const a=[{prop:"name",label:"名称",type:"input"},{prop:"status",label:"状态",type:"select",options:[{label:"启用",value:1},{label:"禁用",value:0}]},{prop:"date",label:"日期",type:"datePicker"}];i("应该正确渲染搜索表单",()=>{const t=r(p,{props:{fields:a}});o(t.findComponent(f).exists()).toBe(!0),o(t.findComponent(n).exists()).toBe(!0)}),i("应该正确渲染所有字段",async()=>{const t=r(p,{props:{fields:a}});await s();const e=t.findComponent(n);o(e.props("fields")).toHaveLength(3)}),i("应该正确触发提交事件",async()=>{const t=c.fn(),e=r(p,{props:{fields:a,defaultValue:{name:"测试"},onSubmit:t}});await s();const m=e.findAll(".el-button").find(l=>l.text().includes("搜索"));await(m==null?void 0:m.trigger("click")),o(t).toHaveBeenCalledWith({name:"测试"})}),i("应该正确触发重置事件",async()=>{const t=c.fn(),e=r(p,{props:{fields:a,defaultValue:{name:"测试"},onReset:t}});await s();const m=e.findAll(".el-button").find(l=>l.text().includes("重置"));await(m==null?void 0:m.trigger("click")),o(t).toHaveBeenCalledWith({})}),i("应该正确处理表单数据变化",async()=>{const t=c.fn(),e=r(p,{props:{fields:a,defaultValue:{},onChange:t}});await s(),e.vm.searchFormData={name:"新值"},await s(),o(t).toHaveBeenCalled()}),i("应该正确设置默认值",async()=>{const t={name:"默认名称",status:1},e=r(p,{props:{fields:a,defaultValue:t}});await s(),o(e.vm.searchFormData).toEqual(t)}),i("应该正确处理折叠功能",async()=>{const t=r(p,{props:{fields:a,collapsible:!0,defaultCollapsed:!0,collapseRows:1,column:2}});await s(),o(t.vm.showFields).toHaveLength(2);const e=t.findAll(".el-button").find(m=>m.text().includes("展开"));await(e==null?void 0:e.trigger("click")),await s(),o(t.vm.showFields).toHaveLength(3)}),i("应该支持自定义折叠字段",async()=>{const t=r(p,{props:{fields:a,collapsible:!0,defaultCollapsed:!0,collapsedFields:["name","status"]}});await s(),o(t.vm.showFields).toHaveLength(2),o(t.vm.showFields.map(e=>e.prop)).toEqual(["name","status"])}),i("应该支持自定义列数",()=>{const e=r(p,{props:{fields:a,column:4}}).findComponent(n);o(e.props("column")).toBe(4)}),i("应该支持隐藏操作按钮",async()=>{const t=r(p,{props:{fields:a,showActions:!1}});await s();const e=t.findAll(".el-button");o(e.filter(m=>m.text().includes("查询")||m.text().includes("重置"))).toHaveLength(0)}),i("应该支持自定义表单属性",()=>{const e=r(p,{props:{fields:a,formProps:{inline:!0,labelWidth:"100px"}}}).findComponent(f);o(e.props("inline")).toBe(!0),o(e.props("labelWidth")).toBe("100px")}),i("应该支持自定义操作插槽",async()=>{const t=r(p,{props:{fields:a},slots:{actions:'<button class="custom-action">自定义操作</button>'}});await s(),o(t.find(".custom-action").exists()).toBe(!0)}),i("应该正确重置表单",async()=>{const t=r(p,{props:{fields:a,defaultValue:{name:"测试"}}});await s(),t.vm.searchFormData={name:"新值",status:1},await s(),t.vm.onSearchReset(),await s(),o(t.vm.searchFormData).toEqual({})}),i("应该正确处理 form ref",()=>{const t=w();r(p,{props:{fields:a,form:t}}),o(t.value).toBeDefined()}),i("应该响应默认值更新",async()=>{const t=r(p,{props:{fields:a,defaultValue:{name:"初始值"}}});await s(),o(t.vm.searchFormData).toEqual({name:"初始值"}),await t.setProps({defaultValue:{name:"新值",status:1}}),await s(),o(t.vm.searchFormData).toEqual({name:"新值",status:1})}),i("应该正确过滤 rules 和 required 属性",()=>{r(p,{props:{fields:[{prop:"name",label:"名称",type:"input",required:!0,rules:[{required:!0,message:"必填"}]},{prop:"email",label:"邮箱",type:"input",rules:[{type:"email",message:"邮箱格式"}]}]}}).findComponent(n).props("fields").forEach(d=>{o(d.rules).toBeUndefined(),o(d.required).toBeUndefined()})}),i("应该支持隐藏标签",()=>{const e=r(p,{props:{fields:a,showLabel:!1}}).findComponent(n);o(e.props("showLabel")).toBe(!1)}),i("应该正确暴露方法",()=>{const t=r(p,{props:{fields:a}});o(t.vm.searchFormData).toBeDefined(),o(t.vm.onSearchReset).toBeDefined(),o(typeof t.vm.onSearchReset).toBe("function")})});
