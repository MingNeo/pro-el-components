import{m as s}from"./vue-test-utils.esm-bundler.BNPP31t0.js";import"./base.Dwgz6jSd.js";import{a as c,E as i}from"./el-checkbox.B0vmRW9S.js";/* empty css                          */import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.BVOXUtzn.js";import{d as u,i as p,g as t,v as m}from"./vi.JYQecGiw.CsLlcVZs.js";import{P as r}from"./framework.igcgEEdr.js";import"./index.mDR6Kexr.js";import"./isSymbol.C7jn4vLP.js";import"./isObject.C3e4t58V.js";import"./index.BI4o4ewH.js";import"./arrayPush.CXZMwWBu.js";import"./event.BB_Ol6Sd.js";import"./types.DNi1ojkw.js";import"./use-form-common-props.BIymRJo1.js";import"./use-form-item.Daeosa58.js";import"./error.Cq9Fpw4b.js";import"./isEqual.DkZuJHVE.js";import"./index.DBJOzW_o.js";import"./commonjsHelpers.BosuxZz1.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";u("proCheckbox 组件",()=>{const l=[{label:"选项1",value:1},{label:"选项2",value:2},{label:"选项3",value:3}];p("应该正确渲染复选框组",()=>{const e=s(a,{props:{options:l}});t(e.findComponent(c).exists()).toBe(!0)}),p("应该正确渲染所有选项",async()=>{const e=s(a,{props:{options:l}});await r();const o=e.findAllComponents(i);t(o).toHaveLength(3),t(o[0].props("label")).toBe("选项1"),t(o[0].props("value")).toBe(1)}),p("应该正确处理双向绑定",async()=>{const e=s(a,{props:{options:l,modelValue:[1,2]}});await r();const o=e.findComponent(c);t(o.props("modelValue")).toEqual([1,2]),await e.setProps({modelValue:[2,3]}),t(o.props("modelValue")).toEqual([2,3])}),p("应该正确处理禁用选项",async()=>{const o=s(a,{props:{options:[{label:"选项1",value:1,disabled:!1},{label:"选项2",value:2,disabled:!0},{label:"选项3",value:3,disabled:!1}]}});await r();const n=o.findAllComponents(i);t(n[1].props("disabled")).toBe(!0)}),p("应该在查看模式下显示文本",async()=>{const e=s(a,{props:{options:l,modelValue:[1,2],viewMode:!0}});await r(),t(e.findComponent(c).exists()).toBe(!1),t(e.text()).toBe("选项1, 选项2")}),p("应该支持自定义查看模式分隔符",async()=>{const e=s(a,{props:{options:l,modelValue:[1,2],viewMode:!0,viewModeSeparator:" | "}});await r(),t(e.text()).toBe("选项1 | 选项2")}),p("应该正确处理空值",async()=>{const e=s(a,{props:{options:l,viewMode:!0}});await r(),t(e.text()).toBe("-")}),p("应该正确加载远程数据",async()=>{const e=m.fn().mockResolvedValue(l),o=s(a,{props:{service:e}});await new Promise(d=>setTimeout(d,10)),t(e).toHaveBeenCalled(),await r();const n=o.findAllComponents(i);t(n).toHaveLength(3)}),p("应该支持自定义字段名",async()=>{const o=s(a,{props:{options:[{name:"选项1",id:1},{name:"选项2",id:2}],optionNames:{label:"name",value:"id"}}});await r();const n=o.findAllComponents(i);t(n[0].props("label")).toBe("选项1"),t(n[0].props("value")).toBe(1)}),p("应该正确处理加载错误",async()=>{const e=m.fn().mockRejectedValue(new Error("加载失败")),o=m.spyOn(console,"warn").mockImplementation(()=>{});s(a,{props:{service:e}}),await new Promise(n=>setTimeout(n,10)),t(o).toHaveBeenCalled(),o.mockRestore()}),p("应该响应选项更新",async()=>{const e=s(a,{props:{options:l}});await r();let o=e.findAllComponents(i);t(o).toHaveLength(3);const n=[{label:"新选项1",value:4},{label:"新选项2",value:5}];await e.setProps({options:n}),o=e.findAllComponents(i),t(o).toHaveLength(2),t(o[0].props("label")).toBe("新选项1")}),p("应该正确处理空数组值",()=>{const o=s(a,{props:{options:l,modelValue:[]}}).findComponent(c);t(o.props("modelValue")).toEqual([])}),p("应该正确透传属性到 ElCheckboxGroup",()=>{const o=s(a,{props:{options:l,size:"large",disabled:!0}}).findComponent(c);console.log(o),t(o.vm.size).toBe("large"),t(o.vm.disabled).toBeDefined()}),p("应该支持自定义禁用字段名",async()=>{const o=s(a,{props:{options:[{label:"选项1",value:1,isDisabled:!0},{label:"选项2",value:2,isDisabled:!1}],optionNames:{label:"label",value:"value",disabled:"isDisabled"}}});await r();const n=o.findAllComponents(i);t(n[0].props("disabled")).toBe(!0),t(n[1].props("disabled")).toBe(!1)})});
