import{m as p}from"./vue-test-utils.esm-bundler.BNPP31t0.js";import"./base.Dwgz6jSd.js";import"./el-table-column.BBssXNKa.js";import"./el-tag.BDcJ6G_i.js";import"./el-select.D9tonctu.js";import"./el-scrollbar.HZhNcw01.js";import"./el-popper.CZJRST1P.js";import"./el-input.DQ30HcuH.js";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang.CR4Q-k9N.js";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang.CWXAaeVB.js";import{_ as g}from"./ColumnSetting.vue_vue_type_script_setup_true_lang.BO9cYbPa.js";/* empty css                                                      */import{_ as n}from"./index.vue_vue_type_script_setup_true_lang.CRYnw7sj.js";import{d as w,v as m,i as s,g as t}from"./vi.JYQecGiw.CsLlcVZs.js";import{E as C}from"./index.DYDoBdSP.js";import{P as a}from"./framework.igcgEEdr.js";import"./index.BI4o4ewH.js";import"./index.mDR6Kexr.js";import"./isSymbol.C7jn4vLP.js";import"./isObject.C3e4t58V.js";import"./arrayPush.CXZMwWBu.js";import"./isEqual.DkZuJHVE.js";import"./icon.C3T6eoYR.js";import"./types.DNi1ojkw.js";import"./index.BQOwn3WU.js";import"./use-form-common-props.BIymRJo1.js";import"./error.Cq9Fpw4b.js";import"./castArray.nshRf-Q-.js";import"./index.BjB1lFfg.js";import"./index.D353ODTN.js";import"./index.BndPLsPe.js";import"./use-form-item.Daeosa58.js";import"./aria.9SHySdGF.js";import"./event.BB_Ol6Sd.js";import"./scroll.DxJqq-ED.js";import"./debounce.BwFge-ki.js";import"./index.Brw29sq5.js";import"./index.CRCbWsfX.js";import"./typescript.Bp3YSIOJ.js";import"./index.8K3Om35h.js";import"./el-button.k3Ms4Xdh.js";import"./index.DBJOzW_o.js";import"./use-global-config.CrFx92Tt.js";/* empty css                    *//* empty css              *//* empty css                   */import"./Action.vue_vue_type_script_setup_true_lang.maaIIJkR.js";import"./index.CKIxfO9Z.js";import"./refs.n9wIXTtR.js";/* empty css              */import"./el-checkbox.B0vmRW9S.js";import"./helper.AYP33an4.js";import"./index.WNI6fmhU.js";import"./index.BTYb9I48.js";import"./dayjs.min.Ba62AOpW.js";import"./commonjsHelpers.BosuxZz1.js";import"./el-tooltip.l0sNRNKZ.js";/* empty css              *//* empty css              */import"./index.vue_vue_type_script_setup_true_lang.DgUHcPJC.js";/* empty css                          *//* empty css                 *//* empty css                          *//* empty css                   *//* empty css              *//* empty css                     *//* empty css                *//* empty css              *//* empty css                   *//* empty css              *//* empty css                        *//* empty css                  *//* empty css                    *//* empty css               *//* empty css               *//* empty css              *//* empty css                       *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";import"./initCloneObject.BLfUkf_9.js";w("table 组件",()=>{const c=[{prop:"name",label:"姓名"},{prop:"age",label:"年龄"},{prop:"actions",label:"操作",columnType:"actions",actions:[{text:"编辑",onClick:m.fn()}]}],l=[{name:"张三",age:18},{name:"李四",age:20}];s("应该正确渲染基础表格",async()=>{const o=p(n,{props:{columns:c,data:l}});await a(),await a();const r=o.findAll("thead th");t(r).toHaveLength(3),t(r[0].text()).toBe("姓名"),t(r[1].text()).toBe("年龄");const e=o.findAll("tbody tr");t(e).toHaveLength(2),t(e[0].findAll("td")[0].text()).toBe("张三"),t(e[0].findAll("td")[1].text()).toBe("18")}),s("应该正确处理列设置功能",async()=>{const o=p(n,{props:{columns:c,data:l,columnSetting:!0,tableId:"test-table"}});await a(),await a(),t(o.findComponent(g).exists()).toBe(!0),t(o.findAll("thead th")).toHaveLength(3),await o.vm.handleSaveColumnKeys([{prop:"name",visible:!0},{prop:"age",visible:!1}]),await a(),t(o.findAll("thead th")).toHaveLength(2)}),s("应该正确渲染日期格式",async()=>{const e=p(n,{props:{columns:[{prop:"date",label:"日期",renderAs:"date"}],data:[{date:"2024-03-15"}],format:"YYYY-MM-DD"}});await a(),await a(),t(e.find("td").text()).toBe("2024-03-15")}),s("应该正确渲染文件链接",async()=>{const e=p(n,{props:{columns:[{prop:"file",label:"文件",renderAs:"file"}],data:[{file:[{url:"http://example.com/file.pdf",name:"测试文件"},{url:"http://example.com/file2.pdf",name:"测试文件2"}]}]}});await a(),await a();const i=e.findAll(".el-table__cell a");t(i).toHaveLength(2),t(i[0].attributes("href")).toBe("http://example.com/file.pdf"),t(i[0].text()).toBe("测试文件")}),s("应该正确渲染状态文本",async()=>{const e=p(n,{props:{columns:[{prop:"status",label:"状态",renderAs:"enum",fieldProps:{options:[{value:1,label:"正常",status:"success"},{value:0,label:"禁用",status:"error"}]}}],data:[{status:1},{status:0}]}});await a(),await a();const i=e.findAllComponents(f);t(i).toHaveLength(2),t(i[0].props("status")).toBe("success"),t(i[1].props("status")).toBe("error")}),s("应该正确处理自定义渲染函数",async()=>{const e=p(n,{props:{columns:[{prop:"custom",label:"自定义",customRender:i=>`自定义${i.value}`}],data:[{value:"test"}]}});await a(),await a(),t(e.find("td").text()).toBe("自定义test")}),s("应该正确渲染操作列并处理点击事件",async()=>{var u;const o=m.fn(),e=p(n,{props:{columns:[{prop:"actions",label:"操作",columnType:"actions",actions:[{text:"编辑",onClick:o}]}],data:[{id:1}]}});await a(),await a();const i=(u=e.findComponent(d))==null?void 0:u.find("button");t(i.exists()).toBe(!0),await i.trigger("click"),t(o).toHaveBeenCalled()}),s("应该正确处理分页",async()=>{const o=m.fn(),r=m.fn(),e=p(n,{props:{columns:c,data:l,pagination:{total:100,currentPage:1,pageSize:10,"onUpdate:currentPage":o,"onUpdate:pageSize":r}}});await a(),await a();const i=e.findComponent(C);t(i.exists()).toBe(!0),await i.vm.$emit("update:currentPage",2),t(o).toHaveBeenCalledWith(2),await i.vm.$emit("update:pageSize",20),t(r).toHaveBeenCalledWith(20)}),s("应该正确处理排序",async()=>{const o=m.fn(),e=p(n,{props:{columns:[{prop:"age",label:"年龄",sortable:!0}],data:l,onSortChange:o}});await a(),await a(),await e.findComponent({name:"ElTable"}).vm.$emit("sort-change",{prop:"age",order:"ascending"}),t(o).toHaveBeenCalledWith({prop:"age",order:"ascending"})})});
