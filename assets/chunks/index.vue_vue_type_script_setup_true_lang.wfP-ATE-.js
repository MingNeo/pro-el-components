import{c as P,_ as Me,a as ge,d as ae,h as ye,w as De}from"./base.D1hT_OMg.js";import{E as Fe}from"./el-menu-item._RQlHeQG.js";import"./el-tooltip.l0sNRNKZ.js";import{E as we}from"./el-popper.DVtARkBh.js";import{a as Ve}from"./index.DT7TJvLG.js";import{b as te,h as qe,r as pe,E as Oe}from"./index.dVC2hAAQ.js";import{j as Ke,A as Ge,F as He}from"./index.l2C8AFQu.js";import{b as ne}from"./index.BESs4zff.js";import{E}from"./aria.9SHySdGF.js";import{d as B,b as Q,o as _,w as z,r as D,K as Ne,k as C,T as Ue,h as f,L as le,p as S,a8 as Ie,q as oe,V as fe,a5 as Ce,v as xe,Y as $e,al as I,a2 as Pe,a3 as Ye,F as q,ap as K,a6 as Be,aq as Ze,s as Je,P as Qe,a7 as Xe,c as A,j as X,n as ue,a as he,t as se,G as et,B as ke}from"./framework.CCndWvNN.js";import{T as tt}from"./index.r5W6hzzQ.js";import{i as J}from"./icon.ZlYHZ6bL.js";import{t as re}from"./error.Cq9Fpw4b.js";import{c as ze,d as Se}from"./types.BG7Bq31m.js";import{l as Ee}from"./index.B1pLMPru.js";import{C as nt}from"./index.yFO58wlI.js";import{m as ot}from"./typescript.Bp3YSIOJ.js";import{f as st}from"./vnode.BEnbcVWi.js";let at=class{constructor(t,s){this.parent=t,this.domNode=s,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,s=>{s.addEventListener("keydown",n=>{let u=!1;switch(n.code){case E.down:{this.gotoSubIndex(this.subIndex+1),u=!0;break}case E.up:{this.gotoSubIndex(this.subIndex-1),u=!0;break}case E.tab:{ne(t,"mouseleave");break}case E.enter:case E.numpadEnter:case E.space:{u=!0,n.currentTarget.click();break}}return u&&(n.preventDefault(),n.stopPropagation()),!1})})}},lt=class{constructor(t,s){this.domNode=t,this.submenu=null,this.submenu=null,this.init(s)}init(t){this.domNode.setAttribute("tabindex","0");const s=this.domNode.querySelector(`.${t}-menu`);s&&(this.submenu=new at(this,s)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let s=!1;switch(t.code){case E.down:{ne(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),s=!0;break}case E.up:{ne(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),s=!0;break}case E.tab:{ne(t.currentTarget,"mouseleave");break}case E.enter:case E.numpadEnter:case E.space:{s=!0,t.currentTarget.click();break}}s&&t.preventDefault()})}},ut=class{constructor(t,s){this.domNode=t,this.init(s)}init(t){const s=this.domNode.childNodes;Array.from(s).forEach(n=>{n.nodeType===1&&new lt(n,t)})}};const rt=B({name:"ElMenuCollapseTransition"}),it=B({...rt,setup(e){const t=P("menu"),s={onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,u){te(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",u()},onAfterEnter(n){pe(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),qe(n,t.m("collapse"))?(pe(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),te(n,t.m("collapse"))):(te(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),pe(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){te(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}};return(n,u)=>(_(),Q(Ue,Ne({mode:"out-in"},C(s)),{default:z(()=>[D(n.$slots,"default")]),_:3},16))}});var ct=Me(it,[["__file","menu-collapse-transition.vue"]]);function Ae(e,t){const s=f(()=>{let u=e.parent;const c=[t.value];for(;u.type.name!=="ElMenu";)u.props.index&&c.unshift(u.props.index),u=u.parent;return c});return{parentMenu:f(()=>{let u=e.parent;for(;u&&!["ElMenu","ElSubMenu"].includes(u.type.name);)u=u.parent;return u}),indexPath:s}}function dt(e){return f(()=>{const s=e.backgroundColor;return s?new tt(s).shade(20).toString():""})}const Le=(e,t)=>{const s=P("menu");return f(()=>s.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":dt(e).value||"","active-color":e.activeTextColor||"",level:`${t}`}))},pt=ge({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:J},expandOpenIcon:{type:J},collapseCloseIcon:{type:J},collapseOpenIcon:{type:J}}),me="ElSubMenu";var _e=B({name:me,props:pt,setup(e,{slots:t,expose:s}){const n=Ce(),{indexPath:u,parentMenu:c}=Ae(n,f(()=>e.index)),p=P("menu"),g=P("sub-menu"),r=le("rootMenu");r||re(me,"can not inject root menu");const d=le(`subMenu:${c.value.uid}`);d||re(me,"can not inject sub menu");const b=S({}),y=S({});let h;const k=S(!1),w=S(),G=S(),L=f(()=>j.value==="horizontal"&&W.value?"bottom-start":"right-start"),F=f(()=>j.value==="horizontal"&&W.value||j.value==="vertical"&&!r.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?O.value?e.expandOpenIcon:e.expandCloseIcon:Ke:e.collapseCloseIcon&&e.collapseOpenIcon?O.value?e.collapseOpenIcon:e.collapseCloseIcon:Ge),W=f(()=>d.level===0),H=f(()=>{const l=e.teleported;return ze(l)?W.value:l}),ie=f(()=>r.props.collapse?`${p.namespace.value}-zoom-in-left`:`${p.namespace.value}-zoom-in-top`),ee=f(()=>j.value==="horizontal"&&W.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),O=f(()=>r.openedMenus.includes(e.index)),V=f(()=>[...Object.values(b.value),...Object.values(y.value)].some(({active:l})=>l)),j=f(()=>r.props.mode),ce=f(()=>r.props.persistent),R=Ie({index:e.index,indexPath:u,active:V}),U=Le(r.props,d.level+1),Y=f(()=>{var l;return(l=e.popperOffset)!=null?l:r.props.popperOffset}),Z=f(()=>{var l;return(l=e.popperClass)!=null?l:r.props.popperClass}),de=f(()=>{var l;return(l=e.showTimeout)!=null?l:r.props.showTimeout}),o=f(()=>{var l;return(l=e.hideTimeout)!=null?l:r.props.hideTimeout}),a=()=>{var l,x,M;return(M=(x=(l=G.value)==null?void 0:l.popperRef)==null?void 0:x.popperInstanceRef)==null?void 0:M.destroy()},i=l=>{l||a()},m=()=>{r.props.menuTrigger==="hover"&&r.props.mode==="horizontal"||r.props.collapse&&r.props.mode==="vertical"||e.disabled||r.handleSubMenuClick({index:e.index,indexPath:u.value,active:V.value})},v=(l,x=de.value)=>{var M;if(l.type!=="focus"){if(r.props.menuTrigger==="click"&&r.props.mode==="horizontal"||!r.props.collapse&&r.props.mode==="vertical"||e.disabled){d.mouseInChild.value=!0;return}d.mouseInChild.value=!0,h==null||h(),{stop:h}=Ee(()=>{r.openMenu(e.index,u.value)},x),H.value&&((M=c.value.vnode.el)==null||M.dispatchEvent(new MouseEvent("mouseenter")))}},T=(l=!1)=>{var x;if(r.props.menuTrigger==="click"&&r.props.mode==="horizontal"||!r.props.collapse&&r.props.mode==="vertical"){d.mouseInChild.value=!1;return}h==null||h(),d.mouseInChild.value=!1,{stop:h}=Ee(()=>!k.value&&r.closeMenu(e.index,u.value),o.value),H.value&&l&&((x=d.handleMouseleave)==null||x.call(d,!0))};oe(()=>r.props.collapse,l=>i(!!l));{const l=M=>{y.value[M.index]=M},x=M=>{delete y.value[M.index]};fe(`subMenu:${n.uid}`,{addSubMenu:l,removeSubMenu:x,handleMouseleave:T,mouseInChild:k,level:d.level+1})}return s({opened:O}),xe(()=>{r.addSubMenu(R),d.addSubMenu(R)}),$e(()=>{d.removeSubMenu(R),r.removeSubMenu(R)}),()=>{var l;const x=[(l=t.title)==null?void 0:l.call(t),I(Oe,{class:g.e("icon-arrow"),style:{transform:O.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&r.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>K(F.value)?I(n.appContext.components[F.value]):I(F.value)})],M=r.isMenuPopup?I(we,{ref:G,visible:O.value,effect:"light",pure:!0,offset:Y.value,showArrow:!1,persistent:ce.value,popperClass:Z.value,placement:L.value,teleported:H.value,fallbackPlacements:ee.value,transition:ie.value,gpuAcceleration:!1},{content:()=>{var N;return I("div",{class:[p.m(j.value),p.m("popup-container"),Z.value],onMouseenter:$=>v($,100),onMouseleave:()=>T(!0),onFocus:$=>v($,100)},[I("ul",{class:[p.b(),p.m("popup"),p.m(`popup-${L.value}`)],style:U.value},[(N=t.default)==null?void 0:N.call(t)])])},default:()=>I("div",{class:g.e("title"),onClick:m},x)}):I(q,{},[I("div",{class:g.e("title"),ref:w,onClick:m},x),I(Fe,{},{default:()=>{var N;return Pe(I("ul",{role:"menu",class:[p.b(),p.m("inline")],style:U.value},[(N=t.default)==null?void 0:N.call(t)]),[[Ye,O.value]])}})]);return I("li",{class:[g.b(),g.is("active",V.value),g.is("opened",O.value),g.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:O.value,onMouseenter:v,onMouseleave:()=>T(),onFocus:v},[M])}}});const mt=ge({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:ae(Array),default:()=>ot([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:J,default:()=>He},popperEffect:{type:ae(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),ve=e=>Be(e)&&e.every(t=>K(t)),vt={close:(e,t)=>K(e)&&ve(t),open:(e,t)=>K(e)&&ve(t),select:(e,t,s,n)=>K(e)&&ve(t)&&Ze(s)&&(ze(n)||n instanceof Promise)};var ft=B({name:"ElMenu",props:mt,emits:vt,setup(e,{emit:t,slots:s,expose:n}){const u=Ce(),c=u.appContext.config.globalProperties.$router,p=S(),g=P("menu"),r=P("sub-menu"),d=S(-1),b=S(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),y=S(e.defaultActive),h=S({}),k=S({}),w=f(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),G=()=>{const o=y.value&&h.value[y.value];if(!o||e.mode==="horizontal"||e.collapse)return;o.indexPath.forEach(i=>{const m=k.value[i];m&&L(i,m.indexPath)})},L=(o,a)=>{b.value.includes(o)||(e.uniqueOpened&&(b.value=b.value.filter(i=>a.includes(i))),b.value.push(o),t("open",o,a))},F=o=>{const a=b.value.indexOf(o);a!==-1&&b.value.splice(a,1)},W=(o,a)=>{F(o),t("close",o,a)},H=({index:o,indexPath:a})=>{b.value.includes(o)?W(o,a):L(o,a)},ie=o=>{(e.mode==="horizontal"||e.collapse)&&(b.value=[]);const{index:a,indexPath:i}=o;if(!(Se(a)||Se(i)))if(e.router&&c){const m=o.route||a,v=c.push(m).then(T=>(T||(y.value=a),T));t("select",a,i,{index:a,indexPath:i,route:m},v)}else y.value=a,t("select",a,i,{index:a,indexPath:i})},ee=o=>{var a;const i=h.value,m=i[o]||y.value&&i[y.value]||i[e.defaultActive];y.value=(a=m==null?void 0:m.index)!=null?a:o},O=o=>{const a=getComputedStyle(o),i=Number.parseInt(a.marginLeft,10),m=Number.parseInt(a.marginRight,10);return o.offsetWidth+i+m||0},V=()=>{var o,a;if(!p.value)return-1;const i=Array.from((a=(o=p.value)==null?void 0:o.childNodes)!=null?a:[]).filter($=>$.nodeName!=="#text"||$.nodeValue),m=64,v=getComputedStyle(p.value),T=Number.parseInt(v.paddingLeft,10),l=Number.parseInt(v.paddingRight,10),x=p.value.clientWidth-T-l;let M=0,N=0;return i.forEach(($,Re)=>{$.nodeName!=="#comment"&&(M+=O($),M<=x-m&&(N=Re+1))}),N===i.length?-1:N},j=o=>k.value[o].indexPath,ce=(o,a=33.34)=>{let i;return()=>{i&&clearTimeout(i),i=setTimeout(()=>{o()},a)}};let R=!0;const U=()=>{if(d.value===V())return;const o=()=>{d.value=-1,Qe(()=>{d.value=V()})};R?o():ce(o)(),R=!1};oe(()=>e.defaultActive,o=>{h.value[o]||(y.value=""),ee(o)}),oe(()=>e.collapse,o=>{o&&(b.value=[])}),oe(h.value,G);let Y;Je(()=>{e.mode==="horizontal"&&e.ellipsis?Y=Ve(p,U).stop:Y==null||Y()});const Z=S(!1);{const o=v=>{k.value[v.index]=v},a=v=>{delete k.value[v.index]};fe("rootMenu",Ie({props:e,openedMenus:b,items:h,subMenus:k,activeIndex:y,isMenuPopup:w,addMenuItem:v=>{h.value[v.index]=v},removeMenuItem:v=>{delete h.value[v.index]},addSubMenu:o,removeSubMenu:a,openMenu:L,closeMenu:W,handleMenuItemClick:ie,handleSubMenuClick:H})),fe(`subMenu:${u.uid}`,{addSubMenu:o,removeSubMenu:a,mouseInChild:Z,level:0})}xe(()=>{e.mode==="horizontal"&&new ut(u.vnode.el,g.namespace.value)}),n({open:a=>{const{indexPath:i}=k.value[a];i.forEach(m=>L(m,i))},close:F,updateActiveIndex:ee,handleResize:U});const de=Le(e,0);return()=>{var o,a;let i=(a=(o=s.default)==null?void 0:o.call(s))!=null?a:[];const m=[];if(e.mode==="horizontal"&&p.value){const l=st(i),x=d.value===-1?l:l.slice(0,d.value),M=d.value===-1?[]:l.slice(d.value);M!=null&&M.length&&e.ellipsis&&(i=x,m.push(I(_e,{index:"sub-menu-more",class:r.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>I(Oe,{class:r.e("icon-more")},{default:()=>I(e.ellipsisIcon)}),default:()=>M})))}const v=e.closeOnClickOutside?[[nt,()=>{b.value.length&&(Z.value||(b.value.forEach(l=>t("close",l,j(l))),b.value=[]))}]]:[],T=Pe(I("ul",{key:String(e.collapse),role:"menubar",ref:p,style:de.value,class:{[g.b()]:!0,[g.m(e.mode)]:!0,[g.m("collapse")]:e.collapse}},[...i,...m]),v);return e.collapseTransition&&e.mode==="vertical"?I(ct,()=>T):T}}});const ht=ge({index:{type:ae([String,null]),default:null},route:{type:ae([String,Object])},disabled:Boolean}),bt={click:e=>K(e.index)&&Be(e.indexPath)},be="ElMenuItem",Mt=B({name:be}),gt=B({...Mt,props:ht,emits:bt,setup(e,{expose:t,emit:s}){const n=e,u=Ce(),c=le("rootMenu"),p=P("menu"),g=P("menu-item");c||re(be,"can not inject root menu");const{parentMenu:r,indexPath:d}=Ae(u,Xe(n,"index")),b=le(`subMenu:${r.value.uid}`);b||re(be,"can not inject sub menu");const y=f(()=>n.index===c.activeIndex),h=Ie({index:n.index,indexPath:d,active:y}),k=()=>{n.disabled||(c.handleMenuItemClick({index:n.index,indexPath:d.value,route:n.route}),s("click",h))};return xe(()=>{b.addSubMenu(h),c.addMenuItem(h)}),$e(()=>{b.removeSubMenu(h),c.removeMenuItem(h)}),t({parentMenu:r,rootMenu:c,active:y,nsMenu:p,nsMenuItem:g,handleClick:k}),(w,G)=>(_(),A("li",{class:ue([C(g).b(),C(g).is("active",C(y)),C(g).is("disabled",w.disabled)]),role:"menuitem",tabindex:"-1",onClick:k},[C(r).type.name==="ElMenu"&&C(c).props.collapse&&w.$slots.title?(_(),Q(C(we),{key:0,effect:C(c).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:C(c).props.persistent},{content:z(()=>[D(w.$slots,"title")]),default:z(()=>[X("div",{class:ue(C(p).be("tooltip","trigger"))},[D(w.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(_(),A(q,{key:1},[D(w.$slots,"default"),D(w.$slots,"title")],64))],2))}});var We=Me(gt,[["__file","menu-item.vue"]]);const yt={title:String},It=B({name:"ElMenuItemGroup"}),Ct=B({...It,props:yt,setup(e){const t=P("menu-item-group");return(s,n)=>(_(),A("li",{class:ue(C(t).b())},[X("div",{class:ue(C(t).e("title"))},[s.$slots.title?D(s.$slots,"title",{key:1}):(_(),A(q,{key:0},[he(se(s.title),1)],64))],2),X("ul",null,[D(s.$slots,"default")])],2))}});var je=Me(Ct,[["__file","menu-item-group.vue"]]);const xt=De(ft,{MenuItem:We,MenuItemGroup:je,SubMenu:_e}),Te=ye(We);ye(je);const _t=ye(_e),kt={class:"pro-sidebar-container"},St={class:"sidebar-menu-container"},Ut=B({name:"ProSideBar",__name:"index",props:{menus:{},selectedKey:{},openKeys:{},collapsed:{type:Boolean}},setup(e){const t=e;return(s,n)=>(_(),A("div",kt,[X("div",St,[et(C(xt),Ne({"default-active":t.selectedKey,"default-openeds":t.openKeys,class:"sidebar-menu",collapse:t.collapsed},s.$attrs),{default:z(()=>[(_(!0),A(q,null,ke(t.menus,u=>(_(),A(q,null,[u.children?(_(),Q(C(_t),{key:`sub-menu-${u.key}`,index:u.key},{title:z(()=>[he(se(u.title),1)]),default:z(()=>[(_(!0),A(q,null,ke(u.children,c=>(_(),Q(C(Te),{key:c.key,onClick:p=>c.path&&s.$router.push(c.path)},{default:z(()=>[he(se(c.title),1)]),_:2},1032,["onClick"]))),128))]),_:2},1032,["index"])):(_(),Q(C(Te),{key:u.key,onClick:c=>u.path&&s.$router.push(u.path)},{default:z(()=>[X("span",null,se(u.title),1)]),_:2},1032,["onClick"]))],64))),256))]),_:1},16,["default-active","default-openeds","collapse"])])]))}});export{Ut as _};
