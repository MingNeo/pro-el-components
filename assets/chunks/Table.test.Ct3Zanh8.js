import{m as r}from"./vue-test-utils.esm-bundler.CXEWdIcj.js";import"./base.D1hT_OMg.js";import{e as d}from"./pro-el-components.es.D2RWaTV6.js";import"./el-tag.eG6nSIS7.js";import"./el-select.DD745kxU.js";import"./el-scrollbar.D7CKjqK8.js";import"./el-popper.DVtARkBh.js";import"./el-input.BSgJ4dcH.js";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang.BXShka89.js";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang.CTfkoHpl.js";import{_ as w}from"./ColumnSetting.vue_vue_type_style_index_0_lang.BwUqYujD.js";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang.B9swXG1q.js";import{d as C,v as m,i as s,g as t}from"./vi.JYQecGiw.CwfDdTVD.js";import{P as a}from"./framework.CCndWvNN.js";import"./el-popover.D2JF-F-v.js";import"./el-button.Ks_KV28J.js";import"./index.dVC2hAAQ.js";import"./types.BG7Bq31m.js";import"./index.B1pLMPru.js";import"./isSymbol.C7jn4vLP.js";import"./isObject.C3e4t58V.js";import"./index.CmxAuiKz.js";import"./use-global-config.Cy85fLye.js";import"./index.CQNcN25s.js";import"./index.BTWm3S8P.js";import"./use-form-item.Br6EJJ4d.js";import"./index.DKuONPA3.js";import"./use-form-common-props.CD1z-U6Z.js";import"./index.l2C8AFQu.js";import"./icon.ZlYHZ6bL.js";import"./index.r5W6hzzQ.js";import"./el-dropdown.BOifsY6J.js";import"./index.DT7TJvLG.js";import"./aria.9SHySdGF.js";import"./castArray.nOJHwnz6.js";import"./refs.B6nQtqsB.js";import"./index.BESs4zff.js";import"./el-dropdown-item.l0sNRNKZ.js";import"./el-radio.DwTHR0gg.js";import"./el-checkbox.vp91cqq1.js";import"./index.BerH9hGA.js";import"./arrayPush.CXZMwWBu.js";import"./event.BB_Ol6Sd.js";import"./error.Cq9Fpw4b.js";import"./isEqual.BFy4LUG1.js";import"./scroll.I75wR7Fj.js";import"./cloneDeep.CIaHHukw.js";import"./index.yFO58wlI.js";import"./index.DCylGgGu.js";import"./debounce.BwFge-ki.js";/* empty css                          *//* empty css                   */import"./el-overlay.BCS05DOt.js";import"./vnode.BEnbcVWi.js";import"./el-progress.BRIRdYmT.js";import"./typescript.Bp3YSIOJ.js";import"./el-image-viewer.Dja78u7m.js";import"./el-col.CFugVZsV.js";import"./constants.0YSy3Igo.js";import"./el-row.CHA5sZ-H.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-menu-item._RQlHeQG.js";import"./dayjs.min.Ba62AOpW.js";import"./commonjsHelpers.BosuxZz1.js";import"./index.BxCfNOki.js";import"./index.CQyIUMkD.js";import"./index.BSzUxMWT.js";import"./Action.vue_vue_type_script_setup_true_lang.Dpx7dNUG.js";import"./helper.AYP33an4.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";C("table 组件",()=>{const c=[{prop:"name",label:"姓名"},{prop:"age",label:"年龄"},{prop:"actions",label:"操作",columnType:"actions",actions:[{text:"编辑",onClick:m.fn()}]}],l=[{name:"张三",age:18},{name:"李四",age:20}];s("应该正确渲染基础表格",async()=>{const o=r(n,{props:{columns:c,data:l}});await a(),await a();const p=o.findAll("thead th");t(p).toHaveLength(3),t(p[0].text()).toBe("姓名"),t(p[1].text()).toBe("年龄");const e=o.findAll("tbody tr");t(e).toHaveLength(2),t(e[0].findAll("td")[0].text()).toBe("张三"),t(e[0].findAll("td")[1].text()).toBe("18")}),s("应该正确处理列设置功能",async()=>{const o=r(n,{props:{columns:c,data:l,columnSetting:!0,tableId:"test-table"}});await a(),await a(),t(o.findComponent(w).exists()).toBe(!0),t(o.findAll("thead th")).toHaveLength(3),await o.vm.handleSaveColumnKeys([{prop:"name",visible:!0},{prop:"age",visible:!1}]),await a(),t(o.findAll("thead th")).toHaveLength(2)}),s("应该正确渲染日期格式",async()=>{const e=r(n,{props:{columns:[{prop:"date",label:"日期",renderAs:"date"}],data:[{date:"2024-03-15"}],format:"YYYY-MM-DD"}});await a(),await a(),t(e.find("td").text()).toBe("2024-03-15")}),s("应该正确渲染文件链接",async()=>{const e=r(n,{props:{columns:[{prop:"file",label:"文件",renderAs:"file"}],data:[{file:[{url:"http://example.com/file.pdf",name:"测试文件"},{url:"http://example.com/file2.pdf",name:"测试文件2"}]}]}});await a(),await a();const i=e.findAll(".el-table__cell a");t(i).toHaveLength(2),t(i[0].attributes("href")).toBe("http://example.com/file.pdf"),t(i[0].text()).toBe("测试文件")}),s("应该正确渲染状态文本",async()=>{const e=r(n,{props:{columns:[{prop:"status",label:"状态",mapping:[{value:1,label:"正常",status:"success"},{value:0,label:"禁用",status:"error"}]}],data:[{status:1},{status:0}]}});await a(),await a();const i=e.findAllComponents(g);t(i).toHaveLength(2),t(i[0].props("status")).toBe("success"),t(i[1].props("status")).toBe("error")}),s("应该正确处理自定义渲染函数",async()=>{const e=r(n,{props:{columns:[{prop:"custom",label:"自定义",customRender:i=>`自定义${i.value}`}],data:[{value:"test"}]}});await a(),await a(),t(e.find("td").text()).toBe("自定义test")}),s("应该正确渲染操作列并处理点击事件",async()=>{var u;const o=m.fn(),e=r(n,{props:{columns:[{prop:"actions",label:"操作",columnType:"actions",actions:[{text:"编辑",onClick:o}]}],data:[{id:1}]}});await a(),await a();const i=(u=e.findComponent(f))==null?void 0:u.find("button");t(i.exists()).toBe(!0),await i.trigger("click"),t(o).toHaveBeenCalled()}),s("应该正确处理分页",async()=>{const o=m.fn(),p=m.fn(),e=r(n,{props:{columns:c,data:l,pagination:{total:100,currentPage:1,pageSize:10,"onUpdate:currentPage":o,"onUpdate:pageSize":p}}});await a(),await a();const i=e.findComponent(d);t(i.exists()).toBe(!0),await i.vm.$emit("update:currentPage",2),t(o).toHaveBeenCalledWith(2),await i.vm.$emit("update:pageSize",20),t(p).toHaveBeenCalledWith(20)}),s("应该正确处理排序",async()=>{const o=m.fn(),e=r(n,{props:{columns:[{prop:"age",label:"年龄",sortable:!0}],data:l,onSortChange:o}});await a(),await a(),await e.findComponent({name:"ElTable"}).vm.$emit("sort-change",{prop:"age",order:"ascending"}),t(o).toHaveBeenCalledWith({prop:"age",order:"ascending"})})});
