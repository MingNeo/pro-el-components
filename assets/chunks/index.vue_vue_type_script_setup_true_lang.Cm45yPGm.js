import{q as D}from"./index.BQOwn3WU.js";import"./base.Dwgz6jSd.js";/* empty css                     */import"./el-tooltip.l0sNRNKZ.js";import{E as H}from"./el-popper.CZJRST1P.js";import{_ as W}from"./FieldWrapper.vue_vue_type_script_setup_true_lang.BQIeAx6E.js";import{getFormItemCol as F,getRulesForColumn as C,getformItemProps as z,getFormFieldProps as G,getPlaceholder as K,getItemName as j,formatRangeData as A}from"./helper.DcuHLwUz.js";import{useFieldWatch as J}from"./useFieldWatch.CAezyHFE.js";import{_ as O}from"./Wrapper.vue_vue_type_script_setup_true_lang.CPkOFA02.js";/* empty css              *//* empty css              */import{a as Q}from"./index.DbWT0aQr.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.CgsMylzL.js";import"./el-button.k3Ms4Xdh.js";/* empty css                    */import"./el-scrollbar.HZhNcw01.js";/* empty css                   *//* empty css                          */import"./el-input.DQ30HcuH.js";import"./el-tag.BDcJ6G_i.js";import"./el-checkbox.B0vmRW9S.js";/* empty css                 *//* empty css                          *//* empty css                   *//* empty css              *//* empty css                *//* empty css              *//* empty css              *//* empty css                   *//* empty css              *//* empty css              *//* empty css                       *//* empty css              *//* empty css              */import"./el-select.D9tonctu.js";/* empty css              *//* empty css              *//* empty css              */import"./dayjs.min.Ba62AOpW.js";import"./el-table-column.BBssXNKa.js";/* empty css                                                      *//* empty css              *//* empty css                    *//* empty css              */import{d as Y,p as Z,h,q as ee,b as u,e as y,o as s,K as w,w as d,c as _,r as oe,F as le,B as ae,n as re,G as E,k as m,a9 as te,a as I,t as c,H as pe,W as R}from"./framework.igcgEEdr.js";const se={key:0,class:"pro-form-fields_item__label-extra"},ne={key:0,class:"break-all"},ie={key:1,class:"pro-form-field_content"},oo=Y({name:"ProFormFields",__name:"index",props:{fields:{default:()=>[]},modelValue:{default:()=>({})},column:{default:3},viewMode:{type:Boolean},propPrefix:{},formItemProps:{},row:{},inline:{type:Boolean},showLabel:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(T,{emit:x}){const r=T,b=x,l=Z(r.modelValue),B=h(()=>r.fields.filter(o=>typeof(o==null?void 0:o.show)=="function"?o.show(l.value):(o==null?void 0:o.show)??!0));ee(()=>r.modelValue,o=>l.value=o||{},{deep:!0});const{fieldUpdates:U}=J(r.fields,l),S=h(()=>F(r.column));function $(o="text"){return{text:"input",datePicker:"date",timePicker:"dateTime",rangePicker:"dateRange",colorPicker:"color",upload:"file"}[o||""]||o}function P({prop:o,formatChangedValue:t},e){const a=t?t(e,l.value):e;l.value={...l.value,[o]:a},b("update:modelValue",A(l.value,r.fields))}function g({prop:o,formatChangedValue:t,onChange:e,on:a},p,...n){const f=t?t(p,l.value):p;l.value={...l.value,[o]:f};const i=e||(a==null?void 0:a.change);i==null||i(f,l,p,...n),b("change",l.value)}const k=h(()=>B.value.map(o=>{const{prop:t,label:e,type:a="",required:p,col:n={},viewMode:f,options:i}=o,q=r.viewMode||f;n.span=n.span||F(o.column||r.column,n.span);const L=C(o),V=l.value[t],N=z(o.formItemProps,r.formItemProps),M=K(a,e),v=U[t]||{};return{...o,...v,required:p,rules:L,fieldProps:{...!q&&M?{placeholder:M}:{},...G(o,V,l.value),...v.options||i?{options:v.options||i}:{},...v.fieldProps},col:n,itemValue:V,itemProps:N}}));return(o,t)=>k.value.length?(s(),u(O,w({key:0,inline:r.inline},r.row,{class:["pro-form-fields",{"view-mode":o.viewMode}]}),{default:d(()=>[(s(!0),_(le,null,ae(k.value,e=>(s(),u(W,{key:e.prop,inline:r.inline,class:re(e.class),col:e.col},{default:d(()=>[E(m(Q),w({class:`pro-form-fields_item ${o.viewMode?"view-mode":""}`,prop:m(j)(e.prop,r.propPrefix),label:o.showLabel&&!e.labelExtra&&!e.labelTip?e.label:void 0,rules:m(C)(e),ref_for:!0},e.itemProps),te({default:d(()=>[(o.viewMode||e.viewMode)&&e.customRender?(s(),_("div",ne,c(e.customRender(l.value[e.prop],e,l.value)),1)):e.type==="text"?(s(),_("div",ie,c(e.customRender?e.customRender(l.value[e.prop],e,l.value):l.value[e.prop]),1)):e.type==="component"?(s(),u(pe(e.component),w({key:2,"model-value":l.value[e.prop],ref_for:!0},e.fieldProps,{"view-mode":o.viewMode||e.viewMode,"onUpdate:modelValue":a=>P(e,a),onChange:(a,...p)=>g(e,a,...p)},R(e.on||{})),null,16,["model-value","view-mode","onUpdate:modelValue","onChange"])):(s(),u(m(X),w({key:3,"with-form-item":!1,"model-value":l.value[e.prop],"field-type":$(e.type),"field-props":e.fieldProps,"view-mode":o.viewMode||e.viewMode,"onUpdate:modelValue":a=>P(e,a),onChange:(a,...p)=>g(e,a,...p)},R(e.on||{})),null,16,["model-value","field-type","field-props","view-mode","onUpdate:modelValue","onChange"]))]),_:2},[o.showLabel&&(e.labelExtra||e.labelTip)?{name:"label",fn:d(()=>[I(c(e.label)+" ",1),e.labelExtra?(s(),_("span",se,c(e.labelExtra),1)):y("",!0),e.labelTip?(s(),u(m(H),{key:1,placement:"top"},{title:d(()=>[I(c(e.labelTip),1)]),default:d(()=>[E(m(D),{class:"label-tip-icon"})]),_:2},1024)):y("",!0)]),key:"0"}:void 0]),1040,["class","prop","label","rules"])]),_:2},1032,["inline","class","col"]))),128)),oe(o.$slots,"default",{colSpan:S.value})]),_:3},16,["inline","class"])):y("",!0)}});export{oo as _};
