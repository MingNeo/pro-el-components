import{j as N,k as R}from"./index.l2C8AFQu.js";import"./base.D1hT_OMg.js";import{E as z}from"./el-button.Ks_KV28J.js";import{p as j,a as q}from"./pro-el-components.es.D2RWaTV6.js";import{_ as A}from"./buttons.vue_vue_type_script_setup_true_lang.CxNTCLCp.js";import{E as D}from"./index.dVC2hAAQ.js";import{d as I,ab as L,p as f,q as g,h as B,c as T,o as u,G as v,w as p,k as n,K as y,j as $,r as x,b as h,e as C,a1 as G,aj as H,a as K,t as M,H as U,n as P}from"./framework.CCndWvNN.js";const ee=I({name:"ProSearchForm",inheritAttrs:!1,__name:"index",props:{defaultValue:{default:()=>({})},showActions:{type:Boolean,default:!0},form:{},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!0},collapseRows:{default:1},collapsedFields:{},formProps:{default:()=>({})},fields:{},class:{},showLabel:{type:Boolean,default:!0},formBuilderProps:{default:()=>({})},modelValue:{},column:{default:3},viewMode:{type:Boolean},propPrefix:{},formItemProps:{},row:{},inline:{type:Boolean}},emits:["submit","reset","change"],setup(V,{expose:k,emit:S}){const l=V,c=S,{form:b}=l,i=L(b)?b:f(),o=f({...l.defaultValue});g(()=>l.defaultValue,e=>{const{pageNo:a,pageSize:t,...s}=e||{};o.value=s},{deep:!0});const r=f(l.defaultCollapsed),d=B(()=>{var e,a;return(a=(e=l.fields)==null?void 0:e.filter(Boolean))==null?void 0:a.map(({rules:t,required:s,...E})=>E)}),_=B(()=>{var a;if(!l.collapsible||!r.value)return d.value;if((a=l.collapsedFields)!=null&&a.length)return d.value.filter(t=>l.collapsedFields.includes(t.prop));const e=l.collapseRows*l.column;return d.value.slice(0,e)});g(o,e=>{c("change",e)},{deep:!0});function F(){c("submit",{...o.value})}function m(){var e;(e=i==null?void 0:i.value)==null||e.resetFields(),o.value={},c("reset",{})}function w(){r.value=!r.value}return k({searchFormData:o,onSearchReset:m}),(e,a)=>(u(),T("div",{class:P(["pro-search-form",l.class])},[v(n(q),y({ref_key:"formRef",ref:i,model:o.value,"label-width":"auto","label-position":"right",name:"advanced_search",class:"pro-search-form__el-form"},e.formProps),{default:p(()=>{var t;return[v(n(j),y({modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value=s),"show-label":l.showLabel,column:l.column,fields:_.value,inline:(t=e.formProps)==null?void 0:t.inline},e.formBuilderProps),{default:p(()=>{var s;return[$("div",{class:P(["action-container",{"action-container--full":_.value.length%l.column===0}])},[x(e.$slots,"actions",G(H({onSearchReset:m})),()=>[l.showActions?(u(),h(A,{key:0,collapsible:l.collapsible,"is-collapsed":r.value,onSubmit:F,onReset:m,onToggleCollapse:w},null,8,["collapsible","is-collapsed"])):C("",!0)]),e.collapsible&&!((s=e.formProps)!=null&&s.inline)?(u(),h(n(z),{key:0,class:"pro-search-form__collapse-btn",link:"",type:"primary",onClick:w},{default:p(()=>[K(M(r.value?"展开":"收起")+" ",1),v(n(D),{class:"collapse-icon"},{default:p(()=>[(u(),h(U(r.value?n(N):n(R))))]),_:1})]),_:1})):C("",!0)],2)]}),_:3},16,["modelValue","show-label","column","fields","inline"])]}),_:3},16,["model"])],2))}});export{ee as _};
