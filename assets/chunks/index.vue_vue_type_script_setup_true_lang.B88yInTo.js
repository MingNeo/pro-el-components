import"./base.D1hT_OMg.js";import{a as h,E as V}from"./el-select.DD745kxU.js";import"./el-tag.eG6nSIS7.js";import"./el-scrollbar.D7CKjqK8.js";import"./el-popper.DVtARkBh.js";import{d as g,p as d,q as k,s as B,h as S,b as v,r as n,o as u,ai as $,B as f,w as p,a1 as E,aj as M,c as P,k as c,F as T,e as C,a as b,t as y,K as j}from"./framework.CCndWvNN.js";const O=g({name:"ProSelect",__name:"index",props:{service:{},optionNames:{default:()=>({label:"label",value:"value"})},options:{},searchable:{type:Boolean},viewMode:{type:Boolean},emptyText:{default:"暂无数据"},viewModeSeparator:{default:", "},modelValue:{},multiple:{type:Boolean}},setup(w){const a=w,r=d(!1),t=d(a.options||[]);k(()=>a.options,e=>t.value=e||[]);async function N(e){if(a.service){r.value=!0;try{const o=await a.service(e);t.value=o}catch(o){console.warn(o)}r.value=!1}}B(()=>N());const m=S(()=>{var e,o;return a.modelValue!==void 0?a.multiple!==void 0&&a.multiple!==!1?a.modelValue.map(l=>{var s;return((s=t.value.find(i=>i[a.optionNames.value]===l))==null?void 0:s[a.optionNames.label])||l}).join(a.viewModeSeparator):((o=(e=t.value)==null?void 0:e.find(l=>l[a.optionNames.value]===a.modelValue))==null?void 0:o[a.optionNames.label])||a.modelValue:"--"});return(e,o)=>e.viewMode?n(e.$slots,"view",{key:1,content:m.value},()=>[b(y(m.value),1)]):(u(),v(c(V),j({key:0,loading:r.value,filterable:!1,"model-value":e.modelValue,multiple:e.multiple},e.$attrs),$({empty:p(()=>[r.value?C("",!0):n(e.$slots,"empty",{key:0},()=>[b(y(e.emptyText),1)])]),default:p(()=>[n(e.$slots,"default",{},()=>[(u(!0),P(T,null,f(t.value,l=>(u(),v(c(h),{key:l[e.optionNames.value],label:l[e.optionNames.label],value:l[e.optionNames.value],disabled:l[e.optionNames.disabled||"disabled"]},null,8,["label","value","disabled"]))),128))])]),_:2},[f(e.$slots,(l,s)=>({name:s,fn:p(i=>[n(e.$slots,s,E(M(i||{})))])}))]),1040,["loading","model-value","multiple"]))}});export{O as _};
