import{useSecondsCountdown as r}from"./index.B5Qmna9d.js";import{d as v,b as c,a as B,i as n,g as e,v as s}from"./vi.JYQecGiw.CsLlcVZs.js";import"./framework.igcgEEdr.js";import"./commonjsHelpers.BosuxZz1.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";v("useSecondsCountdown",()=>{c(()=>{s.useFakeTimers()}),B(()=>{s.restoreAllMocks()}),n("应该正确初始化倒计时",()=>{const{current:a,isCounting:t,formattedTime:o}=r(60);e(a.value).toBe(60),e(t.value).toBe(!1),e(o.value).toBe("60")}),n("应该正确开始倒计时",()=>{const{start:a,current:t,isCounting:o}=r(10);a(),e(o.value).toBe(!0),e(t.value).toBe(10)}),n("倒计时应该每秒递减",()=>{const{start:a,current:t}=r(5);a(),e(t.value).toBe(5),s.advanceTimersByTime(1e3),e(t.value).toBe(4),s.advanceTimersByTime(1e3),e(t.value).toBe(3),s.advanceTimersByTime(1e3),e(t.value).toBe(2)}),n("倒计时到0时应该停止",()=>{const{start:a,current:t,isCounting:o}=r(3);a(),e(o.value).toBe(!0),s.advanceTimersByTime(3e3),e(t.value).toBe(0),e(o.value).toBe(!1)}),n("应该支持手动停止倒计时",()=>{const{start:a,stop:t,current:o,isCounting:u}=r(10);a(),e(u.value).toBe(!0),e(o.value).toBe(10),s.advanceTimersByTime(3e3),e(o.value).toBe(7),t(),e(u.value).toBe(!1),e(o.value).toBe(0)}),n("倒计时结束时应该调用回调函数",()=>{const a=s.fn(),{start:t}=r(2,{callback:a});t(),s.advanceTimersByTime(2e3),e(a).toHaveBeenCalled()}),n("应该正确格式化时间",()=>{const{formattedTime:a,start:t}=r(65);e(a.value).toBe("65"),t(),s.advanceTimersByTime(1e4),e(a.value).toBe("55")}),n("应该为单数字补零",()=>{const{formattedTime:a,start:t}=r(9);e(a.value).toBe("09"),t(),s.advanceTimersByTime(1e3),e(a.value).toBe("08")}),n("应该支持重复开始倒计时",()=>{const{start:a,current:t}=r(5,{duration:10});a(),s.advanceTimersByTime(30),e(t.value).toBe(2),a(),e(t.value).toBe(5),s.advanceTimersByTime(50),e(t.value).toBe(0)}),n("停止时应该清理计时器",()=>{const{start:a,stop:t,current:o}=r(10);a(),s.advanceTimersByTime(3e3),e(o.value).toBe(7),t(),e(o.value).toBe(0),s.advanceTimersByTime(5e3),e(o.value).toBe(0)}),n("当值变为0时应该自动停止",()=>{const{start:a,current:t,isCounting:o}=r(1);a(),e(o.value).toBe(!0),s.advanceTimersByTime(1e3),e(t.value).toBe(0),e(o.value).toBe(!1),s.advanceTimersByTime(2e3),e(t.value).toBe(0)}),n("应该支持大数值倒计时",()=>{const{start:a,current:t,formattedTime:o}=r(999);a(),e(t.value).toBe(999),e(o.value).toBe("999"),s.advanceTimersByTime(1e4),e(t.value).toBe(989)}),n("应该正确处理快速连续的开始和停止",()=>{const{start:a,stop:t,current:o}=r(10);a(),t(),a(),s.advanceTimersByTime(2e3),e(o.value).toBe(8),t(),a(),e(o.value).toBe(10)}),n("多个倒计时实例应该互不影响",()=>{const a=r(5),t=r(10);a.start(),t.start(),s.advanceTimersByTime(3e3),e(a.current.value).toBe(2),e(t.current.value).toBe(7),a.stop(),s.advanceTimersByTime(2e3),e(a.current.value).toBe(0),e(t.current.value).toBe(5)}),n("多次完成倒计时应该多次调用回调",()=>{const a=s.fn(),{start:t}=r(2,{callback:a});t(),s.advanceTimersByTime(2e3),e(a).toHaveBeenCalledTimes(1),t(),s.advanceTimersByTime(2e3),e(a).toHaveBeenCalledTimes(2)}),n("应该支持不同的初始倒计时值",()=>{[1,5,10,30,60,120].forEach(t=>{const{current:o}=r(t);e(o.value).toBe(t)})}),n("倒计时状态应该保持一致",()=>{const{start:a,stop:t,current:o,isCounting:u}=r(5);e(o.value).toBe(5),e(u.value).toBe(!1),a(),e(o.value).toBe(5),e(u.value).toBe(!0),s.advanceTimersByTime(2e3),e(o.value).toBe(3),e(u.value).toBe(!0),t(),e(o.value).toBe(0),e(u.value).toBe(!1)})});
