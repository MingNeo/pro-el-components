import{av as R,d as N,G as z,al as de,r as E,v as oe,s as fe,Y as me,L as _,h as M,c as V,o as O,j as H,e as X,n as S,k as o,t as ve,w as T,b as j,H as pe,N as te,ab as ye,q as K,ae as ge,a5 as Ce,p as A,P as be,$ as he,T as we,a2 as Ee,K as ke,ai as Se,a3 as Te,V as Me}from"./framework.C7SOrqHQ.js";import{P as U}from"./vnode.7Q1GY8fL.js";import{a as G,c as Z,d as W,_ as se,e as Le,w as Pe}from"./base.BdmgHdsK.js";import{F as Be,t as Ie,i as De,E as Ae,a as Fe}from"./index.BTF4YfDF.js";import{a as q,E as $e,h as Q,b as Oe,g as ze,r as Ne,u as Ye}from"./index.RKxNzSBd.js";import{i as He,C as Re}from"./icon.D1paMUUC.js";import{c as Ve}from"./refs.DxbQ4g28.js";import{u as Ue}from"./index.hhTD2MZf.js";import{U as ne}from"./event.BB_Ol6Sd.js";import{e as Xe}from"./types.CHlFyNtD.js";import{t as je}from"./error.Cq9Fpw4b.js";import{a as Ke}from"./scroll.DMEu3ij1.js";import{a as le,l as x}from"./index.126dwtby.js";import{u as ee}from"./index.Dmme7433.js";import{a as We}from"./use-global-config.DIWKgMVJ.js";import{u as qe}from"./index.CR5w6Vik.js";const ae=e=>{if(!e)return{onClick:R,onMousedown:R,onMouseup:R};let n=!1,l=!1;return{onClick:r=>{n&&l&&e(r),n=l=!1},onMousedown:r=>{n=r.target===r.currentTarget},onMouseup:r=>{l=r.target===r.currentTarget}}},Ge=G({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},Je="overlay";var _e=N({name:"ElOverlay",props:Ge,emits:Ze,setup(e,{slots:n,emit:l}){const m=Z(Je),s=a=>{l("click",a)},{onClick:u,onMousedown:r,onMouseup:p}=ae(e.customMaskEvent?void 0:s);return()=>e.mask?z("div",{class:[m.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:p},[E(n,"default")],U.STYLE|U.CLASS|U.PROPS,["onClick","onMouseup","onMousedown"]):de("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(n,"default")])}});const Qe=_e,re=Symbol("dialogInjectionKey"),ie=G({center:Boolean,alignCenter:Boolean,closeIcon:{type:He},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),xe={close:()=>!0},eo=(e,n,l,m)=>{const s={offsetX:0,offsetY:0},u=(c,f)=>{if(e.value){const{offsetX:v,offsetY:g}=s,C=e.value.getBoundingClientRect(),h=C.left,i=C.top,w=C.width,k=C.height,L=document.documentElement.clientWidth,F=document.documentElement.clientHeight,P=-h+v,B=-i+g,I=L-h-w+v,$=F-i-k+g;m!=null&&m.value||(c=Math.min(Math.max(c,P),I),f=Math.min(Math.max(f,B),$)),s.offsetX=c,s.offsetY=f,e.value.style.transform=`translate(${q(c)}, ${q(f)})`}},r=c=>{const f=c.clientX,v=c.clientY,{offsetX:g,offsetY:C}=s,h=w=>{const k=g+w.clientX-f,L=C+w.clientY-v;u(k,L)},i=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",i)},p=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",r),window.addEventListener("resize",y))},a=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",r),window.removeEventListener("resize",y))},d=()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform="")},y=()=>{const{offsetX:c,offsetY:f}=s;u(c,f)};return oe(()=>{fe(()=>{l.value?p():a()})}),me(()=>{a()}),{resetPosition:d,updatePosition:y}},oo=N({name:"ElDialogContent"}),to=N({...oo,props:ie,emits:xe,setup(e,{expose:n}){const l=e,{t:m}=Ue(),{Close:s}=Re,{dialogRef:u,headerRef:r,bodyId:p,ns:a,style:d}=_(re),{focusTrapRef:y}=_(Be),c=M(()=>[a.b(),a.is("fullscreen",l.fullscreen),a.is("draggable",l.draggable),a.is("align-center",l.alignCenter),{[a.m("center")]:l.center}]),f=Ve(y,u),v=M(()=>l.draggable),g=M(()=>l.overflow),{resetPosition:C,updatePosition:h}=eo(u,r,v,g);return n({resetPosition:C,updatePosition:h}),(i,w)=>(O(),V("div",{ref:o(f),class:S(o(c)),style:te(o(d)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:r,class:S([o(a).e("header"),i.headerClass,{"show-close":i.showClose}])},[E(i.$slots,"header",{},()=>[H("span",{role:"heading","aria-level":i.ariaLevel,class:S(o(a).e("title"))},ve(i.title),11,["aria-level"])]),i.showClose?(O(),V("button",{key:0,"aria-label":o(m)("el.dialog.close"),class:S(o(a).e("headerbtn")),type:"button",onClick:k=>i.$emit("close")},[z(o($e),{class:S(o(a).e("close"))},{default:T(()=>[(O(),j(pe(i.closeIcon||o(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):X("v-if",!0)],2),H("div",{id:o(p),class:S([o(a).e("body"),i.bodyClass])},[E(i.$slots,"default")],10,["id"]),i.$slots.footer?(O(),V("footer",{key:0,class:S([o(a).e("footer"),i.footerClass])},[E(i.$slots,"footer")],2)):X("v-if",!0)],6))}});var so=se(to,[["__file","dialog-content.vue"]]);const no=G({...ie,appendToBody:Boolean,appendTo:{type:Ie.to.type,default:"body"},beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),lo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>Xe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ao=(e,n={})=>{ye(e)||je("[useLockscreen]","You need to pass a ref param to this function");const l=n.ns||Z("popup"),m=M(()=>l.bm("parent","hidden"));if(!le||Q(document.body,m.value))return;let s=0,u=!1,r="0";const p=()=>{setTimeout(()=>{typeof document>"u"||u&&document&&(document.body.style.width=r,Ne(document.body,m.value))},200)};K(e,a=>{if(!a){p();return}u=!Q(document.body,m.value),u&&(r=document.body.style.width,Oe(document.body,m.value)),s=Ke(l.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,y=ze(document.body,"overflowY");s>0&&(d||y==="scroll")&&u&&(document.body.style.width=`calc(100% - ${s}px)`)}),ge(()=>p())},ro=(e,n)=>{var l;const s=Ce().emit,{nextZIndex:u}=Ye();let r="";const p=ee(),a=ee(),d=A(!1),y=A(!1),c=A(!1),f=A((l=e.zIndex)!=null?l:u());let v,g;const C=We("namespace",Le),h=M(()=>{const b={},D=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(b[`${D}-margin-top`]=e.top),e.width&&(b[`${D}-width`]=q(e.width))),b}),i=M(()=>e.alignCenter?{display:"flex"}:{});function w(){s("opened")}function k(){s("closed"),s(ne,!1),e.destroyOnClose&&(c.value=!1)}function L(){s("close")}function F(){g==null||g(),v==null||v(),e.openDelay&&e.openDelay>0?{stop:v}=x(()=>$(),e.openDelay):$()}function P(){v==null||v(),g==null||g(),e.closeDelay&&e.closeDelay>0?{stop:g}=x(()=>Y(),e.closeDelay):Y()}function B(){function b(D){D||(y.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(b):P()}function I(){e.closeOnClickModal&&B()}function $(){le&&(d.value=!0)}function Y(){d.value=!1}function t(){s("openAutoFocus")}function J(){s("closeAutoFocus")}function ue(b){var D;((D=b.detail)==null?void 0:D.focusReason)==="pointer"&&b.preventDefault()}e.lockScroll&&ao(d);function ce(){e.closeOnPressEscape&&B()}return K(()=>e.modelValue,b=>{b?(y.value=!1,F(),c.value=!0,f.value=De(e.zIndex)?u():f.value++,be(()=>{s("open"),n.value&&(n.value.parentElement.scrollTop=0,n.value.parentElement.scrollLeft=0,n.value.scrollTop=0)})):d.value&&P()}),K(()=>e.fullscreen,b=>{n.value&&(b?(r=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=r)}),oe(()=>{e.modelValue&&(d.value=!0,c.value=!0,F())}),{afterEnter:w,afterLeave:k,beforeLeave:L,handleClose:B,onModalClick:I,close:P,doClose:Y,onOpenAutoFocus:t,onCloseAutoFocus:J,onCloseRequested:ce,onFocusoutPrevented:ue,titleId:p,bodyId:a,closed:y,style:h,overlayDialogStyle:i,rendered:c,visible:d,zIndex:f}},io=N({name:"ElDialog",inheritAttrs:!1}),uo=N({...io,props:no,emits:lo,setup(e,{expose:n}){const l=e,m=he();qe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},M(()=>!!m.title));const s=Z("dialog"),u=A(),r=A(),p=A(),{visible:a,titleId:d,bodyId:y,style:c,overlayDialogStyle:f,rendered:v,zIndex:g,afterEnter:C,afterLeave:h,beforeLeave:i,handleClose:w,onModalClick:k,onOpenAutoFocus:L,onCloseAutoFocus:F,onCloseRequested:P,onFocusoutPrevented:B}=ro(l,u);Me(re,{dialogRef:u,headerRef:r,bodyId:y,ns:s,rendered:v,style:c});const I=ae(k),$=M(()=>l.draggable&&!l.fullscreen);return n({visible:a,dialogContentRef:p,resetPosition:()=>{var t;(t=p.value)==null||t.resetPosition()},handleClose:w}),(t,J)=>(O(),j(o(Fe),{to:t.appendTo,disabled:t.appendTo!=="body"?!1:!t.appendToBody},{default:T(()=>[z(we,{name:"dialog-fade",onAfterEnter:o(C),onAfterLeave:o(h),onBeforeLeave:o(i),persisted:""},{default:T(()=>[Ee(z(o(Qe),{"custom-mask-event":"",mask:t.modal,"overlay-class":t.modalClass,"z-index":o(g)},{default:T(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":t.title||void 0,"aria-labelledby":t.title?void 0:o(d),"aria-describedby":o(y),class:S(`${o(s).namespace.value}-overlay-dialog`),style:te(o(f)),onClick:o(I).onClick,onMousedown:o(I).onMousedown,onMouseup:o(I).onMouseup},[z(o(Ae),{loop:"",trapped:o(a),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(F),onFocusoutPrevented:o(B),onReleaseRequested:o(P)},{default:T(()=>[o(v)?(O(),j(so,ke({key:0,ref_key:"dialogContentRef",ref:p},t.$attrs,{center:t.center,"align-center":t.alignCenter,"close-icon":t.closeIcon,draggable:o($),overflow:t.overflow,fullscreen:t.fullscreen,"header-class":t.headerClass,"body-class":t.bodyClass,"footer-class":t.footerClass,"show-close":t.showClose,title:t.title,"aria-level":t.headerAriaLevel,onClose:o(w)}),Se({header:T(()=>[t.$slots.title?E(t.$slots,"title",{key:1}):E(t.$slots,"header",{key:0,close:o(w),titleId:o(d),titleClass:o(s).e("title")})]),default:T(()=>[E(t.$slots,"default")]),_:2},[t.$slots.footer?{name:"footer",fn:T(()=>[E(t.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):X("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Te,o(a)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var co=se(uo,[["__file","dialog.vue"]]);const Po=Pe(co);export{Po as E};
