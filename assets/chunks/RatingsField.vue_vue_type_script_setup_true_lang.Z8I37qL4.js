import{i as k}from"./index.BQOwn3WU.js";import"./base.Dwgz6jSd.js";import{E as V}from"./el-input.DQ30HcuH.js";import"./el-tooltip.l0sNRNKZ.js";import{E as w}from"./el-popper.CZJRST1P.js";import{E}from"./icon.C3T6eoYR.js";import{d as C,p as j,h as B,c as a,o as n,j as t,F as d,t as i,B as p,e as F,G as m,w as f,k as c,n as S}from"./framework.igcgEEdr.js";const I={class:"rating-matrix w-full p-4 border border-solid border-gray-200 rounded"},N={class:"rating-summary mt-5 pt-4 border-solid border-0 border-t border-gray-200"},O={class:"total-score text-base font-medium text-right text-gray-800"},M={class:"rating-list flex flex-col gap-5"},R={class:"dimension-info flex justify-between mb-1"},U={class:"dimension-name font-medium text-gray-800"},z={class:"dimension-score text-primary font-medium"},A={key:0,class:"dimension-comment text-gray-500 text-sm mt-1"},D={class:"rating-list flex flex-col gap-5"},G={class:"dimension-header flex items-center gap-2 mb-2"},L={class:"dimension-name font-medium text-gray-800"},T={class:"rating-controls flex flex-col gap-3"},$={class:"score-selector flex gap-2"},q=["onClick"],H={class:"rating-summary mt-5 pt-4 border-solid border-0 border-t border-gray-200"},J={class:"total-score text-base font-medium text-right text-gray-800"},te=C({__name:"RatingsField",props:{modelValue:{},viewMode:{type:Boolean},dimensions:{default:()=>[]},maxScore:{}},emits:["update:modelValue","change"],setup(v,{emit:g}){const u=v,y=g,x=u.maxScore||5,o=j(u.modelValue||Object.fromEntries(u.dimensions.map(r=>[r.key,{score:0,comment:""}]))),_=B(()=>{const r=Object.values(o.value).map(e=>e.score);return r.reduce((e,s)=>e+s,0)/r.length});function b(r,l,e){o.value[r]={...o.value[r],[l]:e},y("update:modelValue",o.value),y("change",o.value)}const h=Array.from({length:x+1},(r,l)=>l);return(r,l)=>(n(),a(d,null,[l[0]||(l[0]=t("p",null,"自定义组件",-1)),t("div",I,[r.viewMode?(n(),a(d,{key:0},[t("div",N,[t("div",O," 总评分: "+i(_.value.toFixed(1)),1)]),t("div",M,[(n(!0),a(d,null,p(r.dimensions,e=>(n(),a("div",{key:e.key,class:"rating-item border-solid border-0 border-b border-b-gray-100 pb-4"},[t("div",R,[t("div",U,i(e.name),1),t("div",z,i(o.value[e.key].score)+"分 ",1)]),o.value[e.key].comment?(n(),a("div",A,i(o.value[e.key].comment),1)):F("",!0)]))),128))])],64)):(n(),a(d,{key:1},[t("div",D,[(n(!0),a(d,null,p(r.dimensions,e=>(n(),a("div",{key:e.key,class:"rating-item border-solid border-0 border-b border-gray-100 pb-4"},[t("div",G,[t("span",L,i(e.name),1),m(c(w),{content:e.description,placement:"top"},{default:f(()=>[m(c(E),null,{default:f(()=>[m(c(k))]),_:1})]),_:2},1032,["content"])]),t("div",T,[t("div",$,[(n(!0),a(d,null,p(c(h),s=>(n(),a("div",{key:s,class:S(["score-option w-8 h-8 flex items-center justify-center border border-solid border-gray-300 rounded cursor-pointer transition-all",{"bg-primary border-primary text-white":o.value[e.key].score===s,"hover:border-primary hover:text-primary":o.value[e.key].score!==s}]),onClick:K=>b(e.key,"score",s)},i(s),11,q))),128))]),m(c(V),{modelValue:o.value[e.key].comment,"onUpdate:modelValue":s=>o.value[e.key].comment=s,type:"textarea",rows:2,placeholder:"添加评语（可选）",onInput:s=>b(e.key,"comment",s)},null,8,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),t("div",H,[t("div",J," 总评分: "+i(_.value.toFixed(1)),1)])],64))])],64))}});export{te as _};
