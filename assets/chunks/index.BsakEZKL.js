import{ao as V,aY as K,ax as X,d as z,G as R,ak as ve,r as S,v as ne,s as pe,Y as ye,L as ee,h as A,c as G,o as $,j as H,e as j,n as h,k as o,t as Ce,w as L,b as q,H as Ee,N as le,ad as be,q as F,ai as ge,a6 as Te,p as N,P as Se,$ as we,T as he,a2 as Le,K as Ae,a9 as ke,a3 as Me,V as De}from"./framework.igcgEEdr.js";import{b as J,u as Q,d as W,_ as ae,c as Ie,w as Be}from"./base.Dwgz6jSd.js";import{F as Ne,t as Oe,i as Ye,E as $e,a as Re}from"./index.Brw29sq5.js";import{i as ze,b as Z,C as _e,E as Pe,h as oe,a as He,g as Ue,r as Ve}from"./icon.C3T6eoYR.js";import{c as Ke}from"./refs.n9wIXTtR.js";import{u as Xe}from"./index.BjB1lFfg.js";import{U as re}from"./event.BB_Ol6Sd.js";import{a as Ge}from"./types.DNi1ojkw.js";import{t as je}from"./error.Cq9Fpw4b.js";import{a as qe}from"./scroll.DxJqq-ED.js";import{a as ie,q as te}from"./index.mDR6Kexr.js";import{u as Fe}from"./index.CRCbWsfX.js";import{u as se}from"./use-form-common-props.BIymRJo1.js";import{a as We}from"./use-global-config.CrFx92Tt.js";import{u as Ze}from"./index.DBJOzW_o.js";var U=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(U||{});const P=e=>{const a=V(e)?e:[e],t=[];return a.forEach(l=>{var s;V(l)?t.push(...P(l)):K(l)&&((s=l.component)!=null&&s.subTree)?t.push(l,...P(l.component.subTree)):K(l)&&V(l.children)?t.push(...P(l.children)):K(l)&&l.shapeFlag===2?t.push(...P(l.type())):t.push(l)}),t},ue=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let a=!1,t=!1;return{onClick:i=>{a&&t&&e(i),a=t=!1},onMousedown:i=>{a=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},Je=J({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),Qe={click:e=>e instanceof MouseEvent},xe="overlay";var eo=z({name:"ElOverlay",props:Je,emits:Qe,setup(e,{slots:a,emit:t}){const l=Q(xe),s=r=>{t("click",r)},{onClick:d,onMousedown:i,onMouseup:p}=ue(e.customMaskEvent?void 0:s);return()=>e.mask?R("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:p},[S(a,"default")],U.STYLE|U.CLASS|U.PROPS,["onClick","onMouseup","onMousedown"]):ve("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(a,"default")])}});const oo=eo,de=Symbol("dialogInjectionKey"),ce=J({center:Boolean,alignCenter:Boolean,closeIcon:{type:ze},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),to={close:()=>!0},so=(e,a,t,l)=>{const s={offsetX:0,offsetY:0},d=(c,m)=>{if(e.value){const{offsetX:v,offsetY:C}=s,E=e.value.getBoundingClientRect(),g=E.left,u=E.top,T=E.width,w=E.height,k=document.documentElement.clientWidth,O=document.documentElement.clientHeight,M=-g+v,D=-u+C,I=k-g-T+v,Y=O-u-w+C;l!=null&&l.value||(c=Math.min(Math.max(c,M),I),m=Math.min(Math.max(m,D),Y)),s.offsetX=c,s.offsetY=m,e.value.style.transform=`translate(${Z(c)}, ${Z(m)})`}},i=c=>{const m=c.clientX,v=c.clientY,{offsetX:C,offsetY:E}=s,g=T=>{const w=C+T.clientX-m,k=E+T.clientY-v;d(w,k)},u=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",u)},p=()=>{a.value&&e.value&&(a.value.addEventListener("mousedown",i),window.addEventListener("resize",y))},r=()=>{a.value&&e.value&&(a.value.removeEventListener("mousedown",i),window.removeEventListener("resize",y))},f=()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform="")},y=()=>{const{offsetX:c,offsetY:m}=s;d(c,m)};return ne(()=>{pe(()=>{t.value?p():r()})}),ye(()=>{r()}),{resetPosition:f,updatePosition:y}},no=z({name:"ElDialogContent"}),lo=z({...no,props:ce,emits:to,setup(e,{expose:a}){const t=e,{t:l}=Xe(),{Close:s}=_e,{dialogRef:d,headerRef:i,bodyId:p,ns:r,style:f}=ee(de),{focusTrapRef:y}=ee(Ne),c=A(()=>[r.b(),r.is("fullscreen",t.fullscreen),r.is("draggable",t.draggable),r.is("align-center",t.alignCenter),{[r.m("center")]:t.center}]),m=Ke(y,d),v=A(()=>t.draggable),C=A(()=>t.overflow),{resetPosition:E,updatePosition:g}=so(d,i,v,C);return a({resetPosition:E,updatePosition:g}),(u,T)=>($(),G("div",{ref:o(m),class:h(o(c)),style:le(o(f)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:i,class:h([o(r).e("header"),u.headerClass,{"show-close":u.showClose}])},[S(u.$slots,"header",{},()=>[H("span",{role:"heading","aria-level":u.ariaLevel,class:h(o(r).e("title"))},Ce(u.title),11,["aria-level"])]),u.showClose?($(),G("button",{key:0,"aria-label":o(l)("el.dialog.close"),class:h(o(r).e("headerbtn")),type:"button",onClick:w=>u.$emit("close")},[R(o(Pe),{class:h(o(r).e("close"))},{default:L(()=>[($(),q(Ee(u.closeIcon||o(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):j("v-if",!0)],2),H("div",{id:o(p),class:h([o(r).e("body"),u.bodyClass])},[S(u.$slots,"default")],10,["id"]),u.$slots.footer?($(),G("footer",{key:0,class:h([o(r).e("footer"),u.footerClass])},[S(u.$slots,"footer")],2)):j("v-if",!0)],6))}});var ao=ae(lo,[["__file","dialog-content.vue"]]);const ro=J({...ce,appendToBody:Boolean,appendTo:{type:Oe.to.type,default:"body"},beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),io={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[re]:e=>Ge(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},uo=(e,a={})=>{be(e)||je("[useLockscreen]","You need to pass a ref param to this function");const t=a.ns||Q("popup"),l=A(()=>t.bm("parent","hidden"));if(!ie||oe(document.body,l.value))return;let s=0,d=!1,i="0";const p=()=>{setTimeout(()=>{typeof document>"u"||d&&document&&(document.body.style.width=i,Ve(document.body,l.value))},200)};F(e,r=>{if(!r){p();return}d=!oe(document.body,l.value),d&&(i=document.body.style.width,He(document.body,l.value)),s=qe(t.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,y=Ue(document.body,"overflowY");s>0&&(f||y==="scroll")&&d&&(document.body.style.width=`calc(100% - ${s}px)`)}),ge(()=>p())},co=(e,a)=>{var t;const s=Te().emit,{nextZIndex:d}=Fe();let i="";const p=se(),r=se(),f=N(!1),y=N(!1),c=N(!1),m=N((t=e.zIndex)!=null?t:d());let v,C;const E=We("namespace",Ie),g=A(()=>{const b={},B=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(b[`${B}-margin-top`]=e.top),e.width&&(b[`${B}-width`]=Z(e.width))),b}),u=A(()=>e.alignCenter?{display:"flex"}:{});function T(){s("opened")}function w(){s("closed"),s(re,!1),e.destroyOnClose&&(c.value=!1)}function k(){s("close")}function O(){C==null||C(),v==null||v(),e.openDelay&&e.openDelay>0?{stop:v}=te(()=>Y(),e.openDelay):Y()}function M(){v==null||v(),C==null||C(),e.closeDelay&&e.closeDelay>0?{stop:C}=te(()=>_(),e.closeDelay):_()}function D(){function b(B){B||(y.value=!0,f.value=!1)}e.beforeClose?e.beforeClose(b):M()}function I(){e.closeOnClickModal&&D()}function Y(){ie&&(f.value=!0)}function _(){f.value=!1}function n(){s("openAutoFocus")}function x(){s("closeAutoFocus")}function fe(b){var B;((B=b.detail)==null?void 0:B.focusReason)==="pointer"&&b.preventDefault()}e.lockScroll&&uo(f);function me(){e.closeOnPressEscape&&D()}return F(()=>e.modelValue,b=>{b?(y.value=!1,O(),c.value=!0,m.value=Ye(e.zIndex)?d():m.value++,Se(()=>{s("open"),a.value&&(a.value.parentElement.scrollTop=0,a.value.parentElement.scrollLeft=0,a.value.scrollTop=0)})):f.value&&M()}),F(()=>e.fullscreen,b=>{a.value&&(b?(i=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=i)}),ne(()=>{e.modelValue&&(f.value=!0,c.value=!0,O())}),{afterEnter:T,afterLeave:w,beforeLeave:k,handleClose:D,onModalClick:I,close:M,doClose:_,onOpenAutoFocus:n,onCloseAutoFocus:x,onCloseRequested:me,onFocusoutPrevented:fe,titleId:p,bodyId:r,closed:y,style:g,overlayDialogStyle:u,rendered:c,visible:f,zIndex:m}},fo=z({name:"ElDialog",inheritAttrs:!1}),mo=z({...fo,props:ro,emits:io,setup(e,{expose:a}){const t=e,l=we();Ze({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},A(()=>!!l.title));const s=Q("dialog"),d=N(),i=N(),p=N(),{visible:r,titleId:f,bodyId:y,style:c,overlayDialogStyle:m,rendered:v,zIndex:C,afterEnter:E,afterLeave:g,beforeLeave:u,handleClose:T,onModalClick:w,onOpenAutoFocus:k,onCloseAutoFocus:O,onCloseRequested:M,onFocusoutPrevented:D}=co(t,d);De(de,{dialogRef:d,headerRef:i,bodyId:y,ns:s,rendered:v,style:c});const I=ue(w),Y=A(()=>t.draggable&&!t.fullscreen);return a({visible:r,dialogContentRef:p,resetPosition:()=>{var n;(n=p.value)==null||n.resetPosition()},handleClose:T}),(n,x)=>($(),q(o(Re),{to:n.appendTo,disabled:n.appendTo!=="body"?!1:!n.appendToBody},{default:L(()=>[R(he,{name:"dialog-fade",onAfterEnter:o(E),onAfterLeave:o(g),onBeforeLeave:o(u),persisted:""},{default:L(()=>[Le(R(o(oo),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":o(C)},{default:L(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:o(f),"aria-describedby":o(y),class:h(`${o(s).namespace.value}-overlay-dialog`),style:le(o(m)),onClick:o(I).onClick,onMousedown:o(I).onMousedown,onMouseup:o(I).onMouseup},[R(o($e),{loop:"",trapped:o(r),"focus-start-el":"container",onFocusAfterTrapped:o(k),onFocusAfterReleased:o(O),onFocusoutPrevented:o(D),onReleaseRequested:o(M)},{default:L(()=>[o(v)?($(),q(ao,Ae({key:0,ref_key:"dialogContentRef",ref:p},n.$attrs,{center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:o(Y),overflow:n.overflow,fullscreen:n.fullscreen,"header-class":n.headerClass,"body-class":n.bodyClass,"footer-class":n.footerClass,"show-close":n.showClose,title:n.title,"aria-level":n.headerAriaLevel,onClose:o(T)}),ke({header:L(()=>[n.$slots.title?S(n.$slots,"title",{key:1}):S(n.$slots,"header",{key:0,close:o(T),titleId:o(f),titleClass:o(s).e("title")})]),default:L(()=>[S(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:L(()=>[S(n.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Me,o(r)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var vo=ae(mo,[["__file","dialog.vue"]]);const Io=Be(vo);export{Io as E,P as f};
