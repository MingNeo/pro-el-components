import{ap as Je,p as _,L as xe,h,d as X,c as P,o as b,j as Z,a2 as ge,b0 as da,k as l,Z as re,n as N,ab as Ke,r as ie,a as _e,t as se,P as de,N as pa,v as He,V as fa,a8 as Me,af as Wa,q as oe,al as Za,C as j,e as W,b as A,G as Q,w as I,F as fe,B as Ce,a5 as Xa,ah as Qe,a6 as Fe,av as Ya,b1 as Ja,aT as Qa,b2 as et,a3 as ea,ai as at,X as tt,b3 as lt}from"./framework.C7SOrqHQ.js";import{a as nt,c as st}from"./index.BxHDt7Km.js";import{E as va}from"./el-scrollbar.DH4X1zpC.js";import{A as ot,l as ha,g as ma,c as it,j as rt}from"./index.CacP4YLb.js";import{E as Ne}from"./index.RKxNzSBd.js";import{E as ut}from"./el-checkbox.BNYvkwwK.js";import{a as ye,_ as me,c as ue,h as ga,w as Oe,d as pe}from"./base.BdmgHdsK.js";import{a as Ue}from"./index.CQ2QlRVi.js";import{C as ve,U as he}from"./event.BB_Ol6Sd.js";import{a as aa,e as ze,f as ta,g as Ae,c as ct}from"./types.CHlFyNtD.js";import{a as ba,b as dt}from"./use-form-common-props.DDNg6-8l.js";import{u as pt}from"./index.CR5w6Vik.js";import{b as ft,u as vt}from"./index.Bq2Ms4g2.js";import{u as ya}from"./index.Dmme7433.js";import{u as ka,a as ht}from"./use-form-item.D8KyPK5_.js";import{d as Ca}from"./error.Cq9Fpw4b.js";import{u as Na,a as mt,b as gt}from"./index.hhTD2MZf.js";import{c as la,t as na,E as sa}from"./el-tag.bXv_BIuD.js";import{i as Ee}from"./isEqual.BOWLGTx_.js";import{c as bt,f as we,g as Ea}from"./index.BTF4YfDF.js";import{s as yt}from"./scroll.DMEu3ij1.js";import{E as F}from"./aria.9SHySdGF.js";import{c as $a}from"./cloneDeep.D8Rcep2n.js";import{a as Sa}from"./index.126dwtby.js";import{E as kt}from"./el-input.CeBPwPDU.js";import{u as Ct,b as Nt,E as oa}from"./el-popper.BuQPBkTD.js";import{C as Et}from"./index.guaSBbRJ.js";import{a as $t}from"./index.DaRhCE74.js";import{d as St}from"./debounce.BwFge-ki.js";var wt=1/0;function _t(e){var n=e==null?0:e.length;return n?ft(e,wt):[]}const wa=ye({modelValue:{type:[String,Number,Boolean],default:void 0},size:Ue,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),Vt=ye({...wa,border:Boolean}),_a={[he]:e=>Je(e)||aa(e)||ze(e),[ve]:e=>Je(e)||aa(e)||ze(e)},Va=Symbol("radioGroupKey"),Ta=(e,n)=>{const s=_(),t=xe(Va,void 0),o=h(()=>!!t),p=h(()=>ta(e.value)?e.label:e.value),r=h({get(){return o.value?t.modelValue:e.modelValue},set(m){o.value?t.changeEvent(m):n&&n(he,m),s.value.checked=e.modelValue===p.value}}),v=ba(h(()=>t==null?void 0:t.size)),i=dt(h(()=>t==null?void 0:t.disabled)),f=_(!1),g=h(()=>i.value||o.value&&r.value!==p.value?-1:0);return pt({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},h(()=>o.value&&ta(e.value))),{radioRef:s,isGroup:o,radioGroup:t,focus:f,size:v,disabled:i,tabIndex:g,modelValue:r,actualValue:p}},Tt=X({name:"ElRadio"}),Pt=X({...Tt,props:Vt,emits:_a,setup(e,{emit:n}){const s=e,t=ue("radio"),{radioRef:o,radioGroup:p,focus:r,size:v,disabled:i,modelValue:f,actualValue:g}=Ta(s,n);function m(){de(()=>n(ve,f.value))}return(E,x)=>{var B;return b(),P("label",{class:N([l(t).b(),l(t).is("disabled",l(i)),l(t).is("focus",l(r)),l(t).is("bordered",E.border),l(t).is("checked",l(f)===l(g)),l(t).m(l(v))])},[Z("span",{class:N([l(t).e("input"),l(t).is("disabled",l(i)),l(t).is("checked",l(f)===l(g))])},[ge(Z("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":M=>Ke(f)?f.value=M:null,class:N(l(t).e("original")),value:l(g),name:E.name||((B=l(p))==null?void 0:B.name),disabled:l(i),checked:l(f)===l(g),type:"radio",onFocus:M=>r.value=!0,onBlur:M=>r.value=!1,onChange:m,onClick:re(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[da,l(f)]]),Z("span",{class:N(l(t).e("inner"))},null,2)],2),Z("span",{class:N(l(t).e("label")),onKeydown:re(()=>{},["stop"])},[ie(E.$slots,"default",{},()=>[_e(se(E.label),1)])],42,["onKeydown"])],2)}}});var Lt=me(Pt,[["__file","radio.vue"]]);const It=ye({...wa}),Bt=X({name:"ElRadioButton"}),Dt=X({...Bt,props:It,setup(e){const n=e,s=ue("radio"),{radioRef:t,focus:o,size:p,disabled:r,modelValue:v,radioGroup:i,actualValue:f}=Ta(n),g=h(()=>({backgroundColor:(i==null?void 0:i.fill)||"",borderColor:(i==null?void 0:i.fill)||"",boxShadow:i!=null&&i.fill?`-1px 0 0 0 ${i.fill}`:"",color:(i==null?void 0:i.textColor)||""}));return(m,E)=>{var x;return b(),P("label",{class:N([l(s).b("button"),l(s).is("active",l(v)===l(f)),l(s).is("disabled",l(r)),l(s).is("focus",l(o)),l(s).bm("button",l(p))])},[ge(Z("input",{ref_key:"radioRef",ref:t,"onUpdate:modelValue":B=>Ke(v)?v.value=B:null,class:N(l(s).be("button","original-radio")),value:l(f),type:"radio",name:m.name||((x=l(i))==null?void 0:x.name),disabled:l(r),onFocus:B=>o.value=!0,onBlur:B=>o.value=!1,onClick:re(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[da,l(v)]]),Z("span",{class:N(l(s).be("button","inner")),style:pa(l(v)===l(f)?l(g):{}),onKeydown:re(()=>{},["stop"])},[ie(m.$slots,"default",{},()=>[_e(se(m.label),1)])],46,["onKeydown"])],2)}}});var Pa=me(Dt,[["__file","radio-button.vue"]]);const Mt=ye({id:{type:String,default:void 0},size:Ue,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...vt(["ariaLabel"])}),Ft=_a,zt=X({name:"ElRadioGroup"}),At=X({...zt,props:Mt,emits:Ft,setup(e,{emit:n}){const s=e,t=ue("radio"),o=ya(),p=_(),{formItem:r}=ka(),{inputId:v,isLabeledByFormItem:i}=ht(s,{formItemContext:r}),f=m=>{n(he,m),de(()=>n(ve,m))};He(()=>{const m=p.value.querySelectorAll("[type=radio]"),E=m[0];!Array.from(m).some(x=>x.checked)&&E&&(E.tabIndex=0)});const g=h(()=>s.name||o.value);return fa(Va,Me({...Wa(s),changeEvent:f,name:g})),oe(()=>s.modelValue,()=>{s.validateEvent&&(r==null||r.validate("change").catch(m=>Ca()))}),(m,E)=>(b(),P("div",{id:l(v),ref_key:"radioGroupRef",ref:p,class:N(l(t).b("group")),role:"radiogroup","aria-label":l(i)?void 0:m.ariaLabel||"radio-group","aria-labelledby":l(i)?l(r).labelId:void 0},[ie(m.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var La=me(At,[["__file","radio-group.vue"]]);const Rt=Oe(Lt,{RadioButton:Pa,RadioGroup:La}),Al=ga(La),Rl=ga(Pa);var xt=X({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:n,panel:s}=this.$parent,{data:t,label:o}=n,{renderLabelFn:p}=s;return Za("span",{class:e.e("label")},p?p({node:n,data:t}):o)}});const qe=Symbol(),Kt=X({name:"ElCascaderNode",components:{ElCheckbox:ut,ElRadio:Rt,NodeContent:xt,ElIcon:Ne,Check:ma,Loading:ha,ArrowRight:ot},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:n}){const s=xe(qe),t=ue("cascader-node"),o=h(()=>s.isHoverMenu),p=h(()=>s.config.multiple),r=h(()=>s.config.checkStrictly),v=h(()=>{var $;return($=s.checkedNodes[0])==null?void 0:$.uid}),i=h(()=>e.node.isDisabled),f=h(()=>e.node.isLeaf),g=h(()=>r.value&&!f.value||!i.value),m=h(()=>x(s.expandingNode)),E=h(()=>r.value&&s.checkedNodes.some(x)),x=$=>{var T;const{level:q,uid:ce}=e.node;return((T=$==null?void 0:$.pathNodes[q-1])==null?void 0:T.uid)===ce},B=()=>{m.value||s.expandNode(e.node)},M=$=>{const{node:T}=e;$!==T.checked&&s.handleCheckChange(T,$)},R=()=>{s.lazyLoad(e.node,()=>{f.value||B()})},K=$=>{o.value&&(Y(),!f.value&&n("expand",$))},Y=()=>{const{node:$}=e;!g.value||$.loading||($.loaded?B():R())},D=()=>{o.value&&!f.value||(f.value&&!i.value&&!r.value&&!p.value?L(!0):Y())},J=$=>{r.value?(M($),e.node.loaded&&B()):L($)},L=$=>{e.node.loaded?(M($),!r.value&&B()):R()};return{panel:s,isHoverMenu:o,multiple:p,checkStrictly:r,checkedNodeId:v,isDisabled:i,isLeaf:f,expandable:g,inExpandingPath:m,inCheckedPath:E,ns:t,handleHoverExpand:K,handleExpand:Y,handleClick:D,handleCheck:L,handleSelectCheck:J}}});function Ht(e,n,s,t,o,p){const r=j("el-checkbox"),v=j("el-radio"),i=j("check"),f=j("el-icon"),g=j("node-content"),m=j("loading"),E=j("arrow-right");return b(),P("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?void 0:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:N([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[W(" prefix "),e.multiple?(b(),A(r,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:re(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(b(),A(v,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:re(()=>{},["stop"])},{default:I(()=>[W(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Z("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(b(),A(f,{key:2,class:N(e.ns.e("prefix"))},{default:I(()=>[Q(i)]),_:1},8,["class"])):W("v-if",!0),W(" content "),Q(g),W(" postfix "),e.isLeaf?W("v-if",!0):(b(),P(fe,{key:3},[e.node.loading?(b(),A(f,{key:0,class:N([e.ns.is("loading"),e.ns.e("postfix")])},{default:I(()=>[Q(m)]),_:1},8,["class"])):(b(),A(f,{key:1,class:N(["arrow-right",e.ns.e("postfix")])},{default:I(()=>[Q(E)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var Ot=me(Kt,[["render",Ht],["__file","node.vue"]]);const Ut=X({name:"ElCascaderMenu",components:{Loading:ha,ElIcon:Ne,ElScrollbar:va,ElCascaderNode:Ot},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const n=Xa(),s=ue("cascader-menu"),{t}=Na(),o=ya();let p=null,r=null;const v=xe(qe),i=_(null),f=h(()=>!e.nodes.length),g=h(()=>!v.initialLoaded),m=h(()=>`${o.value}-${e.index}`),E=R=>{p=R.target},x=R=>{if(!(!v.isHoverMenu||!p||!i.value))if(p.contains(R.target)){B();const K=n.vnode.el,{left:Y}=K.getBoundingClientRect(),{offsetWidth:D,offsetHeight:J}=K,L=R.clientX-Y,$=p.offsetTop,T=$+p.offsetHeight;i.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${L} ${$} L${D} 0 V${$} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${L} ${T} L${D} ${J} V${T} Z" />
        `}else r||(r=window.setTimeout(M,v.config.hoverThreshold))},B=()=>{r&&(clearTimeout(r),r=null)},M=()=>{i.value&&(i.value.innerHTML="",B())};return{ns:s,panel:v,hoverZone:i,isEmpty:f,isLoading:g,menuId:m,t,handleExpand:E,handleMouseMove:x,clearHoverZone:M}}});function qt(e,n,s,t,o,p){const r=j("el-cascader-node"),v=j("loading"),i=j("el-icon"),f=j("el-scrollbar");return b(),A(f,{key:e.menuId,tag:"ul",role:"menu",class:N(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:I(()=>{var g;return[(b(!0),P(fe,null,Ce(e.nodes,m=>(b(),A(r,{key:m.uid,node:m,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(b(),P("div",{key:0,class:N(e.ns.e("empty-text"))},[Q(i,{size:"14",class:N(e.ns.is("loading"))},{default:I(()=>[Q(v)]),_:1},8,["class"]),_e(" "+se(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(b(),P("div",{key:1,class:N(e.ns.e("empty-text"))},[ie(e.$slots,"empty",{},()=>[_e(se(e.t("el.cascader.noData")),1)])],2)):(g=e.panel)!=null&&g.isHoverMenu?(b(),P(fe,{key:2},[W(" eslint-disable-next-line vue/html-self-closing "),(b(),P("svg",{ref:"hoverZone",class:N(e.ns.e("hover-zone"))},null,2))],2112)):W("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Gt=me(Ut,[["render",qt],["__file","menu.vue"]]);let jt=0;const Wt=e=>{const n=[e];let{parent:s}=e;for(;s;)n.unshift(s),s=s.parent;return n};class be{constructor(n,s,t,o=!1){this.data=n,this.config=s,this.parent=t,this.root=o,this.uid=jt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:r,children:v}=s,i=n[v],f=Wt(this);this.level=o?0:t?t.level+1:1,this.value=n[p],this.label=n[r],this.pathNodes=f,this.pathValues=f.map(g=>g.value),this.pathLabels=f.map(g=>g.label),this.childrenData=i,this.children=(i||[]).map(g=>new be(g,s,this)),this.loaded=!s.lazy||this.isLeaf||!Ae(i)}get isDisabled(){const{data:n,parent:s,config:t}=this,{disabled:o,checkStrictly:p}=t;return(Qe(o)?o(n,this):!!n[o])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:n,config:s,childrenData:t,loaded:o}=this,{lazy:p,leaf:r}=s,v=Qe(r)?r(n,this):n[r];return ct(v)?p&&!o?!1:!(Fe(t)&&t.length):!!v}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(n){const{childrenData:s,children:t}=this,o=new be(n,this.config,this);return Fe(s)?s.push(n):this.childrenData=[n],t.push(o),o}calcText(n,s){const t=n?this.pathLabels.join(s):this.label;return this.text=t,t}broadcast(n,...s){const t=`onParent${la(n)}`;this.children.forEach(o=>{o&&(o.broadcast(n,...s),o[t]&&o[t](...s))})}emit(n,...s){const{parent:t}=this,o=`onChild${la(n)}`;t&&(t[o]&&t[o](...s),t.emit(n,...s))}onParentCheck(n){this.isDisabled||this.setCheckState(n)}onChildCheck(){const{children:n}=this,s=n.filter(o=>!o.isDisabled),t=s.length?s.every(o=>o.checked):!1;this.setCheckState(t)}setCheckState(n){const s=this.children.length,t=this.children.reduce((o,p)=>{const r=p.checked?1:p.indeterminate?.5:0;return o+r},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&n,this.indeterminate=this.loaded&&t!==s&&t>0}doCheck(n){if(this.checked===n)return;const{checkStrictly:s,multiple:t}=this.config;s||!t?this.checked=n:(this.broadcast("check",n),this.setCheckState(n),this.emit("check"))}}const Re=(e,n)=>e.reduce((s,t)=>(t.isLeaf?s.push(t):(!n&&s.push(t),s=s.concat(Re(t.children,n))),s),[]);class ia{constructor(n,s){this.config=s;const t=(n||[]).map(o=>new be(o,this.config));this.nodes=t,this.allNodes=Re(t,!1),this.leafNodes=Re(t,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}appendNode(n,s){const t=s?s.appendChild(n):new be(n,this.config);s||this.nodes.push(t),this.appendAllNodesAndLeafNodes(t)}appendNodes(n,s){n.forEach(t=>this.appendNode(t,s))}appendAllNodesAndLeafNodes(n){this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n),n.children&&n.children.forEach(s=>{this.appendAllNodesAndLeafNodes(s)})}getNodeByValue(n,s=!1){return!n&&n!==0?null:this.getFlattedNodes(s).find(o=>Ee(o.value,n)||Ee(o.pathValues,n))||null}getSameNode(n){return n&&this.getFlattedNodes(!1).find(({value:t,level:o})=>Ee(n.value,t)&&n.level===o)||null}}const Ia=ye({modelValue:{type:pe([Number,String,Array])},options:{type:pe(Array),default:()=>[]},props:{type:pe(Object),default:()=>({})}}),Zt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ya,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Xt=e=>h(()=>({...Zt,...e.props})),ra=e=>{if(!e)return 0;const n=e.id.split("-");return Number(n[n.length-2])},Yt=e=>{if(!e)return;const n=e.querySelector("input");n?n.click():bt(e)&&e.click()},Jt=(e,n)=>{const s=n.slice(0),t=s.map(p=>p.uid),o=e.reduce((p,r)=>{const v=t.indexOf(r.uid);return v>-1&&(p.push(r),s.splice(v,1),t.splice(v,1)),p},[]);return o.push(...s),o},ua=e=>[...new Set(e)],ca=e=>!e&&e!==0?[]:Fe(e)?e:[e],Qt=X({name:"ElCascaderPanel",components:{ElCascaderMenu:Gt},props:{...Ia,border:{type:Boolean,default:!0},renderLabel:Function},emits:[he,ve,"close","expand-change"],setup(e,{emit:n,slots:s}){let t=!1;const o=ue("cascader"),p=Xt(e);let r=null;const v=_(!0),i=_([]),f=_(null),g=_([]),m=_(null),E=_([]),x=h(()=>p.value.expandTrigger==="hover"),B=h(()=>e.renderLabel||s.default),M=()=>{const{options:d}=e,y=p.value;t=!1,r=new ia(d,y),g.value=[r.getNodes()],y.lazy&&Ae(e.options)?(v.value=!1,R(void 0,C=>{C&&(r=new ia(C,y),g.value=[r.getNodes()]),v.value=!0,q(!1,!0)})):q(!1,!0)},R=(d,y)=>{const C=p.value;d=d||new be({},C,void 0,!0),d.loading=!0;const k=S=>{const V=d,H=V.root?null:V;S&&(r==null||r.appendNodes(S,H)),V.loading=!1,V.loaded=!0,V.childrenData=V.childrenData||[],y&&y(S)};C.lazyLoad(d,k)},K=(d,y)=>{var C;const{level:k}=d,S=g.value.slice(0,k);let V;d.isLeaf?V=d.pathNodes[k-2]:(V=d,S.push(d.children)),((C=m.value)==null?void 0:C.uid)!==(V==null?void 0:V.uid)&&(m.value=d,g.value=S,!y&&n("expand-change",(d==null?void 0:d.pathValues)||[]))},Y=(d,y,C=!0)=>{const{checkStrictly:k,multiple:S}=p.value,V=E.value[0];t=!0,!S&&(V==null||V.doCheck(!1)),d.doCheck(y),T(),C&&!S&&!k&&n("close"),!C&&!S&&!k&&D(d)},D=d=>{d&&(d=d.parent,D(d),d&&K(d))},J=d=>r==null?void 0:r.getFlattedNodes(d),L=d=>{var y;return(y=J(d))==null?void 0:y.filter(C=>C.checked!==!1)},$=()=>{E.value.forEach(d=>d.doCheck(!1)),T(),g.value=g.value.slice(0,1),m.value=null,n("expand-change",[])},T=()=>{var d;const{checkStrictly:y,multiple:C}=p.value,k=E.value,S=L(!y),V=Jt(k,S),H=V.map(z=>z.valueByOption);E.value=V,f.value=C?H:(d=H[0])!=null?d:null},q=(d=!1,y=!1)=>{const{modelValue:C}=e,{lazy:k,multiple:S,checkStrictly:V}=p.value,H=!V;if(!(!v.value||t||!y&&Ee(C,f.value)))if(k&&!d){const O=ua(_t(ca(C))).map(G=>r==null?void 0:r.getNodeByValue(G)).filter(G=>!!G&&!G.loaded&&!G.loading);O.length?O.forEach(G=>{R(G,()=>q(!1,y))}):q(!0,y)}else{const z=S?ca(C):[C],O=ua(z.map(G=>r==null?void 0:r.getNodeByValue(G,H)));ce(O,y),f.value=$a(C)}},ce=(d,y=!0)=>{const{checkStrictly:C}=p.value,k=E.value,S=d.filter(z=>!!z&&(C||z.isLeaf)),V=r==null?void 0:r.getSameNode(m.value),H=y&&V||S[0];H?H.pathNodes.forEach(z=>K(z,!0)):m.value=null,k.forEach(z=>z.doCheck(!1)),Me(S).forEach(z=>z.doCheck(!0)),E.value=S,de(ee)},ee=()=>{Sa&&i.value.forEach(d=>{const y=d==null?void 0:d.$el;if(y){const C=y.querySelector(`.${o.namespace.value}-scrollbar__wrap`),k=y.querySelector(`.${o.b("node")}.${o.is("active")}`)||y.querySelector(`.${o.b("node")}.in-active-path`);yt(C,k)}})},te=d=>{const y=d.target,{code:C}=d;switch(C){case F.up:case F.down:{d.preventDefault();const k=C===F.up?-1:1;we(Ea(y,k,`.${o.b("node")}[tabindex="-1"]`));break}case F.left:{d.preventDefault();const k=i.value[ra(y)-1],S=k==null?void 0:k.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);we(S);break}case F.right:{d.preventDefault();const k=i.value[ra(y)+1],S=k==null?void 0:k.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);we(S);break}case F.enter:case F.numpadEnter:Yt(y);break}};return fa(qe,Me({config:p,expandingNode:m,checkedNodes:E,isHoverMenu:x,initialLoaded:v,renderLabelFn:B,lazyLoad:R,expandNode:K,handleCheckChange:Y})),oe([p,()=>e.options],M,{deep:!0,immediate:!0}),oe(()=>e.modelValue,()=>{t=!1,q()},{deep:!0}),oe(()=>f.value,d=>{Ee(d,e.modelValue)||(n(he,d),n(ve,d))}),Ja(()=>i.value=[]),He(()=>!Ae(e.modelValue)&&q()),{ns:o,menuList:i,menus:g,checkedNodes:E,handleKeyDown:te,handleCheckChange:Y,getFlattedNodes:J,getCheckedNodes:L,clearCheckedNodes:$,calculateCheckedValue:T,scrollToExpandingNode:ee}}});function el(e,n,s,t,o,p){const r=j("el-cascader-menu");return b(),P("div",{class:N([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(b(!0),P(fe,null,Ce(e.menus,(v,i)=>(b(),A(r,{key:i,ref_for:!0,ref:f=>e.menuList[i]=f,index:i,nodes:[...v]},{empty:I(()=>[ie(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var al=me(Qt,[["render",el],["__file","index.vue"]]);const tl=Oe(al),ll=ye({...Ia,size:Ue,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:pe(Function),default:(e,n)=>e.text.includes(n)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:pe(Function),default:()=>!0},placement:{type:pe(String),values:Nt,default:"bottom-start"},fallbackPlacements:{type:pe(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ct.teleported,tagType:{...na.type,default:"info"},tagEffect:{...na.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...mt}),nl={[he]:e=>!0,[ve]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>ze(e),expandChange:e=>!!e,removeTag:e=>!!e},sl="ElCascader",ol=X({name:sl}),il=X({...ol,props:ll,emits:nl,setup(e,{expose:n,emit:s}){const t=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:u,placement:c}=a;["right","left","bottom","top"].includes(c)||(u.arrow.x=35)},requires:["arrow"]}]},p=Qa();let r=0,v=0;const i=ue("cascader"),f=ue("input"),{t:g}=Na(),{form:m,formItem:E}=ka(),{valueOnClear:x}=gt(t),{isComposing:B,handleComposition:M}=$t({afterComposition(a){var u;const c=(u=a.target)==null?void 0:u.value;De(c)}}),R=_(null),K=_(null),Y=_(null),D=_(null),J=_(null),L=_(!1),$=_(!1),T=_(!1),q=_(!1),ce=_(""),ee=_(""),te=_([]),d=_([]),y=_([]),C=h(()=>p.style),k=h(()=>t.disabled||(m==null?void 0:m.disabled)),S=h(()=>t.placeholder||g("el.cascader.placeholder")),V=h(()=>ee.value||te.value.length>0||B.value?"":S.value),H=ba(),z=h(()=>H.value==="small"?"small":"default"),O=h(()=>!!t.props.multiple),G=h(()=>!t.filterable||O.value),Ge=h(()=>O.value?ee.value:ce.value),$e=h(()=>{var a;return((a=D.value)==null?void 0:a.checkedNodes)||[]}),Ba=h(()=>!t.clearable||k.value||T.value||!$.value?!1:!!$e.value.length),Se=h(()=>{const{showAllLevels:a,separator:u}=t,c=$e.value;return c.length?O.value?"":c[0].calcText(a,u):""}),Da=h(()=>(E==null?void 0:E.validateState)||""),Ve=h({get(){return $a(t.modelValue)},set(a){const u=a??x.value;s(he,u),s(ve,u),t.validateEvent&&(E==null||E.validate("change").catch(c=>Ca()))}}),Ma=h(()=>[i.b(),i.m(H.value),i.is("disabled",k.value),p.class]),Fa=h(()=>[f.e("icon"),"icon-arrow-down",i.is("reverse",L.value)]),za=h(()=>i.is("focus",L.value||q.value)),je=h(()=>{var a,u;return(u=(a=R.value)==null?void 0:a.popperRef)==null?void 0:u.contentRef}),U=a=>{var u,c,w;k.value||(a=a??!L.value,a!==L.value&&(L.value=a,(c=(u=K.value)==null?void 0:u.input)==null||c.setAttribute("aria-expanded",`${a}`),a?(ke(),de((w=D.value)==null?void 0:w.scrollToExpandingNode)):t.filterable&&Be(),s("visibleChange",a)))},ke=()=>{de(()=>{var a;(a=R.value)==null||a.updatePopper()})},Te=()=>{T.value=!1},Pe=a=>{const{showAllLevels:u,separator:c}=t;return{node:a,key:a.uid,text:a.calcText(u,c),hitState:!1,closable:!k.value&&!a.isDisabled,isCollapseTag:!1}},Le=a=>{var u;const c=a.node;c.doCheck(!1),(u=D.value)==null||u.calculateCheckedValue(),s("removeTag",c.valueByOption)},Aa=()=>{if(!O.value)return;const a=$e.value,u=[],c=[];if(a.forEach(w=>c.push(Pe(w))),d.value=c,a.length){a.slice(0,t.maxCollapseTags).forEach(ae=>u.push(Pe(ae)));const w=a.slice(t.maxCollapseTags),le=w.length;le&&(t.collapseTags?u.push({key:-1,text:`+ ${le}`,closable:!1,isCollapseTag:!0}):w.forEach(ae=>u.push(Pe(ae))))}te.value=u},We=()=>{var a,u;const{filterMethod:c,showAllLevels:w,separator:le}=t,ae=(u=(a=D.value)==null?void 0:a.getFlattedNodes(!t.props.checkStrictly))==null?void 0:u.filter(ne=>ne.isDisabled?!1:(ne.calcText(w,le),c(ne,Ge.value)));O.value&&(te.value.forEach(ne=>{ne.hitState=!1}),d.value.forEach(ne=>{ne.hitState=!1})),T.value=!0,y.value=ae,ke()},Ra=()=>{var a;let u;T.value&&J.value?u=J.value.$el.querySelector(`.${i.e("suggestion-item")}`):u=(a=D.value)==null?void 0:a.$el.querySelector(`.${i.b("node")}[tabindex="-1"]`),u&&(u.focus(),!T.value&&u.click())},Ie=()=>{var a,u;const c=(a=K.value)==null?void 0:a.input,w=Y.value,le=(u=J.value)==null?void 0:u.$el;if(!(!Sa||!c)){if(le){const ae=le.querySelector(`.${i.e("suggestion-list")}`);ae.style.minWidth=`${c.offsetWidth}px`}if(w){const{offsetHeight:ae}=w,ne=te.value.length>0?`${Math.max(ae,r)-2}px`:`${r}px`;c.style.height=ne,ke()}}},xa=a=>{var u;return(u=D.value)==null?void 0:u.getCheckedNodes(a)},Ka=a=>{ke(),s("expandChange",a)},Ha=a=>{if(!B.value)switch(a.code){case F.enter:case F.numpadEnter:U();break;case F.down:U(!0),de(Ra),a.preventDefault();break;case F.esc:L.value===!0&&(a.preventDefault(),a.stopPropagation(),U(!1));break;case F.tab:U(!1);break}},Oa=()=>{var a;(a=D.value)==null||a.clearCheckedNodes(),!L.value&&t.filterable&&Be(),U(!1),s("clear")},Be=()=>{const{value:a}=Se;ce.value=a,ee.value=a},Ua=a=>{var u,c;const{checked:w}=a;O.value?(u=D.value)==null||u.handleCheckChange(a,!w,!1):(!w&&((c=D.value)==null||c.handleCheckChange(a,!0,!1)),U(!1))},qa=a=>{const u=a.target,{code:c}=a;switch(c){case F.up:case F.down:{a.preventDefault();const w=c===F.up?-1:1;we(Ea(u,w,`.${i.e("suggestion-item")}[tabindex="-1"]`));break}case F.enter:case F.numpadEnter:u.click();break}},Ga=()=>{const a=te.value,u=a[a.length-1];v=ee.value?0:v+1,!(!u||!v||t.collapseTags&&a.length>1)&&(u.hitState?Le(u):u.hitState=!0)},Ze=a=>{const u=a.target,c=i.e("search-input");u.className===c&&(q.value=!0),s("focus",a)},Xe=a=>{q.value=!1,s("blur",a)},ja=St(()=>{const{value:a}=Ge;if(!a)return;const u=t.beforeFilter(a);et(u)?u.then(We).catch(()=>{}):u!==!1?We():Te()},t.debounce),De=(a,u)=>{!L.value&&U(!0),!(u!=null&&u.isComposing)&&(a?ja():Te())},Ye=a=>Number.parseFloat(st(f.cssVarName("input-height"),a).value)-2;return oe(T,ke),oe([$e,k,()=>t.collapseTags],Aa),oe(te,()=>{de(()=>Ie())}),oe(H,async()=>{await de();const a=K.value.input;r=Ye(a)||r,Ie()}),oe(Se,Be,{immediate:!0}),He(()=>{const a=K.value.input,u=Ye(a);r=a.offsetHeight||u,nt(a,Ie)}),n({getCheckedNodes:xa,cascaderPanelRef:D,togglePopperVisible:U,contentRef:je,presentText:Se}),(a,u)=>(b(),A(l(oa),{ref_key:"tooltipRef",ref:R,visible:L.value,teleported:a.teleported,"popper-class":[l(i).e("dropdown"),a.popperClass],"popper-options":o,"fallback-placements":a.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:a.placement,transition:`${l(i).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:a.persistent,onHide:Te},{default:I(()=>[ge((b(),P("div",{class:N(l(Ma)),style:pa(l(C)),onClick:()=>U(l(G)?void 0:!0),onKeydown:Ha,onMouseenter:c=>$.value=!0,onMouseleave:c=>$.value=!1},[Q(l(kt),{ref_key:"input",ref:K,modelValue:ce.value,"onUpdate:modelValue":c=>ce.value=c,placeholder:l(V),readonly:l(G),disabled:l(k),"validate-event":!1,size:l(H),class:N(l(za)),tabindex:l(O)&&a.filterable&&!l(k)?-1:void 0,onCompositionstart:l(M),onCompositionupdate:l(M),onCompositionend:l(M),onFocus:Ze,onBlur:Xe,onInput:De},at({suffix:I(()=>[l(Ba)?(b(),A(l(Ne),{key:"clear",class:N([l(f).e("icon"),"icon-circle-close"]),onClick:re(Oa,["stop"])},{default:I(()=>[Q(l(it))]),_:1},8,["class","onClick"])):(b(),A(l(Ne),{key:"arrow-down",class:N(l(Fa)),onClick:re(c=>U(),["stop"])},{default:I(()=>[Q(l(rt))]),_:1},8,["class","onClick"]))]),_:2},[a.$slots.prefix?{name:"prefix",fn:I(()=>[ie(a.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),l(O)?(b(),P("div",{key:0,ref_key:"tagWrapper",ref:Y,class:N([l(i).e("tags"),l(i).is("validate",!!l(Da))])},[(b(!0),P(fe,null,Ce(te.value,c=>(b(),A(l(sa),{key:c.key,type:a.tagType,size:l(z),effect:a.tagEffect,hit:c.hitState,closable:c.closable,"disable-transitions":"",onClose:w=>Le(c)},{default:I(()=>[c.isCollapseTag===!1?(b(),P("span",{key:0},se(c.text),1)):(b(),A(l(oa),{key:1,disabled:L.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:I(()=>[Z("span",null,se(c.text),1)]),content:I(()=>[Z("div",{class:N(l(i).e("collapse-tags"))},[(b(!0),P(fe,null,Ce(d.value.slice(a.maxCollapseTags),(w,le)=>(b(),P("div",{key:le,class:N(l(i).e("collapse-tag"))},[(b(),A(l(sa),{key:w.key,class:"in-tooltip",type:a.tagType,size:l(z),effect:a.tagEffect,hit:w.hitState,closable:w.closable,"disable-transitions":"",onClose:ae=>Le(w)},{default:I(()=>[Z("span",null,se(w.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),a.filterable&&!l(k)?ge((b(),P("input",{key:0,"onUpdate:modelValue":c=>ee.value=c,type:"text",class:N(l(i).e("search-input")),placeholder:l(Se)?"":l(S),onInput:c=>De(ee.value,c),onClick:re(c=>U(!0),["stop"]),onKeydown:tt(Ga,["delete"]),onCompositionstart:l(M),onCompositionupdate:l(M),onCompositionend:l(M),onFocus:Ze,onBlur:Xe},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[lt,ee.value]]):W("v-if",!0)],2)):W("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[l(Et),()=>U(!1),l(je)]])]),content:I(()=>[ge(Q(l(tl),{ref_key:"cascaderPanelRef",ref:D,modelValue:l(Ve),"onUpdate:modelValue":c=>Ke(Ve)?Ve.value=c:null,options:a.options,props:t.props,border:!1,"render-label":a.$slots.default,onExpandChange:Ka,onClose:c=>a.$nextTick(()=>U(!1))},{empty:I(()=>[ie(a.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[ea,!T.value]]),a.filterable?ge((b(),A(l(va),{key:0,ref_key:"suggestionPanel",ref:J,tag:"ul",class:N(l(i).e("suggestion-panel")),"view-class":l(i).e("suggestion-list"),onKeydown:qa},{default:I(()=>[y.value.length?(b(!0),P(fe,{key:0},Ce(y.value,c=>(b(),P("li",{key:c.uid,class:N([l(i).e("suggestion-item"),l(i).is("checked",c.checked)]),tabindex:-1,onClick:w=>Ua(c)},[ie(a.$slots,"suggestion-item",{item:c},()=>[Z("span",null,se(c.text),1),c.checked?(b(),A(l(Ne),{key:0},{default:I(()=>[Q(l(ma))]),_:1})):W("v-if",!0)])],10,["onClick"]))),128)):ie(a.$slots,"empty",{key:1},()=>[Z("li",{class:N(l(i).e("empty-text"))},se(l(g)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[ea,T.value]]):W("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var rl=me(il,[["__file","cascader.vue"]]);const xl=Oe(rl);export{xl as E,Rl as a,Al as b,Rt as c,ca as d};
