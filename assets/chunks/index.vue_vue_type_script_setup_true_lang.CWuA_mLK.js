/* empty css                *//* empty css              */import{_}from"./index.vue_vue_type_script_setup_true_lang.B7tWRN4N.js";import{v as k}from"./directive.CEBmWU5B.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang.CRYnw7sj.js";import{d as K,p,h as R,q as $,c as L,o as u,b as h,e as A,a2 as F,k as o,K as I,a9 as E,B as T,w as q,r as z,a1 as D,ab as j}from"./framework.igcgEEdr.js";import{useTableList as G}from"./index.DKyQc_Ex.js";const W=K({name:"ProTableSelector",inheritAttrs:!1,__name:"index",props:{showSearchActions:{type:Boolean,default:!0},searchFields:{},searchColumn:{},service:{},data:{},columns:{},idKey:{default:"id"},labelKey:{},modelValue:{},formItemProps:{}},emits:["update:modelValue","change"],setup(v,{emit:g}){const s=v,d=g,S=s.service||(async({pageNo:e,pageSize:l})=>{var a,t;return{total:(a=s.data)==null?void 0:a.length,data:(t=s.data)==null?void 0:t.slice((e-1)*l,e*l)}}),{data:c,search:b,loading:w,pagination:y}=G(S,{defaultPageSize:10}),m=p([]);function C(e){m.value=e,d("update:modelValue",m.value),d("change",m.value)}const n=p(null),P=R(()=>c.value.map(e=>e[s.idKey]));function V(e,l){var a,t;n.value&&(e?e.forEach(r=>{var i,f;P.value.includes(r[s.idKey])&&((f=(i=n.value).toggleRowSelection)==null||f.call(i,r,void 0,l))}):(t=(a=n.value).clearSelection)==null||t.call(a))}return $([c,()=>s.modelValue],()=>{V(s.modelValue)}),(e,l)=>{var a;return u(),L("div",null,[e.service&&((a=e.searchFields)!=null&&a.length)?(u(),h(o(_),{key:0,class:"table-selector-search-form",column:e.searchColumn||2,fields:e.searchFields,search:o(b),"show-actions":e.showSearchActions,"form-item-props":e.formItemProps},null,8,["column","fields","search","show-actions","form-item-props"])):A("",!0),F((u(),h(o(B),I({ref_key:"tableRef",ref:n,columns:e.columns,data:o(c),pagination:o(y)},e.$attrs,{onSelectionChange:C}),E({_:2},[T(e.$slots,(t,r)=>({name:r,fn:q(i=>[z(e.$slots,r,D(j(i||{})))])}))]),1040,["columns","data","pagination"])),[[o(k),o(w)]])])}}});export{W as _};
