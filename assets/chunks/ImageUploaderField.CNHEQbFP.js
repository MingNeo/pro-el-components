import"./base.Dwgz6jSd.js";/* empty css                   *//* empty css                        *//* empty css                   *//* empty css                    */import{E as k}from"./index.CemNZkGQ.js";import{E as x}from"./icon.C3T6eoYR.js";import{E as z}from"./index.SQqbOIf2.js";import{E as B}from"./index.BsakEZKL.js";import{E as _}from"./index.BD-RLF64.js";import{d as I,p as c,s as S,c as a,o as s,F as g,B as U,G as m,k as u,w as d,C,j as M,_ as b}from"./framework.igcgEEdr.js";import"./index.D353ODTN.js";import"./index.mDR6Kexr.js";import"./isSymbol.C7jn4vLP.js";import"./isObject.C3e4t58V.js";import"./index.Brw29sq5.js";import"./types.DNi1ojkw.js";import"./aria.9SHySdGF.js";import"./index.BQOwn3WU.js";import"./typescript.Bp3YSIOJ.js";import"./index.BjB1lFfg.js";import"./index.CRCbWsfX.js";import"./use-global-config.CrFx92Tt.js";import"./debounce.BwFge-ki.js";import"./index.8K3Om35h.js";import"./scroll.DxJqq-ED.js";import"./error.Cq9Fpw4b.js";import"./use-form-common-props.BIymRJo1.js";import"./cloneDeep.DdLfN6Fq.js";import"./baseClone.p2iRr-IY.js";import"./isEqual.DkZuJHVE.js";import"./arrayPush.CXZMwWBu.js";import"./initCloneObject.BLfUkf_9.js";import"./refs.n9wIXTtR.js";import"./event.BB_Ol6Sd.js";import"./index.DBJOzW_o.js";const A={class:"image-uploader-field"},F={key:0,class:"image-preview-list"},L=["onClick"],P=["src"],N=I({__name:"ImageUploaderField",props:{modelValue:{},viewMode:{type:Boolean},multiple:{type:Boolean},maxSize:{}},emits:["update:modelValue","change"],setup(V,{emit:w}){const o=V,p=w,i=c([]);S(()=>{if(o.modelValue){const t=Array.isArray(o.modelValue)?o.modelValue:[o.modelValue];i.value=t.map(e=>({name:e.split("/").pop()||"",url:e}))}else i.value=[]});const h=t=>t.type.startsWith("image/")?o.maxSize&&!(t.size/1024/1024<o.maxSize)?(_.error(`图片大小不能超过 ${o.maxSize}MB!`),!1):!0:(_.error("只能上传图片文件!"),!1);function y(t){const e=t.url,l=o.multiple?[...Array.isArray(o.modelValue)?o.modelValue:[],e]:e;p("update:modelValue",l),p("change",l)}function E(t){const e=i.value.filter(l=>l.url!==t.url).map(l=>l.url);p("update:modelValue",o.multiple?e:e[0]),p("change",o.multiple?e:e[0])}const n=c(!1),f=c("");function v(t){f.value=t.url||"",n.value=!0}return(t,e)=>{const l=C("Plus");return s(),a("div",A,[t.viewMode?(s(),a("div",F,[(s(!0),a(g,null,U(i.value,r=>(s(),a("div",{key:r.url,class:"image-preview-item",onClick:$=>v(r)},[m(u(k),{src:r.url||"",fit:"cover","preview-src-list":[r.url||""]},null,8,["src","preview-src-list"])],8,L))),128))])):(s(),a(g,{key:1},[m(u(z),{"file-list":i.value,multiple:t.multiple,action:"/api/upload","list-type":"picture-card","before-upload":h,"on-success":y,"on-remove":E,"on-preview":v},{default:d(()=>[m(u(x),null,{default:d(()=>[m(l)]),_:1})]),_:1},8,["file-list","multiple"]),m(u(B),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),title:"预览"},{default:d(()=>[M("img",{src:f.value,style:{width:"100%"}},null,8,P)]),_:1},8,["modelValue"])],64))])}}}),ye=b(N,[["__scopeId","data-v-0c8b73c0"]]);export{ye as default};
