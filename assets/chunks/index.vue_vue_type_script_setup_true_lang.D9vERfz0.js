import{d as V,p as r,q as f,h,c as v,o as b,j as o,e as c,K as $,n as d,r as g}from"./framework.C7SOrqHQ.js";const E=["value","disabled","placeholder"],K=V({name:"SubmitTextarea",inheritAttrs:!1,__name:"index",props:{modelValue:{default:""},wrapClass:{default:""},maxHeight:{default:204},minHeight:{},showSubmitBtn:{type:Boolean,default:!0},placeholder:{default:"点击输入想了解的问题"},submitBtnClass:{default:""},disabled:{type:Boolean,default:!1},toolInBottom:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1}},emits:["update:modelValue","input","submit"],setup(w,{emit:y}){const t=w,i=y,a=r(t.modelValue);f(()=>t.modelValue,e=>{a.value=e});const l=r(null),s=r(!1),u=h(()=>{var e;return(e=a.value)==null?void 0:e.length}),B=h(()=>t.modelValue);function C(e){i("update:modelValue",e.target.value),i("input",e.target.value),a.value=e.target.value,m()}function m(e){if(t.autoHeight&&l.value){if(e){l.value.style.height=`${e}px`;return}l.value.style.height="auto",l.value.style.height=`${l.value.scrollHeight}px`}}f(()=>a.value,e=>{m(e?void 0:24)},{immediate:!0});function p(){u.value&&(i("submit",a.value),B.value||(a.value=""))}function x(e){e.key==="Enter"&&!e.shiftKey&&!s.value&&e.preventDefault()}function H(e){e.key==="Enter"&&!e.shiftKey&&!s.value&&(e.preventDefault(),p())}function k(){s.value=!0}function S(){setTimeout(()=>{s.value=!1},100)}return(e,n)=>(b(),v("div",{class:d(["pro-submit-textarea",[e.wrapClass,{disabled:e.disabled,"flex-wrap":t.toolInBottom}]])},[o("textarea",$({ref_key:"textareaRef",ref:l,value:a.value,disabled:e.disabled,class:"textarea",style:{maxHeight:`${e.maxHeight}px`,minHeight:t.autoHeight?void 0:`${t.minHeight}px`},rows:1,type:"textarea",placeholder:e.placeholder,maxlength:"2000"},e.$attrs,{onInput:C,onKeydown:x,onKeyup:H,onCompositionstart:k,onCompositionend:S}),null,16,E),e.showSubmitBtn?(b(),v("div",{key:0,class:d(["pro-submit-textarea-btns",{"btns-full-width":t.toolInBottom}])},[g(e.$slots,"btns",{},()=>[n[0]||(n[0]=o("div",null,null,-1))]),e.showSubmitBtn?g(e.$slots,"submitBtn",{key:0,canSubmit:u.value&&!e.disabled},()=>[o("div",{class:d(["pro-submit-textarea__submit-btn",[e.submitBtnClass,{active:u.value&&!e.disabled}]]),onClick:p},n[1]||(n[1]=[o("svg",{class:"submit-icon",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",viewBox:"0 0 1024 1024"},[o("path",{d:"M155.170133 369.595733L866.304 92.706133a51.2 51.2 0 0 1 66.491733 65.604267L666.965333 869.853867c-16.725333 44.6464-80.008533 44.2368-96.187733-0.6144L469.333333 586.888533a51.2 51.2 0 0 0-32.5632-31.402666l-278.664533-89.429334c-45.8752-14.7456-47.786667-78.984533-2.935467-96.4608z",fill:"currentColor"})],-1)]),2)]):c("",!0)],2)):c("",!0)],2))}});export{K as _};
