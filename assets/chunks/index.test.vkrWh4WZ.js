import{m as s}from"./vue-test-utils.esm-bundler.BNPP31t0.js";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang.b45CiOvW.js";import{d as p,i as r,g as a}from"./vi.JYQecGiw.CsLlcVZs.js";import{P as o}from"./framework.igcgEEdr.js";/* empty css              */import"./commonjsHelpers.BosuxZz1.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";p("submitTextarea 组件",()=>{r("应该正确渲染文本域",()=>{const t=s(i);a(t.find("textarea").exists()).toBe(!0)}),r("应该正确处理双向绑定",async()=>{const t=s(i,{props:{modelValue:"初始值"}});await o(),a(t.find("textarea").element.value).toBe("初始值"),await t.setProps({modelValue:"新值"}),a(t.find("textarea").element.value).toBe("新值")}),r("应该正确触发输入事件",async()=>{const t=s(i,{props:{modelValue:""}});await t.find("textarea").setValue("测试输入"),a(t.emitted("update:modelValue")).toBeTruthy(),a(t.emitted("update:modelValue")[0]).toEqual(["测试输入"]),a(t.emitted("input")).toBeTruthy(),a(t.emitted("input")[0]).toEqual(["测试输入"])}),r("应该正确触发提交事件",async()=>{const t=s(i,{props:{modelValue:"测试内容"}});await o(),await t.find(".pro-submit-textarea__submit-btn").trigger("click"),a(t.emitted("submit")).toBeTruthy(),a(t.emitted("submit")[0]).toEqual(["测试内容"])}),r("空内容时不应触发提交",async()=>{const t=s(i,{props:{modelValue:""}});await o(),await t.find(".pro-submit-textarea__submit-btn").trigger("click"),a(t.emitted("submit")).toBeFalsy()}),r("应该支持 Enter 键提交",async()=>{const t=s(i,{props:{modelValue:"测试"}});await o();const e=t.find("textarea");await e.trigger("keydown",{key:"Enter",shiftKey:!1}),await e.trigger("keyup",{key:"Enter",shiftKey:!1}),a(t.emitted("submit")).toBeTruthy()}),r("shift+Enter 应该不触发提交",async()=>{const t=s(i,{props:{modelValue:"测试"}});await o();const e=t.find("textarea");await e.trigger("keydown",{key:"Enter",shiftKey:!0}),await e.trigger("keyup",{key:"Enter",shiftKey:!0}),a(t.emitted("submit")).toBeFalsy()}),r("应该正确处理禁用状态",async()=>{const t=s(i,{props:{modelValue:"测试",disabled:!0}});await o();const e=t.find("textarea");a(e.attributes("disabled")).toBeDefined();const n=t.find(".pro-submit-textarea__submit-btn");await n.trigger("click"),a(n.classes()).not.toContain("active")}),r("应该支持隐藏提交按钮",()=>{const t=s(i,{props:{showSubmitBtn:!1}});a(t.find(".pro-submit-textarea__submit-btn").exists()).toBe(!1)}),r("应该正确显示占位符",()=>{const e=s(i,{props:{placeholder:"自定义占位符"}}).find("textarea");a(e.attributes("placeholder")).toBe("自定义占位符")}),r("应该支持自定义最大高度",()=>{const e=s(i,{props:{maxHeight:300}}).find("textarea");a(e.attributes("style")).toContain("max-height: 300px")}),r("应该支持自定义最小高度",()=>{const e=s(i,{props:{minHeight:80}}).find("textarea");a(e.attributes("style")).toContain("min-height: 80px")}),r("应该支持自动高度",async()=>{const t=s(i,{props:{autoHeight:!0}});await o();const e=t.find("textarea");await e.setValue(`第一行
第二行
第三行`),await o(),a(e.element.style.height).not.toBe("")}),r("应该支持自定义样式类",()=>{const t=s(i,{props:{wrapClass:"custom-class",submitBtnClass:"custom-btn-class"}});a(t.find(".pro-submit-textarea").classes()).toContain("custom-class");const e=t.find(".pro-submit-textarea__submit-btn");a(e.classes()).toContain("custom-btn-class")}),r("受控模式下提交后不清空内容",async()=>{const t=s(i,{props:{modelValue:"测试内容"}});await o(),await t.find(".pro-submit-textarea__submit-btn").trigger("click"),a(t.find("textarea").element.value).toBe("测试内容")}),r("非受控模式下提交后应清空内容",async()=>{const t=s(i);await t.find("textarea").setValue("测试内容"),await o(),await t.find(".pro-submit-textarea__submit-btn").trigger("click"),await o(),a(t.vm.value).toBe("")}),r("中文输入法输入时不应触发提交",async()=>{const t=s(i,{props:{modelValue:"测试"}});await o();const e=t.find("textarea");await e.trigger("compositionstart"),await e.trigger("keydown",{key:"Enter",shiftKey:!1}),await e.trigger("keyup",{key:"Enter",shiftKey:!1}),a(t.emitted("submit")).toBeFalsy(),await e.trigger("compositionend"),await new Promise(n=>setTimeout(n,150)),await e.trigger("keydown",{key:"Enter",shiftKey:!1}),await e.trigger("keyup",{key:"Enter",shiftKey:!1}),a(t.emitted("submit")).toBeTruthy()}),r("应该支持将工具栏放在底部",()=>{const t=s(i,{props:{toolInBottom:!0}});a(t.find(".pro-submit-textarea").classes()).toContain("flex-wrap"),a(t.find(".pro-submit-textarea-btns").classes()).toContain("btns-full-width")}),r("应该支持自定义按钮插槽",()=>{const t=s(i,{slots:{btns:'<button class="custom-btn">自定义按钮</button>'}});a(t.find(".custom-btn").exists()).toBe(!0)}),r("应该支持自定义提交按钮插槽",async()=>{const t=s(i,{props:{modelValue:"测试"},slots:{submitBtn:'<button class="custom-submit">提交</button>'}});await o(),a(t.find(".custom-submit").exists()).toBe(!0)}),r("应该限制最大长度为 2000",()=>{const e=s(i).find("textarea");a(e.attributes("maxlength")).toBe("2000")}),r("有内容且未禁用时提交按钮应该是活动状态",async()=>{const t=s(i,{props:{modelValue:""}});await o();let e=t.find(".pro-submit-textarea__submit-btn");a(e.classes()).not.toContain("active"),await t.setProps({modelValue:"有内容"}),await o(),e=t.find(".pro-submit-textarea__submit-btn"),a(e.classes()).toContain("active")})});
