import{m as s}from"./vue-test-utils.esm-bundler.BNPP31t0.js";import{useForwardEmitsProps as p}from"./index.DQsJlOQY.js";import{d as f,i as a,g as n}from"./vi.JYQecGiw.CsLlcVZs.js";import{d,p as m}from"./framework.igcgEEdr.js";import"./index.Hw2V68ul.js";import"./index.DW2C-GCp.js";import"./commonjsHelpers.BosuxZz1.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";f("useForwardEmitsProps",()=>{a("应该正确转发 emits",()=>{const o=d({name:"TestComponent",emits:["change","update"],setup(i,{emit:t}){const r=m({value:"test"});return{forwardedProps:p(r,t)}},template:"<div></div>"}),e=s(o);n(typeof e.vm.forwardedProps.onChange).toBe("function"),n(typeof e.vm.forwardedProps.onUpdate).toBe("function")}),a("转发的 emit 函数应该正确工作",()=>{const o=d({name:"TestComponent",emits:["change"],setup(i,{emit:t}){const r=m({value:"test"});return{forwardedProps:p(r,t)}},template:"<div></div>"}),e=s(o);e.vm.forwardedProps.onChange("new-value"),n(e.emitted("change")).toBeTruthy(),n(e.emitted("change")[0]).toEqual(["new-value"])}),a("应该支持多个 emits",()=>{const o=d({name:"TestComponent",emits:["change","update","submit","cancel"],setup(i,{emit:t}){const r=m({value:"test"});return{forwardedProps:p(r,t)}},template:"<div></div>"}),e=s(o);n(typeof e.vm.forwardedProps.onChange).toBe("function"),n(typeof e.vm.forwardedProps.onUpdate).toBe("function"),n(typeof e.vm.forwardedProps.onSubmit).toBe("function"),n(typeof e.vm.forwardedProps.onCancel).toBe("function")}),a("emits 应该覆盖同名的 props",()=>{const o=d({name:"TestComponent",emits:["change"],setup(i,{emit:t}){const r=m({onChange:()=>"props-handler"});return{forwardedProps:p(r,t)}},template:"<div></div>"}),e=s(o);e.vm.forwardedProps.onChange("test"),n(e.emitted("change")).toBeTruthy()}),a("应该正确处理空对象 props",()=>{const o=d({name:"TestComponent",emits:["change"],setup(i,{emit:t}){const r=m({});return{forwardedProps:p(r,t)}},template:"<div></div>"}),e=s(o);n(typeof e.vm.forwardedProps.onChange).toBe("function")}),a("返回的应该是计算属性",()=>{const o=d({name:"TestComponent",emits:["change"],setup(i,{emit:t}){const r=m({value:"test"});return{forwardedProps:p(r,t)}},template:"<div></div>"}),e=s(o);n(e.vm.forwardedProps).toBeDefined()})});
