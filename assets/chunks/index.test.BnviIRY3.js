import{useUrlData as o}from"./index.B6G789DT.js";import{d as s,i as r,g as e}from"./vi.JYQecGiw.CsLlcVZs.js";import"./framework.igcgEEdr.js";import"./commonjsHelpers.BosuxZz1.js";import"./vite-browser-external_commonjs-proxy.BC9WSf1a.js";s("useUrlData",()=>{beforeEach(()=>{window.history.replaceState({},"",window.location.pathname)}),r("应该返回正确的属性和方法",()=>{const{urlData:a,setUrlParam:t,resetUrlData:l,removeUrlParam:n,updateParams:u}=o();e(a.value).toBeDefined(),e(typeof t).toBe("function"),e(typeof l).toBe("function"),e(typeof n).toBe("function"),e(typeof u).toBe("function")}),r("应该正确解析 URL 参数",()=>{window.history.replaceState({},"","?name=test&age__num=25");const{urlData:a}=o();e(a.value.name).toBe("test"),e(a.value.age).toBe(25)}),r("应该支持默认值",()=>{const a={page:1,pageSize:10},{urlData:t}=o({defaults:a});e(t.value.page).toBe(1),e(t.value.pageSize).toBe(10)}),r("URL 参数应该覆盖默认值",()=>{window.history.replaceState({},"","?page__num=2");const a={page:1,pageSize:10},{urlData:t}=o({defaults:a});e(t.value.page).toBe(2),e(t.value.pageSize).toBe(10)}),r("应该正确设置单个 URL 参数",()=>{const{urlData:a,setUrlParam:t}=o();t("name","test"),e(a.value.name).toBe("test"),e(window.location.search).toContain("name=test")}),r("应该正确处理数字类型",()=>{const{setUrlParam:a}=o();a("age",25),e(window.location.search).toContain("age__num=25")}),r("应该正确处理数组类型",()=>{const{setUrlParam:a}=o();a("tags",["vue","react","angular"]),e(window.location.search).toContain("tags__arr=vue,react,angular")}),r("应该正确解析数组类型",()=>{window.history.replaceState({},"","?tags__arr=vue,react,angular");const{urlData:a}=o();e(a.value.tags).toEqual(["vue","react","angular"])}),r("应该正确解析数字类型",()=>{window.history.replaceState({},"","?count__num=100");const{urlData:a}=o();e(a.value.count).toBe(100)}),r("应该支持移除 URL 参数",()=>{const{urlData:a,setUrlParam:t,removeUrlParam:l}=o();t("name","test"),e(a.value.name).toBe("test"),l("name"),e(a.value.name).toBeUndefined()}),r("应该支持重置 URL 参数",()=>{const a={page:1,pageSize:10},{urlData:t,setUrlParam:l,resetUrlData:n}=o({defaults:a});l("page",5),l("keyword","test"),e(t.value.page).toBe(5),e(t.value.keyword).toBe("test"),n(),e(t.value.page).toBe(1),e(t.value.pageSize).toBe(10),e(t.value.keyword).toBeUndefined()}),r("应该支持批量更新参数",()=>{const{urlData:a,updateParams:t}=o();t({name:"test",age:25,tags:["vue","react"]}),e(a.value.name).toBe("test"),e(a.value.age).toBe(25),e(a.value.tags).toEqual(["vue","react"])}),r("批量更新应该保留其他参数",()=>{const{setUrlParam:a,updateParams:t,urlData:l}=o();a("existing","value"),t({new:"param"}),e(l.value.existing).toBe("value"),e(l.value.new).toBe("param")}),r("应该正确处理 undefined 和 null 值",()=>{const{setUrlParam:a}=o();a("key1",void 0),a("key2",null),e(window.location.search).not.toContain("key1"),e(window.location.search).not.toContain("key2")}),r("应该正确处理字符串类型",()=>{const{setUrlParam:a,urlData:t}=o();a("name","test user"),e(t.value.name).toBe("test user")}),r("应该正确处理空字符串",()=>{const{setUrlParam:a,urlData:t}=o();a("name",""),e(t.value.name).toBe("")}),r("应该正确处理布尔值",()=>{const{setUrlParam:a,urlData:t}=o();a("active",!0),e(t.value.active).toBe("true")}),r("应该正确更新浏览器历史",()=>{const{setUrlParam:a}=o();a("param","value"),e(window.location.search).toContain("param=value")}),r("应该正确处理特殊字符",()=>{const{setUrlParam:a,urlData:t}=o();a("query","hello world & test"),e(t.value.query).toBe("hello world & test")}),r("应该正确处理空数组",()=>{const{setUrlParam:a,urlData:t}=o();a("items",[]),e(t.value.items).toEqual([])}),r("应该正确处理数字 0",()=>{const{setUrlParam:a,urlData:t}=o();a("count",0),e(t.value.count).toBe(0)}),r("应该支持多次更新同一个参数",()=>{const{setUrlParam:a,urlData:t}=o();a("value",1),e(t.value.value).toBe(1),a("value",2),e(t.value.value).toBe(2),a("value",3),e(t.value.value).toBe(3)}),r("空对象时不应该有查询参数",()=>{const{urlData:a}=o();a.value={},e(window.location.search).toBe("")})});
